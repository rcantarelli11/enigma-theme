{%- liquid
  comment
    Renders CSS variables for a given global color category.

    Required parameters:
      - category: { String } The name of the color category. Can be:
        - products
        - notifcations
      - setting_ids: { String } A comma separated list of the setting IDs within the category.
  endcomment

  assign setting_ids = setting_ids | remove: ' ' | split: ','

  for id in setting_ids
    # CSS vars should be handleized, so we need to convert '_'s in the setting ID to '-'s
    capture handleized_id
      echo id | replace: '_', '-'
    endcapture

    capture variable_name
      echo '--color-[[c]]-[[hi]]' | replace: '[[c]]', category | replace: '[[hi]]', handleized_id
    endcapture

    capture setting_name
      echo 'color_[[c]]_[[id]]' | replace: '[[c]]', category | replace: '[[id]]', id
    endcapture

    capture variable_value
      echo settings[setting_name]
    endcapture

    echo '[[vn]]: [[vv]];' | replace: '[[vn]]', variable_name | replace: '[[vv]]', variable_value

    if category == 'notifications' and id == 'error' or id == 'success'
      render 'color-alpha-modified-vars', color_setting: variable_value, variable_name_base: variable_name, alpha_values: '10, 20'
    endif

    unless forloop.last
      echo ' '
    endunless
  endfor
-%}
