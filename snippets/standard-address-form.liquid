{% liquid
  comment
    Renders a standard address form.

    Optional parameters:
      - address: { object } The address from `customer.addresses` to edit.
  endcomment

  if address != blank
    assign form_parameter = address
    assign form_heading_text = 'customer.addresses.edit_address' | t
    assign submit_address_label = 'customer.addresses.update' | t
  else
    assign form_parameter = customer.new_address
    assign form_heading_text = 'customer.addresses.add_new' | t
    assign submit_address_label = 'customer.addresses.add' | t
  endif
%}

{% form 'customer_address', form_parameter, class: 'addresses__form stack ta-l' %}
  <h3 class="addresses__modal-heading ff-heading fs-heading-2-base ta-c">
    {{ form_heading_text }}
  </h3>

  <div class="addresses__first-name-wrapper">
    <label for="address-first-name--{{ form.id }}">{{ 'customer.addresses.first_name' | t }}</label>
    <input
      type="text"
      id="address-first-name--{{ form.id }}"
      class="input"
      name="address[first_name]"
      value="{{ form.first_name }}"
      autocomplete="given-name"
    >
  </div>

  <div class="addresses__last-name-wrapper">
    <label for="address-last-name--{{ form.id }}">{{ 'customer.addresses.last_name' | t }}</label>
    <input
      type="text"
      id="address-last-name--{{ form.id }}"
      class="input"
      name="address[last_name]"
      value="{{ form.last_name }}"
      autocomplete="family-name"
    >
  </div>

  <div class="addresses__company-wrapper">
    <label for="address-company--{{ form.id }}">{{ 'customer.addresses.company' | t }}</label>
    <input
      type="text"
      id="address-company--{{ form.id }}"
      class="input"
      name="address[company]"
      value="{{ form.company }}"
      autocomplete="organization"
    >
  </div>

  <div class="addresses__address-1-wrapper">
    <label for="address-address-1--{{ form.id }}">{{ 'customer.addresses.address1' | t }}</label>
    <input
      type="text"
      id="address-address-1--{{ form.id }}"
      class="input"
      name="address[address1]"
      value="{{ form.address1 }}"
      autocomplete="street-address address-line1"
    >
  </div>

  <div class="addresses__address-2-wrapper">
    <label for="address-address-2--{{ form.id }}">{{ 'customer.addresses.address2' | t }}</label>
    <input
      type="text"
      id="address-address-2--{{ form.id }}"
      class="input"
      name="address[address2]"
      value="{{ form.address2 }}"
      autocomplete="street-address address-line2"
    >
  </div>

  <div class="addresses__city-wrapper">
    <label for="address-city--{{ form.id }}">{{ 'customer.addresses.city' | t }}</label>
    <input
      type="text"
      id="address-city--{{ form.id }}"
      class="input"
      name="address[city]"
      value="{{ form.city }}"
      autocomplete="address-level2"
    >
  </div>

  <div class="addresses__country-wrapper">
    <label for="address-country--{{ form.id }}">{{ 'customer.addresses.country' | t }}</label>
    <select
      id="address-country--{{ form.id }}"
      class="input address-country-option"
      data-form-id="{{ form.id }}"
      name="address[country]"
      data-default="{{ form.country }}"
      js-country-option
      autocomplete="country"
    >
      {{ all_country_option_tags }}
    </select>
  </div>

  <div id="address-province-container--{{ form.id }}" class="addresses__province-wrapper" style="display:none">
    <label for="address-province--{{ form.id }}">{{ 'customer.addresses.province' | t }}</label>
    <select
      id="address-province--{{ form.id }}"
      class="input"
      name="address[province]"
      data-default="{{ form.province }}"
      autocomplete="address-level1"
    ></select>
  </div>

  <div class="addresses__zip-wrapper">
    <label for="address-zip--{{ form.id }}">{{ 'customer.addresses.zip' | t }}</label>
    <input
      type="text"
      id="address-zip--{{ form.id }}"
      class="input"
      name="address[zip]"
      value="{{ form.zip }}"
      autocapitalize="characters"
      autocomplete="postal-code"
    >
  </div>

  <div class="addresses__phone-wrapper">
    <label for="address-phone--{{ form.id }}">{{ 'customer.addresses.phone' | t }}</label>
    <input
      type="tel"
      id="address-phone--{{ form.id }}"
      class="input"
      name="address[phone]"
      value="{{ form.phone }}"
      autocomplete="phone"
      pattern="[0-9\-]*"
    >
  </div>

  <div class="addresses__checkbox-wrapper">
    {{ form.set_as_default_checkbox }}
    <label for="address_default_address_{{ form.id }}" class="fs-body-100">
      {{ 'customer.addresses.set_default' | t }}
    </label>
  </div>

  {% render 'button',
    label: submit_address_label,
    id: 'address-submit-button',
    button_width: 'full',
    require_link: false,
    linkless_type: 'submit'
  %}
{% endform %}
