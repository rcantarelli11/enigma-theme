<footer class="enigma-footer" id="enigma-footer-{{ section.id }}">
  <div class="enigma-container">
    <div class="enigma-footer__grid">
      <div class="enigma-footer__brand">
        <a href="/" class="enigma-header__logo-text" style="font-size: 1.25rem; font-weight: 700; letter-spacing: 0.15em; text-transform: uppercase;">
          {{ shop.name }}
        </a>
        <p>{{ section.settings.brand_text }}</p>
        <div class="enigma-footer__socials mt-lg">
          {%- if section.settings.social_facebook != blank -%}
            <a href="{{ section.settings.social_facebook }}" target="_blank" rel="noopener" aria-label="Facebook">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
            </a>
          {%- endif -%}
          {%- if section.settings.social_instagram != blank -%}
            <a href="{{ section.settings.social_instagram }}" target="_blank" rel="noopener" aria-label="Instagram">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
            </a>
          {%- endif -%}
          {%- if section.settings.social_tiktok != blank -%}
            <a href="{{ section.settings.social_tiktok }}" target="_blank" rel="noopener" aria-label="TikTok">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1 0-5.78 2.92 2.92 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 3 15.57 6.33 6.33 0 0 0 9.37 22a6.33 6.33 0 0 0 6.37-6.22V9.4a8.16 8.16 0 0 0 4.85 1.58V7.53a4.78 4.78 0 0 1-1-.84z"/></svg>
            </a>
          {%- endif -%}
        </div>
      </div>

      {%- for block in section.blocks -%}
        <div class="enigma-footer__column" {{ block.shopify_attributes }}>
          <h4 class="enigma-footer__heading">{{ block.settings.heading }}</h4>
          <ul class="enigma-footer__links">
            {%- for link in block.settings.menu.links -%}
              <li><a href="{{ link.url }}">{{ link.title }}</a></li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endfor -%}
    </div>

    <div class="enigma-footer__bottom">
      <p>&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. All rights reserved.</p>
      <p>
        <a href="/policies/privacy-policy" style="color: var(--text-muted); transition: color 150ms;">Privacy</a>
        <span style="margin: 0 0.5rem;">Â·</span>
        <a href="/policies/terms-of-service" style="color: var(--text-muted); transition: color 150ms;">Terms</a>
      </p>
    </div>

    {%- if section.settings.show_disclaimer -%}
      <p class="enigma-caption mt-lg" style="text-align: center; max-width: 640px; margin-left: auto; margin-right: auto;">
        {{ section.settings.disclaimer }}
      </p>
    {%- endif -%}
  </div>
</footer>

{% schema %}
{
  "name": "Enigma Footer",
  "tag": "div",
  "settings": [
    {
      "type": "textarea",
      "id": "brand_text",
      "label": "Brand description",
      "default": "Premium supplements crafted to optimize performance, recovery, and wellness. Power beyond limits."
    },
    {
      "type": "url",
      "id": "social_facebook",
      "label": "Facebook URL"
    },
    {
      "type": "url",
      "id": "social_instagram",
      "label": "Instagram URL"
    },
    {
      "type": "url",
      "id": "social_tiktok",
      "label": "TikTok URL"
    },
    {
      "type": "checkbox",
      "id": "show_disclaimer",
      "label": "Show FDA disclaimer",
      "default": true
    },
    {
      "type": "textarea",
      "id": "disclaimer",
      "label": "Disclaimer text",
      "default": "*These statements have not been evaluated by the Food and Drug Administration. These products are not intended to diagnose, treat, cure or prevent any disease."
    }
  ],
  "blocks": [
    {
      "type": "menu_column",
      "name": "Menu column",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Shop"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Enigma Footer",
      "blocks": [
        { "type": "menu_column", "settings": { "heading": "Shop" } },
        { "type": "menu_column", "settings": { "heading": "Company" } },
        { "type": "menu_column", "settings": { "heading": "Support" } }
      ]
    }
  ]
}
{% endschema %}
