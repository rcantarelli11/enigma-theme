<section class="enigma-newsletter enigma-section enigma-section--lg" id="enigma-newsletter-{{ section.id }}">
  <div class="enigma-container enigma-container--narrow">
    <div class="enigma-newsletter__content">
      {%- if section.settings.label != blank -%}
        <p class="enigma-label mb-sm">{{ section.settings.label }}</p>
      {%- endif -%}
      <h2 class="enigma-h3">{{ section.settings.title }}</h2>
      {%- if section.settings.text != blank -%}
        <p class="enigma-body mt-md">{{ section.settings.text }}</p>
      {%- endif -%}

      {% form 'customer', class: 'enigma-newsletter__form' %}
        <input type="hidden" name="contact[tags]" value="newsletter">
        <input
          type="email"
          name="contact[email]"
          class="enigma-newsletter__input"
          placeholder="{{ section.settings.placeholder }}"
          required
          autocomplete="email"
          aria-label="Email address"
        >
        <button type="submit" class="enigma-btn enigma-btn--primary">
          {{ section.settings.button_text }}
        </button>
      {% endform %}

      {%- if section.settings.disclaimer != blank -%}
        <p class="enigma-caption mt-md">{{ section.settings.disclaimer }}</p>
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Enigma Newsletter",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "label",
      "label": "Label",
      "default": "STAY IN THE LOOP"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Get 10% Off Your First Order"
    },
    {
      "type": "text",
      "id": "text",
      "label": "Description",
      "default": "Join the Enigma community for exclusive drops, training tips, and early access."
    },
    {
      "type": "text",
      "id": "placeholder",
      "label": "Input placeholder",
      "default": "Enter your email"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Subscribe"
    },
    {
      "type": "text",
      "id": "disclaimer",
      "label": "Disclaimer text",
      "default": "No spam. Unsubscribe anytime."
    }
  ],
  "presets": [
    {
      "name": "Enigma Newsletter"
    }
  ]
}
{% endschema %}
