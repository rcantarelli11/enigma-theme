{"version":3,"file":"theme.min.js","sources":["../../node_modules/srraf/dist/srraf.es.js","../../src/scripts/lib/events.js","../../src/scripts/lib/width-watcher.js","../../src/scripts/lib/modals.js","../../src/scripts/utils/debounce.js","../../src/scripts/lib/media-queries.js","../../src/scripts/lib/navigation.js","../../src/scripts/lib/cart.js","../../src/scripts/sections/header-group.js","../../src/scripts/sections/announcement-bar.js","../../src/scripts/sections/blog-posts.js","../../src/scripts/sections/header.js","../../src/scripts/sections/popups.js","../../src/scripts/lib/at-breakpoint-change.js","../../src/scripts/lib/intersection-watcher.js","../../src/scripts/lib/pauseable-interval.js","../../src/scripts/sections/slideshow.js","../../src/scripts/lib/load-vimeo-api.js","../../src/scripts/lib/load-youtube-api.js","../../src/scripts/lib/video-player-state.js","../../src/scripts/lib/video-player.js","../../src/scripts/lib/external-video-player.js","../../src/scripts/sections/video.js","../../src/scripts/templates/collection.js","../../src/scripts/lib/media-lightbox.js","../../src/scripts/lib/model-viewer.js","../../src/scripts/custom-elements/product-media.js","../../src/scripts/templates/product.js","../../src/scripts/templates/search.js","../../src/scripts/lib/page-transition.js","../../src/scripts/theme.js","../../src/scripts/lib/a11y.js"],"sourcesContent":["var n,e,i,o,t,r,f,d,p,u=[];function w(n,a){return e=window.pageXOffset,o=window.pageYOffset,r=window.innerHeight,d=window.innerWidth,void 0===i&&(i=e),void 0===t&&(t=o),void 0===p&&(p=d),void 0===f&&(f=r),(a||o!==t||e!==i||r!==f||d!==p)&&(!function(n){for(var w=0;w<u.length;w++)u[w]({x:e,y:o,px:i,py:t,vh:r,pvh:f,vw:d,pvw:p},n)}(n),i=e,t=o,f=r,p=d),requestAnimationFrame(w)}export default function(e){return u.indexOf(e)<0&&u.push(e),n=n||w(performance.now()),{update:function(){return w(performance.now(),!0),this},destroy:function(){u.splice(u.indexOf(e),1)}}}\n//# sourceMappingURL=srraf.es.js.map\n","const EVENTS = {\n  QUANTITY_INPUT_CHANGE: \"quantity-input:quantity-changed\",\n  QUICK_ADD_SUCCESS: \"quick-add:success\",\n  QUICK_ADD_ERROR: \"quick-add:error\",\n\n  PRODUCT_VARIANT_CHANGING: \"product:variant:changing\",\n  PRODUCT_VARIANT_CHANGED: \"product:variant:changed\",\n  PRODUCT_ADD_SUCCESS: \"product-add:success\",\n  PRODUCT_ADD_ERROR: \"product-add:error\",\n\n  CART_ITEM_ADDED: \"cart:item-added\",\n  CART_ITEM_CHANGED: \"cart:item-changed\",\n  CART_ITEM_CHANGE_ERROR: \"cart:item-change:error\",\n  CART_ITEM_REMOVED: \"cart:item-removed\",\n  CART_NOTE_CHANGED: \"cart:note-changed\",\n  CART_NOTE_CHANGED_ERROR: \"cart:note-changed:error\",\n  CART_CHANGED: \"cart:changed\",\n  CART_ERROR: \"cart:error\",\n  CART_ITEM_CHANGE_PENDING: \"cart:item-change-pending\",\n\n  CART_DRAWER_OPENING: \"fluco:modal:cartDrawer:opening\",\n  CART_DRAWER_OPEN: \"fluco:modal:cartDrawer:open\",\n  CART_DRAWER_CLOSE: \"fluco:modal:cartDrawer:close\",\n\n  CART_NOTE_OPENED: \"cart-note:opened\",\n\n  FILTER_REPAINT: \"fluco:filters:repaint\",\n  FILTER_SORT_CHANGED: \"fluco:filter-sort:changed\",\n  SORT_CHANGED: \"fluco:sort:changed\",\n\n  ANNOUNCEMENT_HEIGHT_UPDATED: \"fluco:announcement-height:updated\",\n  HEADER_HEIGHT_UPDATED: \"fluco:header-height:updated\",\n\n  SHOPIFY_BLOCK_SELECT: \"shopify:block:select\",\n  SHOPIFY_BLOCK_DESELECT: \"shopify:block:deselect\",\n\n  SHOPIFY_SECTION_DESELECT: \"shopify:section:deselect\",\n  SHOPIFY_SECTION_SELECT: \"shopify:section:select\",\n  SHOPIFY_SECTION_LOAD: \"shopify:section:load\",\n  SHOPIFY_SECTION_UNLOAD: \"shopify:section:unload\",\n\n  ANNOUNCEMENT_BAR_STICKY_CHANGE: \"fluco:announcement-bar:sticky-change\",\n\n  MODAL_PASSWORD_LOGIN_OPEN: \"fluco:modal:passwordLogin:open\",\n\n  MODAL_ADDRESS_NEW_OPEN: \"fluco:modal:new-address:open\",\n  MODAL_ADDRESS_EDIT_OPEN: (addressId) =>\n    `fluco:modal:edit-address-${addressId}:open`,\n\n  MODAL_POPUP_OPEN: (id) => `fluco:modal:${id}:open`,\n  MODAL_POPUP_OPENING: (id) => `fluco:modal:${id}:opening`,\n  MODAL_POPUP_CLOSE: (id) => `fluco:modal:${id}:close`,\n  MODAL_POPUP_CLOSING: (id) => `fluco:modal:${id}:closing`,\n  MODAL_POPUP_CLOSED: (id) => `fluco:modal:${id}:closed`,\n\n  IMPACT_LOGO_LOADED: \"fluco:impact-logo:loaded\",\n  IMPACT_LOGO_NOT_VISIBLE: \"fluco:impact-logo:not-visible\",\n  IMPACT_LOGO_PARTIALLY_VISIBLE: \"fluco:impact-logo:partially-visible\",\n  IMPACT_LOGO_VISIBLE: \"fluco:impact-logo:visible\",\n\n  MODAL_MOBILE_CROSSBORDER_LANGUAGE_DRAWER_OPEN:\n    \"fluco:modal:mobileLanguageDrawer:open\",\n  MODAL_MOBILE_CROSSBORDER_COUNTRY_DRAWER_OPEN:\n    \"fluco:modal:mobileCountryDrawer:open\",\n\n  SCROLL_SLIDER_CHANGED: (scrollerId) =>\n    `scroll-slider-${scrollerId}:slide-changed`,\n  SCROLL_SLIDER_INIT: (scrollerId) => `scroll-slider-${scrollerId}:init`,\n  SCROLL_SLIDER_INITIALIZED: (scrollerId) =>\n    `scroll-slider-${scrollerId}:initialized`,\n  SCROLL_SLIDER_GO_TO_SLIDE: (scrollerId) =>\n    `scroll-slider-${scrollerId}:go-to-slide`,\n\n  // TODO Consider renaming these events: see usage in product-item.js related to quickview where\n  // it feels a bit off to use \"STARTED\" or \"INCOMPLETED\", because we are not actually doing any request,\n  // just waiting for content to load\n  BUTTON_STATE_STARTED: \"fluco:button-state:started\", // TODO: Consider naming this BUTTON_STATE_LOADING\n  BUTTON_STATE_COMPLETED: \"fluco:button-state:completed\", // ODO: Consider naming this BUTTON_STATE_SUCCESS\n  BUTTON_STATE_INCOMPLETED: \"fluco:button-state:incompleted\", // TODO: consider renaming this BUTTON_STATE_NORMAL\n\n  SEARCH_INPUT_CHANGED: \"fluco:search-input:changed\",\n\n  PREDICTIVE_SEARCH_DRAWER_OPENING:\n    \"fluco:modal:predictiveSearchDrawer:opening\",\n  PREDICTIVE_SEARCH_DRAWER_OPEN: \"fluco:modal:predictiveSearchDrawer:open\",\n  PREDICTIVE_SEARCH_DRAWER_CLOSE: \"fluco:modal:predictiveSearchDrawer:close\",\n\n  WINDOW_RESIZED: \"fluco:window:resized\",\n  WINDOW_WIDTH_CHANGED: \"fluco:window:width-changed\",\n  WINDOW_ABOVE_BREAKPOINT: (breakpoint) => `fluco:window:above-${breakpoint}`,\n  WINDOW_BELOW_BREAKPOINT: (breakpoint) => `fluco:window:below-${breakpoint}`,\n}\nexport default EVENTS\n","import srraf from \"srraf\"\nimport EVENTS from \"./events.js\"\n\nconst breakpoints = [480, 720, 960, 1024, 1200, 1400]\nconst reversedBreakpoints = breakpoints.reverse()\n\nconst widthWatcher = () => {\n  const viewportWidth =\n    window.innerWidth || document.documentElement.clientWidth\n\n  let lastSize = viewportWidth\n\n  srraf(({ vw }) => {\n    document.dispatchEvent(new CustomEvent(EVENTS.WINDOW_RESIZED))\n\n    if (vw > lastSize) {\n      breakpoints.forEach((width) => {\n        if (lastSize < width && vw >= width) {\n          document.dispatchEvent(\n            new CustomEvent(EVENTS.WINDOW_ABOVE_BREAKPOINT(width)),\n          )\n        }\n      })\n    } else {\n      reversedBreakpoints.forEach((width) => {\n        if (lastSize > width && vw < width) {\n          document.dispatchEvent(\n            new CustomEvent(EVENTS.WINDOW_BELOW_BREAKPOINT(width)),\n          )\n        }\n      })\n    }\n\n    if (vw !== lastSize) {\n      document.dispatchEvent(new CustomEvent(EVENTS.WINDOW_WIDTH_CHANGED))\n    }\n\n    lastSize = vw\n  })\n}\n\nexport default widthWatcher\n","/* eslint-disable accessor-pairs */\n\n/**\n * @class Dialog\n * @description A dialog class\n * @param {HTMLElement} element - The dialog element\n *\n * @property {Object} data - The dialog data\n * @property {HTMLElement} data.element - The dialog element\n * @property {string} data.id - The dialog id\n * @property {HTMLElement} data.title - The dialog title element\n * @property {HTMLElement} data.description - The dialog description element\n *\n * @property {HTMLElement} data.content - The dialog content element\n *\n * @property {boolean} [reusable=false] - If the dialog should be reused\n * @property {boolean} [blurDismiss=false] - If the dialog should be closed on blur\n * @property {boolean} [modal=false] - If the dialog should be a modal\n * @property {boolean} [backdropDismiss=false] - If the dialog should be closed on backdrop click\n * @property {boolean} [closeButton=false] - If the dialog should have a close button\n * @property {Function} [callbackOpen] - Callback function to be called when the dialog is opened\n * @property {Function} [callbackClose] - Callback function to be called when the dialog is closed\n */\nexport class Dialog {\n  #config = {\n    openMethod: \"show\",\n    reusable: false,\n    dynamicContent: false,\n    blurDismiss: false,\n  }\n\n  /**\n   * @constructor\n   * @param {HTMLElement} element - The dialog element\n   * @returns {Dialog} The dialog instance\n   */\n  constructor(element) {\n    // Setup global flu dialog registry\n    if (!window.flu) window.flu = {}\n    if (!window.flu.dialogs) window.flu.dialogs = {}\n\n    // Attempting to initialize a dialog with the same name as existing will return existing dialog instance\n    if (window.flu.dialogs[element.dataset.flucoDialog]) {\n      console.error(\n        `Dialog with id ${element.dataset.flucoDialog} already exists`,\n      )\n\n      return window.flu.dialogs[element.dataset.flucoDialog]\n    }\n\n    this.data = {\n      element,\n      id: element.dataset.flucoDialog,\n      title: element.querySelector(\"[data-title]\"),\n      description: element.querySelector(\"[data-description]\"),\n      content: element.querySelector(\"[data-content]\"),\n    }\n\n    // add dialog to global flu dialog registry\n    this.#registerDialog(element)\n    this.eventController = new AbortController()\n    this.eventOptions = { signal: this.eventController.signal }\n\n    window.addEventListener(\n      `fluco:modal:${this.data.id}:open`,\n      (data) => {\n        this.open(data)\n      },\n      this.eventOptions,\n    )\n\n    window.addEventListener(\n      `fluco:modal:${this.data.id}:close`,\n      () => {\n        this.close()\n      },\n      this.eventOptions,\n    )\n\n    // Prevent \"esc\" key closing the dialog directly so we have time to animate out\n    this.data.element.addEventListener(\"cancel\", (event) => {\n      event.preventDefault()\n      this.close()\n    })\n\n    // Prevent close button from closing the dialog directly so we have time to animate out\n    // Delegate binding so that close buttons in `template` tags are caught\n    this.data.element.addEventListener(\"click\", (event) => {\n      if (event.target.closest(\"form[method='dialog']\")) {\n        this.#handleCloseButtonClick(event)\n      }\n    })\n  }\n\n  /**\n   * @property {string} title - The dialog title\n   * @example\n   * dialog.title = 'My Dialog'\n   */\n  set title(value) {\n    this.data.title.textContent = value\n  }\n\n  /**\n   * @method setTitle\n   * @param {string} title - The dialog title\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setTitle('My Dialog')\n   */\n  setTitle(title) {\n    this.title = title\n\n    return this\n  }\n\n  /**\n   * @property {string} description - The dialog description\n   * @example\n   * dialog.description = 'My Dialog Description'\n   */\n  set description(value) {\n    this.data.description.textContent = value\n  }\n\n  /**\n   * @method setDescription\n   * @param {string} description - The dialog description\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setDescription('My Dialog Description')\n   */\n  setDescription(description) {\n    this.description = description\n\n    return this\n  }\n\n  /**\n   * @property {string} content - The dialog content\n   * @example\n   * dialog.content = 'My Dialog Content'\n   */\n  set content(value) {\n    this.data.content.innerHTML = value\n  }\n\n  /**\n   * @method setContent\n   * @param {string} content - The dialog content\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setContent('My Dialog Content')\n   */\n  setContent(content) {\n    this.content = content\n\n    return this\n  }\n\n  /**\n   * @property {boolean} reusable - If the dialog should be reusable\n   * @example\n   * dialog.reusable = true\n   */\n  set reusable(value) {\n    if (typeof value !== \"boolean\") return\n    this.#config.reusable = value\n  }\n\n  /**\n   * @method setReusable\n   * @param {boolean} reusable - If the dialog should be reusable\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setReusable(true)\n   */\n  setReusable(reusable) {\n    this.reusable = reusable\n\n    return this\n  }\n\n  /**\n   * @property {boolean} blurDismiss - If the dialog should be closed on blur\n   * @example\n   * dialog.blurDismiss = true\n   */\n  set blurDismiss(value) {\n    if (typeof value !== \"boolean\") return\n\n    this.#config.blurDismiss = value\n  }\n\n  /**\n   * @method setBlurDismiss\n   * @param {boolean} blurDismiss - If the dialog should be closed on blur\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setBlurDismiss(true)\n   */\n  setBlurDismiss(blurDismiss) {\n    this.blurDismiss = blurDismiss\n\n    return this\n  }\n\n  /**\n   * @property {boolean} modal - If the dialog should be a modal\n   * @example\n   * dialog.modal = true\n   */\n  set modal(value) {\n    if (typeof value === \"boolean\" && value) {\n      this.#config.openMethod = \"showModal\"\n    }\n  }\n\n  /**\n   * @method setModal\n   * @param {boolean} modal - If the dialog should be a modal\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setModal(true)\n   */\n  setModal(modal) {\n    this.modal = modal\n\n    return this\n  }\n\n  /**\n   * @property {boolean} backdropDismiss - If the dialog should be closed on backdrop click\n   * @example\n   * dialog.backdropDismiss = true\n   */\n  set backdropDismiss(value) {\n    if (typeof value === \"boolean\" && value) {\n      this.data.element.addEventListener(\"click\", (event) => {\n        // A click on this.data.element is anywhere on the dialog element directly, or its ::backdrop\n        // Direct clicks to element should be prevented by always including a full width/height element\n        // within the dialog.  We do not want the dialog itself to close on click\n        if (event.target === this.data.element) {\n          this.close()\n        }\n      })\n    }\n  }\n\n  /**\n   * @method setBackdropDismiss\n   * @param {boolean} backdropDismiss - If the dialog should be closed on backdrop click\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setBackdropDismiss(true)\n   */\n  setBackdropDismiss(backdropDismiss) {\n    this.backdropDismiss = backdropDismiss\n\n    return this\n  }\n\n  /**\n   * @property {Function} callbackOpen - Callback function to be called when the dialog is opened\n   * @example\n   * dialog.callbackOpen = (dialog) => console.log(dialog)\n   */\n  set callbackOpen(callback) {\n    callback(this)\n  }\n\n  /**\n   * @method setCallbackOpen\n   * @param {Function} callback - Callback function to be called when the dialog is opened\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setCallbackOpen((dialog) => console.log(dialog))\n   */\n  setCallbackOpen(callback) {\n    this.callbackOpen = callback\n\n    return this\n  }\n\n  /**\n   * @property {Function} callbackClose - Callback function to be called when the dialog is closed\n   * @example\n   * dialog.callbackClose = (dialog) => console.log(dialog)\n   */\n  set callbackClose(callback) {\n    callback(this)\n  }\n\n  /**\n   * @method setCallbackClose\n   * @param {Function} callback - Callback function to be called when the dialog is closed\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setCallbackClose((dialog) => console.log(dialog))\n   */\n  setCallbackClose(callback) {\n    this.callbackClose = callback\n\n    return this\n  }\n\n  /**\n   * @method open\n   * @param {Object} detail - The dialog detail\n   * @param {string} detail.title - The dialog title\n   * @param {string} detail.description - The dialog description\n   * @param {string} detail.content - The dialog content\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.open({ title: 'My Dialog', description: 'My Dialog Description', content: 'My Dialog Content' })\n   */\n  open({ detail } = {}) {\n    this.data.element.classList.remove(\"modal--will-close\")\n\n    return this.#emit(\"opening\")\n      .#setDynamicContent(detail)\n      .#open()\n      .#blurDismiss()\n      .#emit(\"opened\")\n      .#callback(this.callbackOpen)\n  }\n\n  /**\n   * @method close\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.close()\n   */\n  close() {\n    this.data.element.classList.add(\"modal--will-close\")\n\n    // Detect close animations and wait for them to complete before closing\n    // this requires that animations are applied but not run with \"modal--will-close\"\n    // and actually run with \"modal--trigger-close-animation\"\n    const closeAnimations = this.data.element.getAnimations()\n    const actuallyClose = () => {\n      return this.#emit(\"closing\")\n        .#close()\n        .clear()\n        .#emit(\"closed\")\n        .#callback(this.callbackClose)\n    }\n\n    if (closeAnimations.length) {\n      this.data.element.addEventListener(\n        \"animationend\",\n        () => {\n          this.data.element.classList.remove(\n            \"modal--trigger-close-animation\",\n            \"modal--will-close\",\n          )\n          actuallyClose()\n        },\n        { once: true },\n      )\n\n      this.data.element.classList.add(\"modal--trigger-close-animation\")\n    } else {\n      actuallyClose()\n    }\n  }\n\n  /**\n   * @method clear\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.clear()\n   */\n  clear() {\n    return this.#setDynamicContent({\n      detail: {\n        title: null,\n        description: null,\n        content: null,\n      },\n    })\n  }\n\n  /**\n   * @method destroy\n   * @description Destroy the dialog, remove event listeners and remove the dialog DOM element.\n   * @param {Object} options - The destroy options\n   * @param {boolean} options.events - If the dialog events should be removed\n   * @param {boolean} options.dom - If the dialog DOM should be removed\n   * @returns {void}\n   * @example\n   * dialog.destroy()\n   */\n  destroy({ events = true, dom = true, deregister = false } = {}) {\n    if (events) {\n      this.eventController.abort()\n\n      if (this.data.closeButton) {\n        this.data.closeButton.removeEventListener(\n          \"click\",\n          this.#handleCloseButtonClick.bind(this),\n        )\n      }\n    }\n\n    if (dom) {\n      this.data.element.remove()\n    }\n\n    if (deregister) {\n      this.#deregisterDialog(this.data.element)\n    }\n  }\n\n  /**\n   * @method setAttribute\n   * Provides a way to set attributes on the dialog element or target children elements given the target parameter.\n   * When provided with 2 parameters, the key and value are set on the dialog element, this behaves exactly like\n   * element.setAttribute(key, value).\n   * When the target parameter is provided, the key and value are set on the target child element, and the value is prefixed\n   * with the dialog instance id, acting like scoping such as a unique element id.\n   * @param {string} key - The attribute key\n   * @param {string} value - The attribute value\n   * @param {string=} target - (optional) The attribute target in this.data\n   * @returns {Dialog} The dialog instance\n   * @example\n   * dialog.setAttribute('id', 'myTitle', 'title')\n   * dialog.setAttribute('id', 'someDescription', 'description')\n   * dialog.setAttribute('aria-labelledby', 'title', 'element')\n   * dialog.setAttribute('aria-describedby', 'description', 'element')\n   * dialog.setAttribute('role', 'dialog')\n   *\n   * <dialog\n   *   data-fluco-dialog=\"myDialog\"\n   *   role=\"dialog\"\n   *   aria-labeledby=\"myDialog-title\"\n   *   aria-describedby=\"myDialog-description\"\n   * >\n   *   <div id=\"myDialog-title\"></div>\n   *   <div id=\"myDialog-description\"></div>\n   *   <div id=\"myDialog-content\"></div>\n   * </dialog>\n   */\n  setAttribute(key, value, target) {\n    target\n      ? this.data?.[target]?.setAttribute(key, `${this.data.id}-${value}`)\n      : this.data?.element?.setAttribute(key, value)\n\n    return this\n  }\n\n  /**\n   * @method #emit\n   * @param {string} eventName - The event name\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#emit('opening')\n   * @private\n   * @description Emit a dialog event\n   */\n  #emit(eventName) {\n    window.dispatchEvent(new Event(`fluco:modal:${this.data.id}:${eventName}`))\n\n    return this\n  }\n\n  /**\n   * @method #open\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#open()\n   * @private\n   * @description Open the dialog; Within the theme editor, if a setting is\n   * changed related to the dialog, theme editor will create a new dialog\n   * element which will match the data-fluco-dialog attribute of the original\n   * but is not reference equal. In this situation, this method queries the\n   * document for the named element and reapplies the open method.\n   *\n   * we should probably deregister the old dialog and swap in the new one\n   */\n  #open() {\n    if (document.body.contains(this.data.element)) {\n      this.data.element[this.#config.openMethod]()\n    } else {\n      const newDialog = document.querySelector(\n        `[data-fluco-dialog='${this.data.element.dataset.flucoDialog}']`,\n      )\n\n      newDialog[this.#config.openMethod]()\n      this.#deregisterDialog(this.data.element)\n      this.#registerDialog(newDialog)\n    }\n\n    return this\n  }\n\n  /**\n   * @method #close\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#close()\n   * @private\n   * @description Close the dialog\n   */\n  #close() {\n    this.data.element.close()\n\n    return this\n  }\n\n  /**\n   * @method #blurDismiss\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#blurDismiss()\n   * @private\n   * @description Close the dialog on blur\n   */\n  #blurDismiss() {\n    if (this.#config.blurDismiss) {\n      window.addEventListener(\"resize\", this.close.bind(this), { once: true })\n    }\n\n    return this\n  }\n\n  /**\n   * @method #setDynamicContent\n   * @param {Object} detail - The dialog data from custom event detail\n   * @param {string} detail.title - The dialog title\n   * @param {string} detail.description - The dialog description\n   * @param {string} detail.content - The dialog content\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#setDynamicContent({ title: 'My Dialog', description: 'My Dialog Description', content: 'My Dialog Content' })\n   * @private\n   * @description Set the dialog dynamic content\n   */\n  #setDynamicContent(detail) {\n    if (this.#config.reusable && detail) {\n      this.title = detail.title\n      this.description = detail.description\n      this.content = detail.content\n    }\n\n    return this\n  }\n\n  /**\n   * @method #callback\n   * @param {Function} callbackFunction - The callback function\n   * @returns {Dialog} The dialog instance\n   * @example\n   * this.#callback((dialog) => console.log(dialog))\n   * @private\n   * @description Call a callback function\n   */\n  #callback(callbackFunction) {\n    if (typeof callbackFunction === \"function\") {\n      callbackFunction(this)\n    }\n\n    return this\n  }\n\n  #handleCloseButtonClick(event) {\n    event.preventDefault()\n    this.close()\n  }\n\n  #registerDialog(element) {\n    this.data.element = element\n    window.flu.dialogs[element.dataset.flucoDialog] = [this.data.element, this]\n  }\n\n  #deregisterDialog(element) {\n    delete window.flu.dialogs[element.dataset.flucoDialog]\n    this.data.element = null\n  }\n}\n\n/**\n * @function dialog\n * @param {HTMLElement} element - The dialog element\n * @returns {Dialog} The dialog instance\n * @example\n *\n * When using the Dialog Factory, the dialog is automatically\n * initialized with configuration from the data-attributes:\n *\n * - data-fluco-dialog - The dialog id (required) should be unique\n * - data-fluco-dialog-close-button - adds a close button to the dialog\n * - data-fluco-dialog-backdrop - enables the dialog backdrop\n * - data-fluco-dialog-backdrop-dismiss - enables closing the dialog on backdrop click\n * - data-fluco-dialog-blur-dismiss - enables closing the dialog on blur\n * - data-fluco-dialog-scroll-lock - locks the page scroll when the dialog is open\n * - data-fluco-dialog-mobile-scroll-lock - locks the page scroll when the dialog is open on mobile + tablet\n * - data-fluco-dialog-reusable - enables reusing the dialog, clears content on close\n *\n * <dialog\n *   class=\"modal\"\n *   data-fluco-dialog=myModal\n *   data-fluco-dialog-close-button=true\n *   data-fluco-dialog-backdrop=true\n *   data-fluco-dialog-backdrop-dismiss=true\n *   data-fluco-dialog-blur-dismiss=false\n *   data-fluco-dialog-scroll-lock=true\n *   data-fluco-dialog-mobile-scroll-lock=false\n *   data-fluco-dialog-reusable=true\n * >\n *   <div>\n *     <h2 js-title>Title</h2>\n *     <p js-description>Description</p>\n *     <div js-content>\n *       <p>Some content</p>\n *       <p>Some more content</p>\n *     </div>\n *    </div>\n *  </dialog>\n *\n * dialog(element)\n */\nexport function dialog(element) {\n  const dialog = new Dialog(element)\n\n  for (let [key, value] of Object.entries(element.dataset)) {\n    value = value === \"true\"\n\n    switch (key) {\n      case \"flucoDialogBackdrop\":\n        dialog.setModal(value)\n        break\n      case \"flucoDialogBackdropDismiss\":\n        dialog.setBackdropDismiss(value)\n        dialog.setModal(value)\n        break\n      case \"flucoDialogBlurDismiss\":\n        dialog.setBlurDismiss(value)\n        break\n      case \"flucoDialogReusable\":\n        dialog.setReusable(value)\n        break\n    }\n  }\n\n  dialog\n    .setAttribute(\"id\", \"title\", \"title\")\n    .setAttribute(\"id\", \"description\", \"description\")\n    .setAttribute(\"role\", \"dialog\")\n\n  return dialog\n}\n","export default function debounce() {\n  let timer\n\n  return function (func, time = 100) {\n    if (timer) clearTimeout(timer)\n    timer = setTimeout(func, time)\n  }\n}\n","/**\n *\n * @param {*} querySize Fill in the blank to complete the custom property '--js-{{ querySize }}'.\n * Options maintained within breakpoint.css\n * @returns complete custom property to set breakpoint changes.\n */\nexport default function getMediaQuery(querySize) {\n  const value = getComputedStyle(document.documentElement).getPropertyValue(\n    `--js-${querySize}`,\n  )\n\n  if (!value) {\n    console.warn(\"Invalid querySize passed to getMediaQuery\")\n    return false\n  }\n\n  return value\n}\n","import srraf from \"srraf\"\nimport Debounce from \"@/utils/debounce.js\"\nimport getMediaQuery from \"../lib/media-queries.js\"\nimport EVENTS from \"../lib/events.js\"\nconst debounce = Debounce()\n\nclass NavigationWrapper extends HTMLElement {\n  selectors = {\n    // Shared\n    nav: \".navigation\",\n    submenu: \".submenu\",\n    submenuContainer: \".submenu__container\",\n    submenuList: \".submenu__list\",\n    submenuItem: \".submenu__item\",\n    stateClasses: \".is-open, .is-opening, .is-closing, .active\",\n    submenuInner: \".submenu__inner\",\n\n    // Drawer\n    drawerToggle: \"label[for=navigation-control]\",\n    drawerToggleInput: \".navigation__control-input\",\n    drawerCloseLabel: \".navigation__control-close\",\n    secondaryDrawerToggle: \".submenu__list-control\",\n    secondaryDrawerToggleHeader: \".submenu-header__control\",\n    toggles: \".submenu__list-control-input\",\n    backdrop: \".navigation__backdrop\",\n    primary: \".submenu--primary\",\n    primaryInner: \".submenu__inner--primary\",\n    childAnimationTarget: \".submenu__header .submenu-header__control--back\",\n\n    // Dropdown\n    secondaryDropdown: \".submenu--secondary\",\n    tertiaryDropdown: \".submenu--tertiary\",\n    primaryDropdownItem: \".submenu__item--primary-submenu\",\n    secondaryDropdownItem: \".submenu__item--secondary-submenu\",\n\n    // Megamenu\n    megamenu: \".submenu--mega\",\n    promoImage: \"[js-manual-load-animation]\",\n    themeEditorSelected: \".is-theme-editor-selected\",\n\n    // Crossborder\n    language: \"[js-language-drawer-trigger]\",\n    country: \"[js-country-drawer-trigger]\",\n\n    scrollSentinels: \"[data-scroll-start], [data-scroll-end]\",\n  }\n\n  classes = {\n    drawer: \"navigation--drawer\",\n    drawerBreakpoint: \"drawer-breakpoint\",\n    dropdownBreakpoint: \"dropdown-breakpoint\",\n\n    openDrawer: \"trigger-open-drawer-animation\",\n    closeDrawer: \"trigger-close-drawer-animation\",\n    openDrawerPanel: \"trigger-open-drawer-panel-animation\",\n    closeDrawerPanel: \"trigger-close-drawer-panel-animation\",\n\n    openDropdown: \"trigger-open-dropdown-animation\",\n    closeDropdown: \"trigger-close-dropdown-animation\",\n\n    dropdownOpensLeft: \"tertiary-menu--opens-left\",\n\n    // state classes\n    open: \"is-open\",\n    opening: \"is-opening\",\n    closing: \"is-closing\",\n    active: \"active\",\n\n    // Image visible class, normally done in image.liquid\n    imageVisible: \"visible\",\n\n    // Theme editor class\n    themeEditorSelected: \"is-theme-editor-selected\",\n  }\n\n  handleThemeEditorBlockEvent(evt) {\n    const menu = this.nav.querySelector(\n      `[data-block-id=\"${evt.detail.blockId}\"]`,\n    )\n    if (!menu) return\n\n    this.#closeOpenMenus()\n\n    if (evt.type === EVENTS.SHOPIFY_BLOCK_SELECT) {\n      menu.classList.add(this.classes.open, this.classes.themeEditorSelected)\n      menu.closest(\"li\").classList.add(this.classes.active)\n      menu.querySelectorAll(this.selectors.promoImage).forEach((el) => {\n        el.classList.add(this.classes.imageVisible)\n      })\n    } else {\n      menu.classList.remove(\"is-open\", this.classes.themeEditorSelected)\n      menu.closest(\"li\").classList.remove(this.classes.active)\n      menu.querySelectorAll(this.selectors.promoImage).forEach((el) => {\n        el.classList.remove(this.classes.imageVisible)\n      })\n    }\n  }\n\n  connectedCallback() {\n    this.eventController = new AbortController()\n    const eventOptions = { signal: this.eventController.signal }\n\n    document.addEventListener(\n      EVENTS.SHOPIFY_SECTION_LOAD,\n      (event) => {\n        if (event?.detail?.sectionId === sectionId) {\n          this.disconnectedCallback()\n          this.connectedCallback()\n        }\n      },\n      eventOptions,\n    )\n\n    if (window.Shopify.designMode) {\n      ;[EVENTS.SHOPIFY_BLOCK_SELECT, EVENTS.SHOPIFY_BLOCK_DESELECT].forEach(\n        (event) => {\n          this.addEventListener(\n            event,\n            this.handleThemeEditorBlockEvent,\n            eventOptions,\n          )\n        },\n      )\n    }\n\n    this.nav = document.querySelector(this.selectors.nav)\n    const nav = this.nav\n    const sectionId = nav\n      .closest(\".shopify-section\")\n      .getAttribute(\"id\")\n      .replace(\"shopify-section-\", \"\")\n\n    // Megamenu promotion animate in offset\n    this.promoVisibleTimingOffset = getComputedStyle(\n      document.documentElement,\n    ).getPropertyValue(\"--animation-timing-300\")\n\n    // warning! this is a hack to ensure\n    // the menus have been fully painted before they are measured.\n    setTimeout(() => {\n      // Setup initial state\n      this.#determineLayoutBreakpoint()\n      this.#setLayoutClasses()\n      this.#setEachSubmenuOpenHeight()\n      this.#setMegamenuPosition()\n      this.#setTertiaryDropdownOpeningDirection()\n    }, 100)\n\n    this.widthWatcher = srraf(({ vw, pvw, vh, pvh }) => {\n      if (vw !== pvw || vh !== pvh) {\n        debounce(() => {\n          this.#closeOpenMenus()\n          this.#determineLayoutBreakpoint()\n          this.#setLayoutClasses()\n          this.#setEachSubmenuOpenHeight()\n          this.#setMegamenuPosition()\n          this.#setTertiaryDropdownOpeningDirection()\n        }, 100)\n      }\n    })\n\n    const languageTrigger = nav.querySelector(this.selectors.language)\n    if (languageTrigger) {\n      languageTrigger.addEventListener(\n        \"click\",\n        () => {\n          window.dispatchEvent(\n            new CustomEvent(\n              EVENTS.MODAL_MOBILE_CROSSBORDER_LANGUAGE_DRAWER_OPEN,\n            ),\n          )\n        },\n        eventOptions,\n      )\n    }\n\n    const countryTrigger = nav.querySelector(this.selectors.country)\n    if (countryTrigger) {\n      countryTrigger.addEventListener(\n        \"click\",\n        () => {\n          window.dispatchEvent(\n            new CustomEvent(\n              EVENTS.MODAL_MOBILE_CROSSBORDER_COUNTRY_DRAWER_OPEN,\n            ),\n          )\n        },\n        eventOptions,\n      )\n    }\n\n    // Tap/Click toggles for drawer\n    const drawerToggles = nav.querySelectorAll(\n      `${this.selectors.drawerToggle}, ${this.selectors.backdrop}`,\n    )\n    drawerToggles.forEach((el) => {\n      el.addEventListener(\n        \"click\",\n        this.handleDrawerToggleClick.bind(this),\n        eventOptions,\n      )\n    })\n\n    this.drawerCloseLabel = nav.querySelector(this.selectors.drawerCloseLabel)\n    this.drawerCloseLabel.addEventListener(\n      \"keydown\",\n      this.handleDrawerCloseKeydown.bind(this),\n      eventOptions,\n    )\n\n    this.drawerToggleInput = nav.querySelector(this.selectors.drawerToggleInput)\n    this.drawerToggleInput.addEventListener(\n      \"keydown\",\n      this.handleDrawerToggleInputKeydown.bind(this),\n      eventOptions,\n    )\n\n    const secondaryDrawerToggles = nav.querySelectorAll(`\n      ${this.selectors.secondaryDrawerToggle},\n      ${this.selectors.secondaryDrawerToggleHeader}\n    `)\n    secondaryDrawerToggles.forEach((toggle) => {\n      toggle.addEventListener(\n        \"click\",\n        this.handleSecondaryDrawerToggleClick.bind(this),\n        eventOptions,\n      )\n    })\n\n    // Hover Dropdowns for primary submenus\n    const dropdownTargets = nav.querySelectorAll(`\n      ${this.selectors.primaryDropdownItem},\n      ${this.selectors.secondaryDropdownItem}\n    `)\n    dropdownTargets.forEach((target) => {\n      target.addEventListener(\n        \"mouseenter\",\n        this.handleDropdownMouseEvent.bind(this, \"mouseenter\"),\n        eventOptions,\n      )\n\n      target.addEventListener(\n        \"mouseleave\",\n        this.handleDropdownMouseEvent.bind(this, \"mouseleave\"),\n        eventOptions,\n      )\n\n      target.addEventListener(\n        \"touchstart\",\n        this.handleDropdownTouchEvent.bind(this),\n        eventOptions,\n      )\n    })\n\n    // scroll sentinels\n    const submenuInners = nav.querySelectorAll(this.selectors.submenuInner)\n    for (const root of submenuInners) {\n      const scrollSentinels = root.querySelectorAll(\n        this.selectors.scrollSentinels,\n      )\n\n      const observer = new IntersectionObserver(this.handleIntersectionChange, {\n        root,\n      })\n\n      scrollSentinels.forEach((entry) => observer.observe(entry))\n    }\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n    this.widthWatcher?.destroy()\n  }\n\n  handleIntersectionChange(entries) {\n    entries.forEach((entry) => {\n      entry.target.setAttribute(\n        \"data-visible\",\n        entry.isIntersecting ||\n          (entry.target.hasAttribute(\"data-scroll-start\") &&\n            entry.target.parentNode.scrollTop === 0),\n      )\n    })\n  }\n\n  // Event Handlers\n  // -------------------------------------\n\n  handleDrawerToggleClick(event) {\n    // We need the input to be \"enabled\", so that it can be focused (ie. reached\n    // via tabbing). Because of this, we need to prevent the click from checking\n    // the checkbox because we handle the associated functionality here in JS.\n    event?.preventDefault()\n\n    const { open, opening } = this.classes\n    const target = this.nav.querySelector(this.selectors.primary)\n\n    if (target.classList.contains(open) || target.classList.contains(opening)) {\n      this.drawerClosePrimary()\n    } else {\n      this.drawerOpenPrimary()\n    }\n  }\n\n  // Because we need the drawer toggle input to be enabled, we also need to prevent\n  // the default keyboard interaction (pressing \"space\" interacts with a checkbox), and\n  // allow for hitting \"Enter\" instead.\n  handleDrawerToggleInputKeydown(event) {\n    if (event.key === \" \") {\n      event.preventDefault()\n    } else if (event.key === \"Enter\") {\n      this.handleDrawerToggleClick()\n    }\n  }\n\n  handleDrawerCloseKeydown(event) {\n    if (event.key === \"Enter\") {\n      this.drawerClosePrimary()\n    }\n  }\n\n  handleSecondaryDrawerToggleClick(event) {\n    const { open } = this.classes\n    let target\n\n    // Could be open/back or close button\n    const submenuItem = event.target.closest(this.selectors.submenuItem)\n    if (!submenuItem) {\n      target = event.target.closest(this.selectors.submenu)\n    } else {\n      target = submenuItem.querySelector(this.selectors.submenu)\n    }\n\n    if (target.classList.contains(open)) {\n      this.drawerCloseSecondary(target)\n    } else {\n      this.drawerOpenSecondary(target)\n    }\n  }\n\n  handleDropdownMouseEvent(eventDirection, event) {\n    if (\n      window.Shopify.designMode &&\n      event.target.querySelector(this.selectors.themeEditorSelected)\n    ) {\n      return\n    }\n\n    if (this.isDrawer) return\n    if (event.target.closest(this.selectors.megamenu)) return\n\n    if (eventDirection === \"mouseleave\") {\n      this.closeDropdown(event.target)\n    } else {\n      this.openDropdown(event.target)\n    }\n  }\n\n  handleDropdownTouchEvent(event) {\n    if (this.isDrawer) return\n\n    if (event.target.classList.contains(\"submenu__item--parent\")) {\n      // Chrome: touchstart clicks the nearest anchor\n      event.preventDefault()\n\n      this.handleDropdownMouseEvent(\"mouseenter\", event)\n    } else {\n      let target = event.target\n\n      // a parent item's span will be the target on the second touch\n      if (target.tagName === \"SPAN\") {\n        target = target.closest(\".submenu__item\")\n      }\n\n      target.querySelector(\"a\").click()\n    }\n  }\n\n  // Drawer\n  // -------------------------------------\n\n  drawerOpenPrimary() {\n    const { openDrawer, opening, open, closing } = this.classes\n    const targetElements = [\n      this.nav.querySelector(this.selectors.primary),\n      this.nav.querySelector(this.selectors.backdrop),\n    ]\n\n    targetElements.forEach((target) => {\n      target.classList.add(openDrawer, opening)\n    })\n\n    const animatingElements = targetElements.flatMap((el) =>\n      el.getAnimations({ subtree: true }),\n    )\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n\n    Promise.all(pendingAnimationEnds)\n      .then(() => {\n        targetElements.forEach((target) => {\n          target.classList.remove(openDrawer, opening)\n          target.classList.add(open)\n        })\n\n        this.drawerCloseLabel.focus()\n      })\n      .catch(() => {\n        // Manually cleanup state and classes if an animation is interrupted\n        // by closing before open\n        targetElements.forEach((target) => {\n          target.classList.remove(openDrawer, opening)\n          target.classList.remove(openDrawer, open)\n          target.classList.add(closing)\n        })\n      })\n  }\n\n  drawerClosePrimary() {\n    const { closeDrawer, closing, open } = this.classes\n    const targetElements = [\n      this.nav.querySelector(this.selectors.primary),\n      this.nav.querySelector(this.selectors.backdrop),\n    ]\n\n    targetElements.forEach((target) => {\n      target.classList.add(closeDrawer, closing)\n    })\n\n    const animatingElements = targetElements.flatMap((el) =>\n      el.getAnimations({ subtree: true }),\n    )\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n\n    Promise.all(pendingAnimationEnds).then(() => {\n      targetElements.forEach((target) => {\n        target.classList.remove(closeDrawer, closing, open)\n      })\n\n      this.drawerToggleInput.focus()\n    })\n  }\n\n  drawerOpenSecondary(target) {\n    const { openDrawerPanel, opening, open } = this.classes\n\n    target.classList.add(openDrawerPanel, opening)\n\n    const animatingElements = target.getAnimations({ subtree: true })\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n\n    const promos = target.querySelectorAll(this.selectors.promoImage)\n    promos.forEach((el) => el.classList.add(this.classes.imageVisible))\n\n    Promise.all(pendingAnimationEnds).then(() => {\n      target.classList.remove(openDrawerPanel, opening)\n      target.classList.add(open)\n    })\n  }\n\n  drawerCloseSecondary(target) {\n    const {\n      active,\n      openDrawerPanel,\n      closeDrawerPanel,\n      closing,\n      open,\n      opening,\n    } = this.classes\n\n    target.classList.add(closeDrawerPanel, closing)\n\n    const animatingElements = target.getAnimations({ subtree: true })\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n    Promise.all(pendingAnimationEnds)\n      .then(() => {\n        target.classList.remove(closeDrawerPanel, closing, open, active)\n        this.#closeOpenMenus()\n      })\n      .catch(() => {\n        // Manually cleanup state and classes if an animation is interrupted\n        this.nav.querySelectorAll(this.selectors.stateClasses).forEach((el) => {\n          el.classList.remove(\n            open,\n            opening,\n            closing,\n            openDrawerPanel,\n            closeDrawerPanel,\n            active,\n          )\n        })\n      })\n  }\n\n  // Dropdown\n  // -------------------------------------\n\n  openDropdown(target) {\n    const { closeDropdown, openDropdown, closing, opening, open } = this.classes\n    const submenuTarget = target.querySelector(this.selectors.submenu)\n\n    // remove opening animation if retriggering\n    submenuTarget.classList.remove(closeDropdown, closing)\n    submenuTarget.classList.add(openDropdown, opening)\n\n    const animatingElements = submenuTarget.getAnimations({ subtree: true })\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n\n    const promos = target.querySelectorAll(this.selectors.promoImage)\n    // Delay the promo image animation to allow the dropdown to open a bit before\n    // starting the loaded/visible animation.\n    setTimeout(() => {\n      promos.forEach((el) => el.classList.add(\"visible\"))\n    }, this.promoVisibleTimingOffset)\n\n    Promise.all(pendingAnimationEnds)\n      .then(() => {\n        submenuTarget.classList.remove(openDropdown, opening)\n        submenuTarget.classList.add(open)\n      })\n      .catch(() => {\n        // Manually cleanup attributes and classes if an animation is interrupted\n        submenuTarget.classList.remove(openDropdown, opening, open)\n      })\n  }\n\n  closeDropdown(target) {\n    const { openDropdown, closeDropdown, opening, open, closing } = this.classes\n    const submenuTarget = target.querySelector(this.selectors.submenu)\n\n    // remove opening animation if retriggering\n    submenuTarget.classList.remove(openDropdown, opening, open)\n    submenuTarget.classList.add(closeDropdown, closing)\n\n    const animatingElements = submenuTarget.getAnimations({ subtree: true })\n    const pendingAnimationEnds = animatingElements.map(\n      (animation) => animation.finished,\n    )\n    Promise.all(pendingAnimationEnds)\n      .then(() => {\n        submenuTarget.classList.remove(closeDropdown, closing, open)\n      })\n      .catch(() => {\n        // Manually cleanup attributes and classes if an animation is interrupted\n        submenuTarget.classList.remove(closeDropdown, closing, open)\n      })\n  }\n\n  // Private\n  // -------------------------------------\n\n  #determineLayoutBreakpoint() {\n    // regex matches a floating number from the media query string\n    const breakpointRegex = /([0-9.]+)/g\n\n    const breakpoint = parseFloat(\n      getMediaQuery(\"small-desktop\").match(breakpointRegex)[0],\n    )\n\n    return (this.breakpoint = breakpoint)\n  }\n\n  #setEachSubmenuOpenHeight() {\n    const submenus = this.nav.querySelectorAll(this.selectors.submenu)\n    submenus.forEach((el) => this.#setOpenHeightProp(el))\n  }\n\n  #setLayoutClasses() {\n    const nav = this.nav\n\n    nav.querySelectorAll(this.selectors.stateClasses).forEach((el) => {\n      el.classList.remove(\n        this.classes.open,\n        this.classes.opening,\n        this.classes.closing,\n      )\n    })\n\n    if (nav.classList.contains(this.classes.drawer)) {\n      this.isDrawer = true\n      return nav.classList.add(this.classes.drawerBreakpoint)\n    }\n\n    const isDrawer = (this.isDrawer = window.innerWidth < this.breakpoint)\n\n    nav.classList.toggle(this.classes.drawerBreakpoint, isDrawer)\n    nav.classList.toggle(this.classes.dropdownBreakpoint, !isDrawer)\n  }\n\n  #setOpenHeightProp(el) {\n    const inner = el.querySelector(this.selectors.submenuInner)\n    if (!inner) return\n\n    el.style.removeProperty(\"--js-max-height\")\n    inner.style.maxHeight = \"\"\n\n    // only set the height if the window is large enough for dropdowns\n    if (window.innerWidth < this.breakpoint || this.isDrawer) return\n\n    const { top } = el.getBoundingClientRect()\n    const screenHeightLimit = window.innerHeight - top - 35\n\n    const menuHeight = el.querySelector(\n      this.selectors.submenuContainer,\n    )?.offsetHeight\n    if (!menuHeight) return\n\n    const maxHeight = Math.min(screenHeightLimit, menuHeight)\n\n    el.style.setProperty(\"--js-max-height\", `${maxHeight}px`)\n    inner.style.maxHeight = `${maxHeight}px`\n  }\n\n  #setMegamenuPosition() {\n    // mega menus are positioned to the left edge of the screen\n    // this needs to be calculated as an offset from the left edge of the nav\n    // when the window is resized, the calculation is run again, but\n    // the existing offset will be taken into account by `getBoundingClientRect`\n    // this needs to be compensated for by storing it on the element.\n\n    if (!this.megamenus) {\n      this.megamenus = this.nav.querySelectorAll(this.selectors.megamenu)\n    }\n\n    this.megamenus.forEach((nav) => {\n      nav.style.removeProperty(\"--js-left\", \"0px\")\n      nav.removeAttribute(\"data-left\")\n\n      const currentLeft = Number(nav.getAttribute(\"data-left\")) || 0\n      // Left from client doesn't account for horizontal scrolling which is needed\n      // to prevent the nav going wider than the screen\n      const scrollAccountedLeft =\n        nav.getBoundingClientRect().left + window.scrollX\n      const newLeft = scrollAccountedLeft + currentLeft\n\n      nav.style.setProperty(\"--js-left\", `${Math.abs(newLeft)}px`)\n      nav.setAttribute(\"data-left\", newLeft)\n    })\n  }\n\n  #setTertiaryDropdownOpeningDirection() {\n    // Default is to open the right if space permits,\n    // otherwise it opens to the left to prevent expanding the site width\n    const dropdowns = this.querySelectorAll(this.selectors.secondaryDropdown)\n    const submenuWidth = parseInt(\n      getComputedStyle(document.documentElement)\n        .getPropertyValue(\"--submenu-width\")\n        .replace(\"px\", \"\"),\n      10,\n    )\n\n    dropdowns.forEach((dropdown) => {\n      // The secondary menu never moves making it more stable for screen size changes\n      const tertiaryRightPlacement =\n        dropdown.getBoundingClientRect().right + submenuWidth\n      const tertiaryMenuTooFarRight = tertiaryRightPlacement > window.innerWidth\n      const tertiaries = dropdown.querySelectorAll(\n        this.selectors.tertiaryDropdown,\n      )\n\n      tertiaries.forEach((tertiary) => {\n        tertiary.classList.toggle(\n          this.classes.dropdownOpensLeft,\n          tertiaryMenuTooFarRight,\n        )\n      })\n    })\n  }\n\n  #closeOpenMenus(parent = this.nav) {\n    document.querySelectorAll(this.selectors.toggles).forEach((el) => {\n      el.checked = false\n    })\n  }\n}\n\nif (!customElements.get(\"navigation-wrapper\")) {\n  customElements.define(\"navigation-wrapper\", NavigationWrapper)\n}\n","import EVENTS from \"@/lib/events.js\"\n\nconst routes = window.theme.routes.cart || {}\n\nconst paths = {\n  base: `${routes.base || \"/cart\"}.js`,\n  add: `${routes.add || \"/cart/add\"}.js`,\n  change: `${routes.change || \"/cart/change\"}.js`,\n  update: `${routes.update || \"/cart/update\"}.js`,\n}\n\nconst actions = {\n  addItem: \"add_item\",\n  removeItem: \"remove_item\",\n  changeItemQuantity: \"change_item_quantity\",\n  noteChange: \"note_change\",\n}\n\nconst contexts = {\n  productPage: \"product_page\",\n  productItem: \"product_item\",\n  cartDrawer: \"cart_drawer\",\n  crossSells: \"cross_sells\",\n}\n\n/**\n * Fetches the current cart object.\n *\n * @returns {Promise<Object>} The promise resolves with the cart data as an object.\n */\nfunction get() {\n  return fetch(paths.base, {\n    method: \"GET\",\n    credentials: \"include\",\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      return data\n    })\n}\n\n/**\n * Adds a single item to the cart, based on an HTML product form.\n *\n * @param {HTMLElement} form - The HTML form being submitted.\n * @param {string} [context] - The area of the theme that is adding the item. Should be one of contexts.\n * @param {HTMLElement} target - The parent element that's trying to add the item.\n */\nfunction addItemByForm(form, context, target) {\n  const formData = new FormData(form)\n\n  return fetch(paths.add, {\n    method: \"POST\",\n    headers: {\n      \"X-Requested-With\": \"XMLHttpRequest\",\n    },\n    body: formData,\n  })\n    .then((response) => response.json())\n    .then(async (data) => {\n      if (data.status === 422) {\n        const errorContent = {\n          errors: data.errors,\n          message: data.message,\n          description: data.description,\n        }\n\n        _handleError(errorContent, actions.addItem, {\n          context,\n          target,\n        })\n      } else {\n        // For some reason the add endpoint only returns the added item,\n        // not the whole cart like other endpoints. We can fetch the cart and\n        // insert items_added\n        const cartData = await get()\n        const combinedCartData = {\n          ...cartData,\n          items_added: data.items,\n        }\n\n        _emitEvent(actions.addItem, combinedCartData, {\n          context,\n          target,\n        })\n      }\n    })\n}\n\n/**\n * Adds a given quantity of a given variant to the cart.\n *\n * @param {number} variantId - The variant ID of the variant to be added to the cart.\n * @param {number} quantity - The quanity to be added.\n * @param {string} [context] - The context where the change happened, one of contexts.\n * @param {HTMLElement} [target] - The parent element that's trying to add the item.\n */\nfunction addItemById(variantId, quantity, context, target) {\n  const fetchData = {\n    items: [\n      {\n        id: variantId,\n        quantity,\n      },\n    ],\n  }\n\n  return fetch(paths.add, {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(fetchData),\n  })\n    .then((response) => response.json())\n    .then(async (data) => {\n      // TODO: what about other errors? (Shopify platform errors?)\n      if (data.status === 422) {\n        _handleError(data.description, actions.addItem, {\n          context,\n          target,\n          itemKeyOrId: variantId,\n        })\n      } else {\n        // For some reason the add endpoint only returns the added item,\n        // not the whole cart like other endpoints. We can fetch the cart and\n        // insert items_added\n        const cartData = await get()\n        const combinedCartData = {\n          ...cartData,\n          items_added: data.items,\n        }\n\n        _emitEvent(actions.addItem, combinedCartData, {\n          context,\n          target,\n        })\n      }\n    })\n}\n\n/**\n * Updates the quantity of a given cart item.\n *\n * @param {HTMLElement} target - The parent element that's trying to change the item.\n * @param {string|number} id - The item's variant ID or line item key.\n * @param {number} quantity - The new quantity for the item.\n * @param {string} context - The context where the change happened, one of contexts\n */\nfunction changeItemQuantity(target, id, quantity, context) {\n  const fetchData = {\n    id,\n    quantity,\n  }\n\n  return fetch(paths.change, {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(fetchData),\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      // TODO: what about other errors? (Shopify platform errors?)\n      if (data.status === 422) {\n        _handleError(data.description, actions.changeItemQuantity, {\n          context,\n          target,\n          itemKeyOrId: id,\n        })\n      } else {\n        _emitEvent(actions.changeItemQuantity, data, {\n          context,\n          target,\n        })\n      }\n    })\n}\n/**\n * Updates the cart note\n *\n * @param {HTMLElement} target - The parent element that's trying to update the note.\n * @param {string} note - The cart note.\n\n */\nfunction updateNote(target, note) {\n  const fetchData = {\n    note,\n  }\n  return fetch(paths.update, {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(fetchData),\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      if (!data.note) {\n        // throw new Error(\"Error updating cart note\")\n        _handleError(data.description, actions.noteChange, {\n          context: null,\n          target,\n        })\n      } else {\n        _emitEvent(actions.noteChange, data)\n      }\n    })\n}\n\n/**\n * Emits events based on the source action and optional context.\n *\n * @param {string} action - The action made. Should be one of actions.\n * @param {Object} cartData - The cart object that reflects the action's change.\n * @param {Object} [options] - The options object.\n * @param {HTMLElement} [options.target] - The element to emit the event onto. Defaults to the document.\n * @param {HTMLElement} [options.context] - The context that originated the action. Should be one of contexts.\n */\nfunction _emitEvent(action, cartData, options = {}) {\n  const target = options.target || document\n\n  const eventOptions = {\n    detail: {\n      cartData,\n    },\n    bubbles: true,\n  }\n\n  if (action === actions.addItem) {\n    // We need this general \"Cart item added\" event to open the cart drawer, however\n    // we want to delay that until after success display has shown\n    setTimeout(() => {\n      target.dispatchEvent(\n        new CustomEvent(EVENTS.CART_ITEM_ADDED, eventOptions),\n      )\n    }, 1000)\n\n    // If the event originated at the product item, trigger a quick add success as well\n    if (options.context === contexts.productItem) {\n      target.dispatchEvent(\n        new CustomEvent(EVENTS.QUICK_ADD_SUCCESS, eventOptions),\n      )\n    } else if (options.context === contexts.productPage) {\n      target.dispatchEvent(\n        new CustomEvent(EVENTS.PRODUCT_ADD_SUCCESS, eventOptions),\n      )\n    }\n  } else if (action === actions.removeItem) {\n    target.dispatchEvent(\n      new CustomEvent(EVENTS.CART_ITEM_REMOVED, eventOptions),\n    )\n  } else if (action === actions.changeItemQuantity) {\n    target.dispatchEvent(\n      new CustomEvent(EVENTS.CART_ITEM_CHANGED, eventOptions),\n    )\n  } else if (action === actions.noteChange) {\n    target.dispatchEvent(\n      new CustomEvent(EVENTS.CART_NOTE_CHANGED, eventOptions),\n    )\n  }\n\n  // Trigger a general cart change event on the document\n  document.dispatchEvent(new CustomEvent(EVENTS.CART_CHANGED, eventOptions))\n}\n\n/**\n * Handles emitting error events for given a cart function.\n *\n * @param {string} errorMessage - The error message.\n * @param {string} source - The name of the cart function that triggered the error.\n * @param {HTMLElement} target - The parent element that called the above cart function.\n * @param {string|number} [itemKeyOrId] - The key or ID of the item being referenced.\n */\nfunction _handleError(errorMessage, action, options = {}) {\n  switch (action) {\n    case actions.addItem: {\n      if (options.context === contexts.productPage) {\n        options.target.dispatchEvent(\n          new CustomEvent(EVENTS.PRODUCT_ADD_ERROR, {\n            detail: {\n              errorMessage,\n            },\n          }),\n        )\n      } else if (options.context === contexts.productItem) {\n        options.target.dispatchEvent(\n          new CustomEvent(EVENTS.QUICK_ADD_ERROR, {\n            detail: {\n              cartItemKeyOrId: options.itemKeyOrId,\n              errorMessage,\n            },\n          }),\n        )\n      }\n\n      break\n    }\n\n    case actions.changeItemQuantity: {\n      options.target.dispatchEvent(\n        new CustomEvent(EVENTS.CART_ITEM_CHANGE_ERROR, {\n          detail: {\n            cartItemKeyOrId: options.itemKeyOrId,\n            errorMessage,\n          },\n        }),\n      )\n      break\n    }\n\n    case actions.noteChange: {\n      options.target.dispatchEvent(\n        new CustomEvent(EVENTS.CART_NOTE_CHANGED_ERROR, {\n          detail: {\n            errorMessage,\n          },\n        }),\n      )\n      break\n    }\n  }\n\n  document.dispatchEvent(\n    new CustomEvent(EVENTS.CART_ERROR, {\n      detail: { errorMessage },\n    }),\n  )\n}\n\nexport {\n  get,\n  addItemByForm,\n  addItemById,\n  changeItemQuantity,\n  updateNote,\n  actions,\n  contexts,\n}\n","import EVENTS from \"../lib/events.js\"\nimport srraf from \"srraf\"\n\nclass HeaderGroup {\n  #previousImpactLogoVisibility = false\n\n  constructor() {\n    // keep running srraf after it passes the bottom of the impact logo by this amount\n    this.overscrollThreshold = 100\n\n    this.selectors = {\n      announcementBar: \"announcement-bar\",\n      header: \"header-wrapper\",\n      impactLogo: \"impact-logo\",\n    }\n\n    this.init()\n  }\n\n  init() {\n    // setup the event handling for it all\n    this.announcementBar = document.querySelector(\n      this.selectors.announcementBar,\n    )\n    this.header = document.querySelector(this.selectors.header)\n    this.impactLogo = document.querySelector(this.selectors.impactLogo)\n\n    // if we don't have a header, we don't need to do anything\n    if (!this.header) return\n    // if impact logo isn't present, we stick the header immediately\n    if (!this.impactLogo) {\n      this.header.setAttribute(\"data-reveal-logo\", true)\n    }\n\n    // Theme Editor: sectionIds to watch changes\n    const ids = [\n      this.header.dataset.sectionId,\n      this.announcementBar?.dataset.sectionId,\n      this.impactLogo?.dataset.sectionId,\n    ]\n      .filter(Boolean)\n      .map((id) => id.replace(\"shopify-section-\", \"\"))\n\n    this.controller = new AbortController()\n    const eventOptions = { signal: this.controller.signal }\n\n    // Theme Editor: watch for section load events\n    document.addEventListener(\n      EVENTS.SHOPIFY_SECTION_LOAD,\n      (event) => {\n        this.controller.abort()\n        this.watcher?.destroy()\n        this.init()\n      },\n      eventOptions,\n    )\n\n    document.addEventListener(\n      EVENTS.SHOPIFY_SECTION_UNLOAD,\n      (event) => {\n        if (event?.detail?.sectionId && ids.includes(event.detail.sectionId)) {\n          this.controller.abort()\n          this.watcher?.destroy()\n          setTimeout(() => {\n            this.init()\n          }, 100)\n        }\n      },\n      eventOptions,\n    )\n\n    this.announcementBarBox = this.announcementBar?.getBoundingClientRect()\n    this.headerBox = this.header?.getBoundingClientRect()\n    this.impactLogoBox = this.impactLogo?.getBoundingClientRect()\n\n    // We need to update the *Box bottom values with the window scrollY on load\n    this.announcementBarBoxBottom =\n      window.scrollY + (this.announcementBarBox?.bottom || 0)\n    this.headerBoxBottom = window.scrollY + (this.headerBox?.bottom || 0)\n    this.impactLogoBoxBottom =\n      window.scrollY + (this.impactLogoBox?.bottom || 0)\n\n    this.instantSticky = this.header.dataset.stickyHeaderStyle === \"instant\"\n\n    const maxHeightToWatch = this.impactLogoBoxbottom + this.overscrollThreshold\n    this.watcher = srraf(({ y, py }) => {\n      if (maxHeightToWatch < y) return\n      if (y === py) return\n\n      this.#handleScroll(y)\n    })\n    this.#handleScroll(window.scrollY)\n  }\n\n  #handleScroll(y) {\n    if (this.instantSticky) {\n      const stuckHeaderHeight =\n        this.headerBox.height + (this.announcementBarBox?.height || 0)\n      // Set visibilities of the components\n      this.announcementBar?.setAttribute(\n        \"data-is-visible\",\n        y < this.announcementBarBoxBottom,\n      )\n      this.header?.setAttribute(\"data-is-visible\", y < this.headerBoxBottom)\n      this.impactLogo?.setAttribute(\n        \"data-is-visible\",\n        y < this.impactLogoBoxBottom - stuckHeaderHeight,\n      )\n\n      if (y > 0) {\n        this.header.setAttribute(\"data-is-sticky\", true)\n\n        // Impact logo visibility change\n        if (\n          this.impactLogo &&\n          this.impactLogo.getAttribute(\"data-is-visible\") !==\n            this.#previousImpactLogoVisibility\n        ) {\n          this.#previousImpactLogoVisibility =\n            this.impactLogo.getAttribute(\"data-is-visible\")\n\n          const revealLogo = y > this.impactLogoBoxBottom - stuckHeaderHeight\n          this.header.setAttribute(\"data-reveal-logo\", revealLogo)\n        } else {\n          this.header.setAttribute(\"data-is-sticky\", true)\n        }\n      } else {\n        this.header.setAttribute(\"data-is-sticky\", false)\n      }\n    } else {\n      // Set visibilities of the components\n\n      if (this.announcementBar) {\n        this.announcementBar.setAttribute(\n          \"data-is-visible\",\n          y < this.announcementBarBoxBottom,\n        )\n\n        // if it's a delayed sticky, we set the translateY to an inverse of the height of the header\n        // then when the impact logo is out of view, we can transition the translateY to 0\n        if (y > this.announcementBarBoxBottom) {\n          this.announcementBar.parentNode.style.setProperty(\n            \"--announcement-bar-translate-y\",\n            `-${this.headerBox.height}px`,\n          )\n        } else {\n          this.announcementBar.parentNode.style.setProperty(\n            \"--announcement-bar-translate-y\",\n            0,\n          )\n        }\n      }\n\n      if (this.header) {\n        this.header?.setAttribute(\"data-is-visible\", y < this.headerBoxBottom)\n\n        // if it's a delayed sticky, we set the translateY to an inverse of the height of the header\n        // then when the impact logo is out of view, we can transition the translateY to 0\n        if (y > this.headerBoxBottom) {\n          this.header.parentNode.style.setProperty(\n            \"--header-translate-y\",\n            `-${this.headerBox.height}px`,\n          )\n          this.header.setAttribute(\"data-reveal-logo\", true)\n        } else {\n          if (!this.impactLogo) {\n            this.header.setAttribute(\"data-is-sticky\", y > 0)\n            this.header.setAttribute(\"data-reveal-logo\", true)\n          } else {\n            this.header.setAttribute(\"data-reveal-logo\", false)\n          }\n\n          this.header.parentNode.style.setProperty(\"--header-translate-y\", 0)\n        }\n      }\n\n      if (this.impactLogo) {\n        this.impactLogo.setAttribute(\n          \"data-is-visible\",\n          y < this.impactLogoBoxBottom,\n        )\n\n        if (\n          this.impactLogo?.getAttribute(\"data-is-visible\") !==\n          this.#previousImpactLogoVisibility\n        ) {\n          this.#previousImpactLogoVisibility =\n            this.impactLogo?.getAttribute(\"data-is-visible\")\n\n          if (y > this.impactLogoBoxBottom) {\n            this.header.setAttribute(\"data-is-sticky\", true)\n          } else {\n            this.header.setAttribute(\"data-is-sticky\", false)\n          }\n        }\n      }\n    }\n  }\n}\n\nwindow.addEventListener(\"DOMContentLoaded\", () => new HeaderGroup())\n","import srraf from \"srraf\"\nimport getMediaQuery from \"../lib/media-queries.js\"\nimport debounce from \"@/utils/debounce.js\"\nimport EVENTS from \"../lib/events.js\"\n\nconst {\n  ANNOUNCEMENT_HEIGHT_UPDATED,\n  SHOPIFY_BLOCK_SELECT,\n  SHOPIFY_BLOCK_DESELECT,\n} = EVENTS\n\n// regex matches a floating number from the media query string\nconst breakpointRegex = /([0-9.]+)/g\n\nclass AnnouncementBar extends HTMLElement {\n  static observedAttributes = [\"data-style\"]\n\n  constructor() {\n    super()\n\n    this.debounce = debounce()\n\n    this.selectors = {\n      announcementSlider: \"announcement-slider\",\n    }\n  }\n\n  connectedCallback() {\n    this.eventController = new AbortController()\n    const eventOptions = { signal: this.eventController.signal }\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_SELECT,\n      (e) => this.handleBlockSelected(e.detail.blockId),\n      eventOptions,\n    )\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_DESELECT,\n      () => this.handleBlockDeselected(),\n      eventOptions,\n    )\n\n    this.setHeightVariable()\n    this.stickIfNecessary()\n    this.widthWatcher = srraf(({ vw, pvw }) => {\n      if (vw === pvw) return\n      this.debounce(() => {\n        this.setHeightVariable()\n        this.stickIfNecessary()\n      })\n    })\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n    this.widthWatcher?.destroy()\n  }\n\n  attributeChangedCallback(name, _oldValue, newValue) {\n    // if announcement style is changed to slideshow, track it\n    if (name === \"data-style\") {\n      if (newValue === \"slideshow\") {\n        this.sliderComponent = this.querySelector(\n          this.selectors.announcementSlider,\n        )\n      } else {\n        this.sliderComponent = null\n      }\n    }\n  }\n\n  stickIfNecessary() {\n    const stickyCondition = this.dataset.enableStickyAnnouncementBar\n    if (stickyCondition === \"never\") return\n\n    const setSticky = (bool) => this.toggleAttribute(\"data-sticky\", bool)\n    const breakpoint = parseFloat(\n      getMediaQuery(\"mobile\").match(breakpointRegex)[0],\n    )\n\n    switch (stickyCondition) {\n      case \"desktop-and-mobile\":\n        setSticky(true)\n        break\n      case \"desktop\":\n        setSticky(window.innerWidth >= breakpoint)\n        break\n      case \"mobile\":\n        setSticky(window.innerWidth < breakpoint)\n        break\n    }\n  }\n\n  /**\n   * Pauses the slider and changes to the selected block's slide.\n   * @param {String} blockId - The block ID for the selected block.\n   */\n  handleBlockSelected(blockId) {\n    this.setSliderAutoplay(\"false\")\n    this.setSliderActiveBlock(blockId)\n  }\n\n  /**\n   * Resumes the slider and resets the selected block.\n   */\n  handleBlockDeselected() {\n    this.setSliderAutoplay(\"true\")\n    this.setSliderActiveBlock(\"\")\n  }\n\n  /**\n   * Sets the slider's autoplay attribute value.\n   * @param {String} value - The autoplay state, as either \"true\" or \"false\".\n   */\n  setSliderAutoplay(value) {\n    if (this.sliderComponent) {\n      this.sliderComponent.dataset.autoplay = value\n    }\n  }\n\n  /**\n   * Sets the slider's active block id.\n   * @param {String} blockId - The block ID for the selected block.\n   */\n  setSliderActiveBlock(blockId) {\n    if (this.sliderComponent) {\n      this.sliderComponent.dataset.activeBlockId = blockId\n    }\n  }\n\n  /**\n   * Measures the announcement bar's height and applies that value to a document CSS variable.\n   */\n  setHeightVariable() {\n    // We have to use a high-resolution height value to avoid rounding errors\n    // this.offsetHeight rounds to 37px where getBoundingClientRect().height is 36.578125px\n    // this fixes the browser rendering a 1px gap between the announcement bar and the header\n    const height = this.getBoundingClientRect().height.toFixed(2)\n\n    if (height !== this.lastSetHeight) {\n      document.documentElement.style.setProperty(\n        \"--announcement-height\",\n        `${height}px`,\n      )\n      document.dispatchEvent(\n        new CustomEvent(ANNOUNCEMENT_HEIGHT_UPDATED, {\n          detail: { height },\n        }),\n      )\n      this.lastSetHeight = height\n    }\n  }\n}\n\nif (!customElements.get(\"announcement-bar\")) {\n  customElements.define(\"announcement-bar\", AnnouncementBar)\n}\n","class BlogPosts extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      sidebar: \"[js-sidebar]\",\n      sidebarImageWrapper: \"[js-image-wrapper]\",\n      sidebarLink: \"[js-sidebar-link]\",\n    }\n  }\n\n  connectedCallback() {\n    this.sidebar = this.querySelector(this.selectors.sidebar)\n\n    if (this.sidebar === null) return\n\n    this.sidebarImageWrapper = this.sidebar.querySelectorAll(\n      this.selectors.sidebarImageWrapper,\n    )\n\n    this.eventController = new AbortController()\n    const eventOptions = { signal: this.eventController.signal }\n\n    this.sidebar.addEventListener(\"mouseleave\", () => {\n      this.sidebar.dataset.cursorWithin = false\n    })\n\n    this.sidebarImageWrapper.forEach((wrapper) => {\n      const parentMetaEl = wrapper.parentElement\n      const sidebarImage = parentMetaEl.querySelector(\"img\")\n      const hoverTrigger = parentMetaEl.querySelector(\n        this.selectors.sidebarLink,\n      )\n\n      hoverTrigger.addEventListener(\n        \"mouseenter\",\n        () => {\n          setTimeout(() => {\n            this.sidebar.dataset.cursorWithin = true\n          }, 240) // give the mouse-in animation some time\n        },\n        eventOptions,\n      )\n\n      hoverTrigger.addEventListener(\n        \"mousemove\",\n        (e) => {\n          sidebarImage.style.left = `${\n            e.clientX - e.target.getBoundingClientRect().left\n          }px`\n        },\n        eventOptions,\n      )\n    })\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n  }\n}\n\nif (!customElements.get(\"blog-posts\")) {\n  customElements.define(\"blog-posts\", BlogPosts)\n}\n","import srraf from \"srraf\"\nimport EVENTS from \"../lib/events.js\"\n\nconst {\n  CART_DRAWER_OPEN,\n  PREDICTIVE_SEARCH_DRAWER_OPEN,\n  HEADER_HEIGHT_UPDATED,\n  SHOPIFY_BLOCK_SELECT,\n  SHOPIFY_BLOCK_DESELECT,\n} = EVENTS\n\nclass HeaderWrapper extends HTMLElement {\n  static observedAttributes = [\"data-is-sticky\"]\n\n  constructor() {\n    super()\n\n    this.selectors = {\n      showCartDrawerButton: \"[data-action='show-cart-drawer']\",\n      showPredictiveSearchDrawerButton:\n        \"[data-action='show-predictive-search-drawer']\",\n    }\n  }\n\n  connectedCallback() {\n    this.eventController = new AbortController()\n    this.eventController2 = new AbortController()\n\n    const eventOptions = { signal: this.eventController.signal }\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_SELECT,\n      (e) => this.handleBlockSelected(e.detail.blockId),\n      eventOptions,\n    )\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_DESELECT,\n      () => this.handleBlockDeselected(),\n      eventOptions,\n    )\n\n    this.setHeightVariable()\n    this.widthWatcher = srraf(({ vw, pvw }) => {\n      if (vw === pvw) return\n      this.setHeightVariable()\n    })\n\n    // Cart Drawer button\n    this.querySelectorAll(this.selectors.showCartDrawerButton).forEach(\n      (element) => {\n        element.addEventListener(\"click\", (event) => {\n          event.preventDefault()\n          window.dispatchEvent(new Event(CART_DRAWER_OPEN))\n        })\n      },\n    )\n\n    // Search button\n    this.querySelectorAll(\n      this.selectors.showPredictiveSearchDrawerButton,\n    ).forEach((element) => {\n      element.addEventListener(\"click\", (event) => {\n        event.preventDefault()\n        window.dispatchEvent(new Event(PREDICTIVE_SEARCH_DRAWER_OPEN))\n      })\n    })\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n    this.eventController2.abort()\n    this.widthWatcher?.destroy()\n  }\n\n  attributeChangedCallback(name, _oldValue, _newValue) {\n    if (name === \"data-is-sticky\") {\n      this.setHeightVariable()\n    }\n  }\n\n  handleBlockSelected() {}\n\n  handleBlockDeselected() {}\n\n  /**\n   * Measures the header's height and applies that value to a document CSS variable.\n   * The header uses the `-internal` custom property to position itself out of the viewport\n   * until it has become stuck.\n   *\n   * the public `--header-height` is available to see the headers height when stuck.\n   */\n  setHeightVariable() {\n    if (this.offsetHeight !== this.lastSetHeight) {\n      document.documentElement.style.setProperty(\n        \"--header-height-internal\",\n        `${this.offsetHeight}px`,\n      )\n\n      document.addEventListener(\n        \"visibilitychange\",\n        () => {\n          if (document.visibilityState === \"hidden\") {\n            // eslint-disable-next-line no-undef , no-process-env\n            navigator?.sendBeacon(process.env.FLU_PING_ENDPOINT, Shopify.shop)\n            this.eventController2.abort()\n          }\n        },\n        { signal: this.eventController2.signal },\n      )\n\n      document.dispatchEvent(\n        new CustomEvent(HEADER_HEIGHT_UPDATED, {\n          detail: { height: this.offsetHeight },\n        }),\n      )\n      this.lastSetHeight = this.offsetHeight\n    }\n\n    // Header height var set to 0 when it's sticky but isn't stuck, or isn't sticky\n    if (\n      this.dataset.isSticky === \"false\" ||\n      this.dataset.enableStickyHeader === \"false\"\n    ) {\n      document.documentElement.style.setProperty(\"--header-height\", \"0px\")\n      return\n    }\n\n    // Header is stuck, make the internal height the public height\n    if (this.dataset.enableStickyHeader === \"true\") {\n      document.documentElement.style.setProperty(\n        \"--header-height\",\n        `${this.offsetHeight}px`,\n      )\n    }\n  }\n}\n\nif (!customElements.get(\"header-wrapper\")) {\n  customElements.define(\"header-wrapper\", HeaderWrapper)\n}\n","import EVENTS from \"../lib/events.js\"\nimport { dialog } from \"@/lib/modals.js\"\n\nconst {\n  MODAL_POPUP_OPEN,\n  MODAL_POPUP_CLOSE,\n  SHOPIFY_BLOCK_SELECT,\n  SHOPIFY_BLOCK_DESELECT,\n  SHOPIFY_SECTION_LOAD,\n} = EVENTS\n\nclass PopupsSection extends HTMLElement {\n  constructor() {\n    super()\n\n    this.classes = { visible: \"visible\" }\n\n    this.selectors = { tab: (id) => `[js-popup-tab][data-id=\"${id}\"]` }\n  }\n\n  connectedCallback() {\n    this.eventController = new AbortController()\n\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_SELECT,\n      (e) => {\n        this.#handleBlockSelected(e)\n      },\n      {\n        signal: this.eventController.signal,\n      },\n    )\n    this.parentElement.addEventListener(\n      SHOPIFY_BLOCK_DESELECT,\n      (e) => {\n        this.#handleBlockDeselected(e)\n      },\n      {\n        signal: this.eventController.signal,\n      },\n    )\n    this.parentElement.addEventListener(\n      SHOPIFY_SECTION_LOAD,\n      () => {\n        this.#handleSectionLoad()\n      },\n      {\n        signal: this.eventController.signal,\n      },\n    )\n  }\n\n  disconnectedCallback() {\n    this.eventController.abort()\n  }\n\n  #handleBlockSelected(e) {\n    const blockId = e.detail.blockId\n    const selectedTab = e.target.querySelector(this.selectors.tab(blockId))\n\n    window.dispatchEvent(new CustomEvent(MODAL_POPUP_OPEN(blockId)))\n    selectedTab?.classList.add(this.classes.visible)\n  }\n\n  #handleBlockDeselected(e) {\n    const blockId = e.detail.blockId\n    window.dispatchEvent(new CustomEvent(MODAL_POPUP_CLOSE(blockId)))\n  }\n\n  #handleSectionLoad() {\n    // we need to refresh the modal registry when a block as added/removed\n    // TODO: make this a feature that's native to modal.js?\n\n    for (const entry in window.flu.dialogs) {\n      window.flu.dialogs[entry][1].destroy({ dom: false })\n    }\n\n    window.flu.dialogs = {}\n\n    document\n      .querySelectorAll(\"dialog[data-fluco-dialog]\")\n      .forEach((el) => dialog(el))\n  }\n}\n\nif (!customElements.get(\"popups-section\")) {\n  customElements.define(\"popups-section\", PopupsSection)\n}\n","import srraf from \"srraf\"\n\nconst atBreakpointChange = (breakpointToWatch, callback) => {\n  const _screenUnderBP = () => {\n    const viewportWidth =\n      window.innerWidth || document.documentElement.clientWidth\n\n    return viewportWidth <= breakpointToWatch\n  }\n\n  let screenUnderBP = _screenUnderBP()\n\n  const widthWatcher = srraf(({ vw }) => {\n    const currentScreenWidthUnderBP = vw <= breakpointToWatch\n\n    if (currentScreenWidthUnderBP !== screenUnderBP) {\n      screenUnderBP = currentScreenWidthUnderBP\n      return callback()\n    }\n  })\n\n  const unload = () => {\n    widthWatcher.destroy()\n  }\n\n  return { unload }\n}\n\nexport default atBreakpointChange\n","import getMediaQuery from \"./media-queries.js\"\n\n/**\n * Sets IO that adds 'became-visible' class, mainly for animations with additional control via callback.\n * @param {HTMLElement} node - Element to watch.\n * @param {Object} options - Options object\n * @param {boolean} options.instantThreshold - View sensitivity before triggering IO's callback.\n * @param {*} options.callback - Will track 'visible' boolean and will not disconnect until destroy() called.\n */\nexport default (\n  node,\n  options = { instantThreshold: false, callback: false },\n) => {\n  let threshold = 0\n\n  if (!options.instantThreshold) {\n    const margin = window.matchMedia(getMediaQuery(\"tablet\")).matches\n      ? 200\n      : 100\n    threshold = Math.min(margin / node.offsetHeight, 0.5)\n  }\n\n  const observer = new IntersectionObserver(\n    ([{ isIntersecting: visible }]) => {\n      if (options.callback) {\n        options.callback(visible)\n      } else {\n        if (visible) {\n          node.classList.add(\"became-visible\")\n          observer.disconnect()\n        }\n      }\n    },\n    { threshold },\n  )\n\n  observer.observe(node)\n\n  return {\n    destroy() {\n      observer?.disconnect()\n    },\n  }\n}\n","// Originally sourced from https://stackoverflow.com/a/11196395\nclass PauseableInterval {\n  constructor(callback, delay) {\n    this.callback = callback\n    this.delay = delay\n    this.pausedTimeLeft = 0\n    this.timerIsPaused = false\n    this.timerHasPaused = false\n    this.triggerSetAt = new Date().getTime()\n    this.timer = setInterval(this.callback, this.delay)\n  }\n\n  reset() {\n    this.#clearTimer()\n\n    this.pausedTimeLeft = 0\n    this.timerIsPaused = false\n    this.timerHasPaused = false\n    this.triggerSetAt = new Date().getTime()\n\n    this.timer = setInterval(this.callback, this.delay)\n  }\n\n  #getTimeLeft() {\n    const now = new Date()\n    const timeLeft = this.timerHasPaused ? this.pausedTimeLeft : this.delay\n\n    // Once a timer has been paused the remaining amount of time left\n    // needs to be calculated from the paused time left.\n    return timeLeft - ((now - this.triggerSetAt) % this.delay)\n  }\n\n  pause() {\n    this.pausedTimeLeft = this.#getTimeLeft()\n    this.timerIsPaused = true\n    this.timerHasPaused = true\n    this.#clearTimer()\n  }\n\n  resume() {\n    // A new trigger is set based on unpaused. PauseTimeLeft is used\n    // as the setTimeout timer.\n    this.triggerSetAt = new Date().getTime()\n\n    this.timer = setTimeout(() => {\n      this.callback()\n      this.reset()\n    }, this.pausedTimeLeft)\n  }\n\n  #clearTimer() {\n    if (this.timer) {\n      clearInterval(this.timer)\n      this.timer = null\n    }\n  }\n\n  isPaused() {\n    return this.timerIsPaused\n  }\n}\n\nexport default PauseableInterval\n","import atBreakpointChange from \"../lib/at-breakpoint-change.js\"\nimport EVENTS from \"../lib/events.js\"\nimport getMediaQuery from \"../lib/media-queries.js\"\nimport intersectionWatcher from \"@/lib/intersection-watcher.js\"\nimport PauseableInterval from \"../lib/pauseable-interval.js\"\nimport srraf from \"srraf\"\n\nconst { SHOPIFY_BLOCK_SELECT, SHOPIFY_BLOCK_DESELECT } = EVENTS\n\nclass SlideshowSection extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      cursor: \"[js-slideshow-cursor]\",\n      loadingOverlay: \"[js-slideshow-loading-overlay]\",\n      pagination: \"[js-slideshow-pagination]\",\n      paginationBullet: \"[js-slideshow-pagination-bullet]\",\n      paginationNav: \"[js-slideshow-pagination-nav]\",\n      parentSection: \".shopify-section\",\n      slide: \"[js-slideshow-slide]\",\n      slideByBlockId: (id) => `[data-block-id=\"${id}\"]`,\n      slideImageDesktop: \"[js-slideshow-desktop-slide-image]\",\n      slideImageMobile: \"[js-slideshow-mobile-slide-image]\",\n      slideContent: \"[js-slideshow-slide-content]\",\n      slideshow: \"[js-slideshow]\",\n      slideshowPause: \"[js-slideshow-pause]\",\n      videoContainer: \"[js-current-background-video-container]\",\n      videoPlaceholderImage:\n        \"[js-background-video-placeholder] .placeholder-image\",\n      videoPauseButton: \"[js-video-pause-button]\",\n      videoSlide: \"[js-slideshow-video-slide]\",\n    }\n\n    this.classes = {\n      active: \"active\",\n      currentSlide: \"current-slide\",\n      loaded: \"loaded\",\n      nextSlide: \"next-slide\",\n      prevCursor: \"slideshow__cursor--prev\",\n      nextCursor: \"slideshow__cursor--next\",\n      slideTransitionOut: \"slide-transition-out\",\n      visible: \"visible\",\n    }\n\n    this.breakpoints = {\n      mobile: getMediaQuery(\"mobile\"),\n      smallDesktop: getMediaQuery(\"small-desktop\"),\n    }\n\n    this.strings = window.theme.strings\n  }\n\n  connectedCallback() {\n    intersectionWatcher(this)\n    this.slideshow = this.querySelector(this.selectors.slideshow)\n    this.loadingOverlay = this.querySelector(this.selectors.loadingOverlay)\n    this.slides = this.querySelectorAll(this.selectors.slide)\n    this.slideList = Array.from(this.slides)\n    this.currentSlide = this.loadingOverlay\n    this.firstSlideIndex = \"0\"\n    this.lastSlideIndex = `${this.slides.length - 1}`\n    this.firstIndexOnLoad = \"0\"\n    this.controller = new AbortController()\n\n    const eventOptions = { signal: this.controller.signal }\n\n    // Pagination\n    this.paginationBullets = this.querySelectorAll(\n      this.selectors.paginationBullet,\n    )\n    this.paginationBullets.forEach((bullet) => {\n      bullet.addEventListener(\n        \"click\",\n        this.handlePaginationBulletClick.bind(this),\n        eventOptions,\n      )\n    })\n\n    this.initLoadingOverlay()\n\n    // Watch for small-desktop breakpoint to handle cursor and nav button functionality\n    if (this.slides.length > 1) {\n      atBreakpointChange(1024, this.handleWindowResize.bind(this))\n      this.handleWindowResize()\n    }\n\n    // Block events\n    if (window.Shopify.designMode) {\n      this.parentSection = this.closest(this.selectors.parentSection)\n      this.parentSection.addEventListener(\n        SHOPIFY_BLOCK_SELECT,\n        this.handleSlideSelect.bind(this),\n        eventOptions,\n      )\n      this.parentSection.addEventListener(\n        SHOPIFY_BLOCK_DESELECT,\n        this.handleSlideDeselect.bind(this),\n        eventOptions,\n      )\n    }\n  }\n\n  initLoadingOverlay() {\n    // Check whether first slide is a video or image\n    if (this.slides[0].matches(this.selectors.videoSlide)) {\n      const firstSlideVideoContainer = this.slides[0].querySelector(\n        this.selectors.videoContainer,\n      )\n\n      if (firstSlideVideoContainer) {\n        if (firstSlideVideoContainer.children.length > 0) {\n          this.hideLoadingOverlay()\n        } else {\n          const videoSlideObserver = new MutationObserver(\n            (mutations, observer) => {\n              for (const mutation of mutations) {\n                if (mutation.target.children.length > 0) {\n                  this.hideLoadingOverlay()\n                  observer.disconnect()\n                }\n              }\n            },\n          )\n\n          videoSlideObserver.observe(firstSlideVideoContainer, {\n            childList: true,\n          })\n        }\n      } else {\n        const firstSlidePlaceholderImage = this.slides[0].querySelector(\n          this.selectors.videoPlaceholderImage,\n        )\n\n        if (\n          firstSlidePlaceholderImage.classList.contains(this.classes.visible)\n        ) {\n          this.hideLoadingOverlay()\n        } else {\n          const videoSlideObserver = this.createClassMutationObserver(\n            this.hideLoadingOverlay.bind(this),\n          )\n\n          videoSlideObserver.observe(firstSlidePlaceholderImage, {\n            attributeFilter: [\"class\"],\n          })\n        }\n      }\n    } else {\n      let firstSlideImage = this.slides[0].querySelector(\n        this.selectors.slideImageDesktop,\n      )\n\n      if (window.matchMedia(this.breakpoints.mobile).matches) {\n        const firstSlideMobileImage = this.slides[0].querySelector(\n          this.selectors.slideImageMobile,\n        )\n        if (firstSlideMobileImage) {\n          firstSlideImage = firstSlideMobileImage\n        }\n      }\n\n      if (firstSlideImage.classList.contains(this.classes.visible)) {\n        this.hideLoadingOverlay()\n      } else {\n        const imageSlideObserver = this.createClassMutationObserver(\n          this.hideLoadingOverlay.bind(this),\n        )\n\n        imageSlideObserver.observe(firstSlideImage, {\n          attributeFilter: [\"class\"],\n        })\n      }\n    }\n  }\n\n  createClassMutationObserver(callback) {\n    return new MutationObserver((mutations, observer) => {\n      for (const mutation of mutations) {\n        if (mutation.target.classList.contains(this.classes.visible)) {\n          callback()\n          observer.disconnect()\n        }\n      }\n    })\n  }\n\n  hideLoadingOverlay() {\n    this.changeSlide(this.firstIndexOnLoad)\n    this.classList.add(this.classes.loaded)\n\n    if (\n      this.slides.length > 1 &&\n      this.getAttribute(\"data-enable-autoplay\") === \"true\"\n    ) {\n      this.initAutoplay()\n    }\n  }\n\n  handlePaginationBulletClick(event) {\n    this.changeSlide(event.currentTarget.getAttribute(\"data-slide-index\"))\n  }\n\n  handleWindowResize() {\n    if (window.matchMedia(this.breakpoints.smallDesktop).matches) {\n      this.mobileController?.abort()\n      this.initCursor()\n    } else {\n      this.cursorController?.abort()\n      this.widthWatcher?.destroy()\n      this.mobileController = new AbortController()\n      this.initSwipeNav()\n      this.initPaginationNav()\n    }\n  }\n\n  initCursor() {\n    this.cursor = this.querySelector(this.selectors.cursor)\n    this.cursorController = new AbortController()\n    this.midpoint = this.offsetWidth / 2\n    const cursorEventOptions = { signal: this.cursorController.signal }\n\n    // Track the \"midpoint\" of the slider so the cursor can update for prev/next\n    this.widthWatcher = srraf(({ vw, pvw }) => {\n      if (vw === pvw) return\n      this.midpoint = this.offsetWidth / 2\n    })\n\n    this.slideshow.addEventListener(\n      \"mouseenter\",\n      this.showCursor.bind(this),\n      cursorEventOptions,\n    )\n\n    this.slideshow.addEventListener(\n      \"mousemove\",\n      this.updateCursorPosition.bind(this),\n      cursorEventOptions,\n    )\n\n    this.slideshow.addEventListener(\n      \"mouseleave\",\n      this.hideCursor.bind(this),\n      cursorEventOptions,\n    )\n\n    // Track mouse enter/leave of interactive elements so that we can disable the custom cursor\n    this.pagination = this.querySelector(this.selectors.pagination)\n    this.slideContentElements = this.querySelectorAll(\n      this.selectors.slideContent,\n    )\n\n    this.interactiveElementSelectors = `${this.selectors.loadingOverlay}, ${this.selectors.pagination}, ${this.selectors.slideContent}, ${this.selectors.videoPauseButton}`\n    const interactiveElements = [this.loadingOverlay, this.pagination]\n    this.slideContentElements.forEach((slideContentElement) => {\n      interactiveElements.push(slideContentElement)\n    })\n\n    interactiveElements.forEach((element) => {\n      element.addEventListener(\n        \"mouseenter\",\n        this.hideCursor.bind(this),\n        cursorEventOptions,\n      )\n      element.addEventListener(\n        \"mouseleave\",\n        this.showCursor.bind(this),\n        cursorEventOptions,\n      )\n    })\n\n    // Handle clicks\n    this.slideshow.addEventListener(\n      \"click\",\n      this.handleSlideshowClick.bind(this),\n      cursorEventOptions,\n    )\n  }\n\n  showCursor() {\n    this.cursor.classList.add(this.classes.active)\n  }\n\n  updateCursorPosition(event) {\n    /*\n     * Update the cursor position\n     *\n     * We use pageX/pageY because offsetX/offsetY are thrown off by child\n     * elements, which means that offsetTop and paddingTop need to be\n     * accounted for.\n     *\n     * We also account for the size of the cursor element so that the element\n     * is centered on the actual cursor. The element is 54px wide/tall, so we\n     * subtract 27.\n     */\n    this.cursor.style.top = `${\n      event.pageY - 27 - this.offsetTop - this.getAttribute(\"data-padding-top\")\n    }px`\n    this.cursor.style.left = `${event.pageX - 27 - this.slideshow.offsetLeft}px`\n\n    // Update the cursor display (prev/next)\n    if (event.pageX <= this.midpoint) {\n      this.cursor.classList.add(this.classes.prevCursor)\n      this.cursor.classList.remove(this.classes.nextCursor)\n    } else {\n      this.cursor.classList.remove(this.classes.prevCursor)\n      this.cursor.classList.add(this.classes.nextCursor)\n    }\n  }\n\n  hideCursor() {\n    this.cursor.classList.remove(this.classes.active)\n  }\n\n  handleSlideshowClick(event) {\n    // If the click wasn't on an interactive element, change slides\n    if (!event.target.closest(this.interactiveElementSelectors)) {\n      const direction = this.cursor.classList.contains(this.classes.prevCursor)\n        ? \"prev\"\n        : \"next\"\n\n      // Not sure why we need this 40.5 (equivalent to 3/4 ofthe cursor width/height), but\n      // it aligns the radial gradient to the cursor\n      const irisOriginX =\n        ((event.offsetX + 40.5) / this.slideshow.offsetWidth) * 100.0\n      const irisOriginY =\n        ((event.offsetY + 40.5) / this.slideshow.offsetHeight) * 100.0\n      const irisOrigin = `${irisOriginX}% ${irisOriginY}%`\n\n      this.changeSlide(this.getNewSlideIndex(direction), irisOrigin)\n    }\n  }\n\n  initSwipeNav() {\n    this.slideshow.addEventListener(\n      \"pointerdown\",\n      this.handleSwipeStart.bind(this),\n      { signal: this.mobileController.signal },\n    )\n    this.slideshow.addEventListener(\n      \"pointerup\",\n      this.handleSwipeEnd.bind(this),\n      { signal: this.mobileController.signal },\n    )\n  }\n\n  handleSwipeStart(event) {\n    this.swipeStartX = event.offsetX\n    this.swipeStartY = event.offsetY\n  }\n\n  handleSwipeEnd(event) {\n    this.swipeEndX = event.offsetX\n    this.swipeEndY = event.offsetY\n\n    // For a swipe register, it can only deviate on the y-axis by 20px, and must be 15px, or more, on the x-axis\n    if (\n      Math.abs(this.swipeStartY - this.swipeEndY) <= 20 &&\n      Math.abs(this.swipeStartX - this.swipeEndX) >= 15\n    ) {\n      if (\n        this.swipeStartX > this.swipeEndX &&\n        this.swipeStartX - this.swipeEndX >= 15\n      ) {\n        this.changeSlide(this.getNewSlideIndex(\"next\"))\n      } else if (\n        this.swipeStartX < this.swipeEndX &&\n        this.swipeEndX - this.swipeStartX >= 15\n      ) {\n        this.changeSlide(this.getNewSlideIndex(\"prev\"))\n      }\n    }\n  }\n\n  initPaginationNav() {\n    this.paginationNavButtons = this.querySelectorAll(\n      this.selectors.paginationNav,\n    )\n\n    this.paginationNavButtons.forEach((button) => {\n      button.addEventListener(\n        \"click\",\n        this.handlePaginationNavClick.bind(this),\n        { signal: this.mobileController.signal },\n      )\n    })\n  }\n\n  handlePaginationNavClick(event) {\n    this.changeSlide(\n      this.getNewSlideIndex(event.currentTarget.getAttribute(\"data-direction\")),\n    )\n  }\n\n  initAutoplay() {\n    // Setting is in seconds, so we need to convert\n    this.timeBetweenSlides =\n      parseInt(this.getAttribute(\"data-time-between-slides\"), 10) * 1000\n    this.slideshowPause = this.querySelector(this.selectors.slideshowPause)\n\n    this.autoplay = new PauseableInterval(() => {\n      this.changeSlide(this.getNewSlideIndex(\"next\"))\n    }, this.timeBetweenSlides)\n\n    this.slideshowPause.addEventListener(\n      \"click\",\n      this.handlePauseClick.bind(this),\n      { signal: this.controller.signal },\n    )\n  }\n\n  handlePauseClick(event) {\n    if (this.getAttribute(\"data-paused\") === \"false\") {\n      this.setAttribute(\"data-paused\", \"true\")\n      event.currentTarget.setAttribute(\n        \"aria-label\",\n        this.strings.accessibility.carouselPlay,\n      )\n      this.autoplay.pause()\n    } else {\n      this.setAttribute(\"data-paused\", \"false\")\n      event.currentTarget.setAttribute(\n        \"aria-label\",\n        this.strings.accessibility.carouselPause,\n      )\n      this.autoplay.resume()\n    }\n  }\n\n  getNewSlideIndex(direction) {\n    let newSlideIndex\n\n    if (direction === \"prev\") {\n      if (\n        this.currentSlide.getAttribute(\"data-slide-index\") ===\n        this.firstSlideIndex\n      ) {\n        newSlideIndex = this.lastSlideIndex\n      } else {\n        newSlideIndex = `${parseInt(this.currentSlideIndex, 10) - 1}`\n      }\n    } else {\n      if (\n        this.currentSlide.getAttribute(\"data-slide-index\") ===\n        this.lastSlideIndex\n      ) {\n        newSlideIndex = this.firstSlideIndex\n      } else {\n        newSlideIndex = `${parseInt(this.currentSlideIndex, 10) + 1}`\n      }\n    }\n\n    return newSlideIndex\n  }\n\n  /**\n   * Changes the active slide to the given slide index.\n   *\n   * @param {string} index - The index of the slide that should become active. This is a string as the index is pulled from data\n   *                         attributes.\n   */\n  changeSlide(index, irisOrigin = \"50% 50%\") {\n    // If the next slide is the same as the current, don't change\n    if (index === this.currentSlideIndex) return\n\n    // Set the iris wipe origin\n    this.style.setProperty(\"--slide-iris-origin\", irisOrigin)\n\n    // Remove the transition class from any slides that currently have it\n    this.slideList.forEach((slide) => {\n      slide.classList.remove(this.classes.slideTransitionOut)\n    })\n\n    // Set new \"current\" slide and handle slide change transition\n    const currentSlide = this.currentSlide\n    const newSlide = this.slideList.find((slide) => {\n      return slide.getAttribute(\"data-slide-index\") === index\n    })\n\n    // If the current slide is a video slide, pause the video\n    // We timeout for the duration of the slide change so that you don't actually\n    //  see the pause\n    if (currentSlide.matches(this.selectors.videoSlide)) {\n      const video = currentSlide.querySelector(\"video\")\n\n      setTimeout(() => {\n        video?.pause()\n      }, 1400)\n    }\n\n    newSlide.classList.add(this.classes.currentSlide)\n    currentSlide.classList.add(this.classes.slideTransitionOut)\n    currentSlide.classList.remove(this.classes.currentSlide)\n    currentSlide.setAttribute(\"inert\", \"\")\n    this.currentSlide = newSlide\n    this.currentSlideIndex = index\n    this.currentSlide.removeAttribute(\"inert\")\n\n    if (newSlide.matches(this.selectors.videoSlide)) {\n      const video = newSlide.querySelector(\"video\")\n\n      // It's possible that we have a video slide with no video (no video has been selected yet)\n      video?.play()\n    }\n\n    this.paginationBullets.forEach((bullet) => {\n      if (bullet.getAttribute(\"data-slide-index\") === index) {\n        bullet.classList.add(this.classes.active)\n      } else {\n        bullet.classList.remove(this.classes.active)\n      }\n    })\n\n    if (this.autoplay?.isPaused()) {\n      this.autoplay.pausedTimeLeft = this.timeBetweenSlides\n    } else {\n      this.autoplay?.reset()\n    }\n  }\n\n  handleSlideSelect(event) {\n    const selectedSlide = this.querySelector(\n      this.selectors.slideByBlockId(event.detail.blockId),\n    )\n\n    if (event.detail.load) {\n      if (\n        this.slides.length > 1 &&\n        this.getAttribute(\"data-enable-autoplay\") === \"true\"\n      ) {\n        this.setAutoplay(\"pause\")\n      }\n\n      this.firstIndexOnLoad = selectedSlide.getAttribute(\"data-slide-index\")\n    } else if (this.currentSlide !== selectedSlide) {\n      if (\n        this.slides.length > 1 &&\n        this.getAttribute(\"data-enable-autoplay\") === \"true\"\n      ) {\n        this.setAutoplay(\"pause\")\n      }\n\n      this.changeSlide(selectedSlide.getAttribute(\"data-slide-index\"))\n    }\n  }\n\n  handleSlideDeselect() {\n    if (\n      this.slides.length > 1 &&\n      this.getAttribute(\"data-enable-autoplay\") === \"true\"\n    ) {\n      this.setAutoplay(\"resume\")\n    }\n  }\n\n  setAutoplay(state) {\n    if (state === \"pause\") {\n      this.autoplay.pause()\n      this.setAttribute(\"data-paused\", \"true\")\n      this.slideshowPause.setAttribute(\n        \"aria-label\",\n        this.strings.accessibility.carouselPlay,\n      )\n    } else {\n      this.autoplay.resume()\n      this.setAttribute(\"data-paused\", \"false\")\n      this.slideshowPause.setAttribute(\n        \"aria-label\",\n        this.strings.accessibility.carouselPause,\n      )\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n    this.cursorController?.abort()\n    this.mobileController?.abort()\n    this.widthWatcher?.destroy()\n    intersectionWatcher.destroy()\n  }\n}\n\nif (!customElements.get(\"slideshow-section\")) {\n  customElements.define(\"slideshow-section\", SlideshowSection)\n}\n","let loaded = null\n\nexport default function loadVimeoAPI() {\n  if (loaded !== null) return loaded\n\n  if (window.Vimeo && window.Vimeo.loaded) {\n    loaded = Promise.resolve()\n    return loaded\n  }\n\n  // Otherwise, load API\n  loaded = new Promise((resolve) => {\n    const tag = document.createElement(\"script\")\n    tag.src = \"https://player.vimeo.com/api/player.js\"\n    tag.onload = resolve\n    document.body.appendChild(tag)\n  })\n\n  return loaded\n}\n","let loaded = null\n\nexport default function loadYouTubeAPI() {\n  // Loading was triggered by a previous call to function\n  if (loaded !== null) return loaded\n\n  // API has already loaded\n  if (window.YT && window.YT.loaded) {\n    loaded = Promise.resolve()\n    return loaded\n  }\n\n  // Otherwise, load API\n  loaded = new Promise((resolve) => {\n    window.onYouTubeIframeAPIReady = () => {\n      resolve()\n    }\n    const tag = document.createElement(\"script\")\n    tag.src = \"https://www.youtube.com/iframe_api\"\n    document.body.appendChild(tag)\n  })\n\n  return loaded\n}\n","// Global arrays to track active players to more easily control.\nconst youTubePlayerArr = []\nconst vimeoPlayerArr = []\nconst internalPlayerArr = []\n\nconst addPlayerToTrackingArr = (source, player) => {\n  if (source === \"youtube\") {\n    youTubePlayerArr.push(player)\n  }\n\n  if (source === \"vimeo\") {\n    vimeoPlayerArr.push(player)\n  }\n\n  if (source === \"internal\") {\n    internalPlayerArr.push(player)\n  }\n}\n\n/**\n * If a video is played, any previously started video will pause\n * If a slide (scroll slider or media lightbox) changes, a playing video will pause\n */\nconst pausePlayingVideos = () => {\n  youTubePlayerArr.forEach((player) => {\n    player.pauseVideo()\n  })\n\n  vimeoPlayerArr.forEach((player) => {\n    player.pause()\n  })\n\n  internalPlayerArr.forEach((player) => {\n    player.pause()\n  })\n}\n\nconst clearPlayerTrackingArr = () => {\n  youTubePlayerArr.length = 0\n  vimeoPlayerArr.length = 0\n  internalPlayerArr.length = 0\n}\n\n/*\n  YouTube specific state control\n-------------------------------------------------------------------------- */\n/**\n * Use YouTube player functions to alter settigns and state if poster clicked\n * @param {HTMLIFrameElement} player result of YT.Player\n *\n */\nconst clickPosterToPlayYouTube = (player) => {\n  // Clicking the play button will play video with sound\n  // This should true for mobile, safari, and low power mode\n  if (!player) return\n\n  player.unMute()\n  player.playVideo()\n}\n\nconst onYouTubePlayerStateChange = (event) => {\n  // -1 is 'unstarted' likely due to API not being fully loaded\n  if (event.data === -1) {\n    event.target.mute()\n    event.target.playVideo()\n  }\n\n  youTubePlayerArr.forEach((player) => {\n    // Don't pause most recently played video, 1 = playing\n    if (player !== event.target && event.data === 1) {\n      player.pauseVideo()\n    }\n  })\n\n  vimeoPlayerArr.forEach((player) => {\n    player.pause()\n  })\n\n  internalPlayerArr.forEach((player) => {\n    player.pause()\n  })\n}\n\n/*\n  Vimeo specific state control\n-------------------------------------------------------------------------- */\n\n/**\n * Use Vimeo player functions to alter settings and state if poster clicked\n * @param {HTMLIFrameElement} player result of Vimeo.Player\n *\n */\nconst clickPosterToPlayVimeo = (player) => {\n  // Clicking play button will play video with sound\n  // except on mobile, which will be muted or requires click to play in low power mode\n  if (!player) return\n\n  player.getPaused().then(function (paused) {\n    if (paused) {\n      player.play()\n    } else {\n      player.setMuted(true)\n      player.play()\n    }\n  })\n}\n\nexport {\n  addPlayerToTrackingArr,\n  pausePlayingVideos,\n  onYouTubePlayerStateChange,\n  clickPosterToPlayVimeo,\n  clickPosterToPlayYouTube,\n  clearPlayerTrackingArr,\n}\n","import {\n  initYouTubeVideo,\n  initVimeoVideo,\n  updateIframeVimeoVideo,\n  updateIframeYouTubeVideo,\n} from \"./external-video-player.js\"\n\nimport {\n  addPlayerToTrackingArr,\n  pausePlayingVideos,\n} from \"./video-player-state.js\"\n\n/**\n * Create new YouTube and Vimeo videos. Initialize YouTube, Vimeo and Shopify videos when triggered.\n * @param {HTMLDivElement} node video container with data to structure triggers with video player created during initialization\n */\nconst liquidMadeVideoPlayer = (node) => {\n  const { showPoster, hasPoster } = node.dataset\n  const playButton = node.querySelector(\"[js-poster-play-button]\")\n\n  if (showPoster && hasPoster) {\n    playButton.addEventListener(\"click\", () => {\n      node.dataset.videoInitialized = \"true\"\n      _initLiquidMadeVideoPlayer(node, { hadPoster: true })\n    })\n\n    playButton.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\") {\n        node.dataset.videoInitialized = \"true\"\n        _initLiquidMadeVideoPlayer(node, { hadPoster: true })\n      }\n    })\n  } else {\n    _initLiquidMadeVideoPlayer(node, { hadPoster: false })\n  }\n}\n\nconst _initLiquidMadeVideoPlayer = (node, poster) => {\n  const internalVideo = node.querySelector(\"[data-video-internal]\")\n  const externalVideo = node.querySelector(\"[data-video-external]\")\n\n  if (externalVideo) {\n    const { videoProvider } = externalVideo.dataset\n\n    if (videoProvider === \"youtube\") {\n      initYouTubeVideo(externalVideo, poster.hadPoster)\n    } else if (videoProvider === \"vimeo\") {\n      initVimeoVideo(externalVideo, poster.hadPoster)\n    }\n  } else if (internalVideo && poster.hadPoster) {\n    pausePlayingVideos()\n    internalVideo.play()\n\n    // Delay adding player to arr to prevent pre-emptive pause\n    setTimeout(() => {\n      addPlayerToTrackingArr(\"internal\", internalVideo)\n    }, 100)\n  }\n}\n\n/**\n * When triggered, append and initialize prepared YouTube, Vimeo and Shopify videos.\n * @param {HTMLDivElement} videoContainer container with data to structure triggers and initialization\n * @param {HTMLElement} video iframe (YouTube & Vimeo) or video element (Shopify) to append\n */\nconst domMadeVideoPlayer = (videoContainer, video) => {\n  const { videoType, showPoster } = videoContainer.dataset\n\n  if (showPoster === \"true\") {\n    const playButton = videoContainer.querySelector(\"[js-poster-play-button]\")\n\n    playButton.addEventListener(\"click\", () => {\n      videoContainer.setAttribute(\"data-video-initialized\", \"true\")\n      videoContainer.appendChild(video)\n\n      _initDomMadeVideoPlayer(video, videoType, { hadPoster: true })\n    })\n\n    playButton.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\") {\n        videoContainer.setAttribute(\"data-video-initialized\", \"true\")\n        videoContainer.appendChild(video)\n\n        _initDomMadeVideoPlayer(video, videoType, { hadPoster: true })\n      }\n    })\n  } else {\n    videoContainer.appendChild(video)\n    _initDomMadeVideoPlayer(video, videoType, { hadPoster: false })\n  }\n}\n\nconst _initDomMadeVideoPlayer = (video, videoType, poster) => {\n  if (videoType === \"youtube\") {\n    updateIframeYouTubeVideo(video.id, poster.hadPoster)\n  } else if (videoType === \"vimeo\") {\n    updateIframeVimeoVideo(video, poster.hadPoster)\n  } else {\n    if (poster.hadPoster === true) {\n      // Only play Shopify video element if poster removed\n      pausePlayingVideos()\n      addPlayerToTrackingArr(\"internal\", video)\n      video.play()\n    }\n  }\n}\n\nexport { liquidMadeVideoPlayer, domMadeVideoPlayer }\n","import loadVimeoAPI from \"./load-vimeo-api.js\"\nimport loadYouTubeAPI from \"./load-youtube-api.js\"\nimport {\n  addPlayerToTrackingArr,\n  pausePlayingVideos,\n  onYouTubePlayerStateChange,\n  clickPosterToPlayVimeo,\n  clickPosterToPlayYouTube,\n} from \"./video-player-state.js\"\n\n/**\n * Create a YouTube video player directly from the API\n * @param {HTMLElement} video video player div that will be swapped out with iframe\n * @param {boolean} hadPoster dictate the presence of poster image over video\n */\nconst initYouTubeVideo = (video, hadPoster) => {\n  const videoId = video.dataset.videoId\n\n  let autoplay = false\n  if (hadPoster) {\n    autoplay = true\n  }\n\n  loadYouTubeAPI().then(() => {\n    const player = new window.YT.Player(video, {\n      videoId,\n      playerVars: {\n        enablejsapi: 1,\n        cc_load_policy: 0,\n        controls: 1,\n        iv_load_policy: 3,\n        playsinline: 1,\n        rel: 0,\n        playlist: videoId,\n        // eslint-disable-next-line object-shorthand\n        autoplay: autoplay,\n      },\n      events: {\n        onReady: () => {\n          player.getIframe().tabIndex = \"0\"\n          if (hadPoster) {\n            clickPosterToPlayYouTube(player)\n          } else {\n            player.unMute()\n          }\n\n          addPlayerToTrackingArr(\"youtube\", player)\n        },\n        onStateChange: onYouTubePlayerStateChange,\n      },\n    })\n  })\n}\n\n/**\n * Update an existing YouTube iframe to allow for API events and actions\n * @param {HTMLIFrameElement} iframe existing iframe, not originally rendered through the API\n * @param {boolean} hadPoster dictate the presence of poster image over video\n */\nconst updateIframeYouTubeVideo = (iframe, hadPoster) => {\n  loadYouTubeAPI().then(() => {\n    const player = new window.YT.Player(iframe, {\n      events: {\n        onReady: () => {\n          player.getIframe().tabIndex = \"0\"\n\n          if (hadPoster) {\n            clickPosterToPlayYouTube(player)\n          } else {\n            player.unMute()\n          }\n\n          addPlayerToTrackingArr(\"youtube\", player)\n        },\n        onStateChange: onYouTubePlayerStateChange,\n      },\n    })\n  })\n}\n\n/**\n * Create a Vimeo video player directly from the API\n * @param {HTMLElement} video video player div that will be swapped out with iframe\n * @param {boolean} hadPoster dictate the presence of poster image over video\n */\nconst initVimeoVideo = (video, hadPoster) => {\n  let autoplay = false\n  if (hadPoster) {\n    autoplay = true\n  }\n\n  loadVimeoAPI().then(() => {\n    const player = new window.Vimeo.Player(video, {\n      id: video.dataset.videoId,\n      // eslint-disable-next-line object-shorthand\n      autoplay: autoplay,\n    })\n\n    player.element.tabIndex = \"0\"\n    if (hadPoster) {\n      clickPosterToPlayVimeo(player)\n    }\n\n    pausePlayingVideos()\n    addPlayerToTrackingArr(\"vimeo\", player)\n  })\n}\n\n/**\n * Update an existing Vimeo iframe to allow for API events and actions\n * @param {HTMLIFrameElement} iframe existing iframe, not originally rendered through the API\n * @param {boolean} hadPoster dictate the presence of poster image over video\n */\nconst updateIframeVimeoVideo = (iframe, hadPoster) => {\n  loadVimeoAPI().then(() => {\n    const player = new window.Vimeo.Player(iframe, {\n      muted: true,\n    })\n\n    player.element.tabIndex = \"0\"\n    if (hadPoster) {\n      clickPosterToPlayVimeo(player)\n    }\n\n    addPlayerToTrackingArr(\"vimeo\", player)\n  })\n}\n\nexport {\n  initYouTubeVideo,\n  initVimeoVideo,\n  updateIframeYouTubeVideo,\n  updateIframeVimeoVideo,\n}\n","import getMediaQuery from \"../lib/media-queries.js\"\nimport atBreakpointChange from \"../lib/at-breakpoint-change.js\"\nimport { liquidMadeVideoPlayer } from \"../lib/video-player.js\"\n\nclass VideoSection extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      currentVideoWrapper: \"[js-current-video-wrapper]\",\n      mobileVideoTemplate: \"[js-mobile-video-template]\",\n      videoTemplate: \"[js-video-template]\",\n      videoPlayerContainer: \"[js-video-player-container]\",\n    }\n  }\n\n  connectedCallback() {\n    if (this.dataset.requiresTemplate === \"true\") {\n      this.videoTemplate = this.querySelector(this.selectors.videoTemplate)\n      this.mobileVideoTemplate = this.querySelector(\n        this.selectors.mobileVideoTemplate,\n      )\n      this.currentVideoWrapper = this.querySelector(\n        this.selectors.currentVideoWrapper,\n      )\n\n      this.#selectActiveTemplate()\n      atBreakpointChange(720, this.#selectActiveTemplate.bind(this))\n    } else {\n      this.#initVideo()\n    }\n  }\n\n  #selectActiveTemplate() {\n    if (window.matchMedia(getMediaQuery(\"tablet\")).matches) {\n      this.#createVideo(this.videoTemplate)\n    } else {\n      this.#createVideo(this.mobileVideoTemplate)\n    }\n  }\n\n  #createVideo(template) {\n    const videoContent = template.content.cloneNode(true)\n\n    this.currentVideoWrapper.innerHTML = \"\"\n    this.currentVideoWrapper.append(videoContent)\n    this.#initVideo()\n  }\n\n  #initVideo() {\n    const videoPlayerContainer = this.querySelector(\n      this.selectors.videoPlayerContainer,\n    )\n\n    liquidMadeVideoPlayer(videoPlayerContainer)\n  }\n\n  disconnectedCallback() {}\n}\n\nif (!customElements.get(\"video-section\")) {\n  customElements.define(\"video-section\", VideoSection)\n}\n","import atBreakpointChange from \"../lib/at-breakpoint-change.js\"\nimport EVENTS from \"../lib/events.js\"\nimport getMediaQuery from \"../lib/media-queries.js\"\n\nconst {\n  ANNOUNCEMENT_HEIGHT_UPDATED,\n  HEADER_HEIGHT_UPDATED,\n  FILTER_REPAINT,\n  FILTER_SORT_CHANGED,\n  MODAL_POPUP_CLOSE,\n  MODAL_POPUP_CLOSED,\n  MODAL_POPUP_OPEN,\n  SORT_CHANGED,\n} = EVENTS\n\nclass CollectionProductGrid extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      activeFilters: \"[js-active-filters]\",\n      announcementBar: \"announcement-bar\",\n      disclosureWrapper: \".disclosure-wrapper\",\n      filterDrawerTrigger: \"[js-filter-drawer-trigger]\",\n      stickyFilterDrawerTrigger: \"[js-filter-drawer-trigger--sticky]\",\n      filterDrawerHeading: \"[js-filter-drawer-heading]\",\n      filterDrawerViewResults: \"[js-filter-view-results]\",\n      filterDrawerViewResultsIdleLabel: \"[js-filter-view-results-label]\",\n      filterGroup: \"[js-filter-group]\",\n      filterGroupParent: \"[js-filter-group-parent]\",\n      filterSortFormComponent: \"[js-filter-sort-form-component]\",\n      footer: \"footer\",\n      header: \"header-wrapper\",\n      pagination: \"[js-pagination]\",\n      productGrid: \"[js-product-grid]\",\n      promotionTile: \"[js-promotion-tile]\",\n      promotionTilevideo: \"[js-promotion-tile] [js-background-video]\",\n      sortDrawerTrigger: \"[js-sort-drawer-trigger]\",\n      sortDropdowns:\n        \"[js-sort-top-bar], [js-sort-sticky-button], [js-sort-mobile-drawer]\",\n      sortTriggerValue: \"[js-sort-trigger-value]\",\n      stickyFilterSort: \"[js-sticky-filter-sort-button]\",\n      topBar: \"[js-product-grid-top-bar]\",\n    }\n\n    this.classes = {\n      active: \"active\",\n      hidden: \"hidden\",\n      loading: \"loading\",\n      visible: \"is-visible\",\n    }\n\n    this.ids = {\n      filterDrawer: \"filterDrawer\",\n      mobileSortDrawer: \"mobileSortDrawer\",\n    }\n\n    this.breakpoints = {\n      smallDesktop: getMediaQuery(\"small-desktop\"),\n    }\n\n    this.events = {\n      openFilterDrawer: new CustomEvent(\n        MODAL_POPUP_OPEN(this.ids.filterDrawer),\n      ),\n      closeFilterDrawer: new CustomEvent(\n        MODAL_POPUP_CLOSE(this.ids.filterDrawer),\n      ),\n      openSortDrawer: new CustomEvent(\n        MODAL_POPUP_OPEN(this.ids.mobileSortDrawer),\n      ),\n      closeSortDrawer: new CustomEvent(\n        MODAL_POPUP_CLOSE(this.ids.mobileSortDrawer),\n      ),\n    }\n  }\n\n  connectedCallback() {\n    this.controller = new AbortController()\n    this.sectionId = this.dataset.sectionId\n    this.sectionPaddingTop = parseInt(\n      getComputedStyle(this)\n        .getPropertyValue(\"--section-padding-top\")\n        .replace(\"px\", \"\"),\n      10,\n    )\n    this.eventOptions = { signal: this.controller.signal }\n\n    this.header = document.querySelector(this.selectors.header)\n    this.announcementBar = document.querySelector(\n      this.selectors.announcementBar,\n    )\n    this.headerHeight = 0\n    this.announcementHeight = 0\n    this.getHeaderAnnouncementHeight()\n    document.addEventListener(\n      HEADER_HEIGHT_UPDATED,\n      this.handleHeaderHeightChange.bind(this),\n      this.eventOptions,\n    )\n    document.addEventListener(\n      ANNOUNCEMENT_HEIGHT_UPDATED,\n      this.handleAnnouncementHeightChange.bind(this),\n      this.eventOptions,\n    )\n\n    this.filterDrawerTriggers = this.querySelectorAll(\n      `${this.selectors.filterDrawerTrigger}, ${this.selectors.stickyFilterDrawerTrigger}`,\n    )\n    this.filterDrawerHeading = this.querySelector(\n      this.selectors.filterDrawerHeading,\n    )\n    this.filterDrawerViewResults = this.querySelector(\n      this.selectors.filterDrawerViewResults,\n    )\n    this.filterDrawerViewResultsIdleLabels = this.querySelectorAll(\n      this.selectors.filterDrawerViewResultsIdleLabel,\n    )\n    this.activeFilters = this.querySelector(this.selectors.activeFilters)\n    this.filterGroups = this.querySelectorAll(this.selectors.filterGroup)\n    this.topBar = this.querySelector(this.selectors.topBar)\n    this.sortTriggerValue = this.querySelector(this.selectors.sortTriggerValue)\n    this.sortDropdowns = this.querySelectorAll(this.selectors.sortDropdowns)\n    this.productGrid = this.querySelector(this.selectors.productGrid)\n    this.promotionTiles = this.querySelectorAll(this.selectors.promotionTile)\n    this.filterSortFormComponent = this.querySelector(\n      this.selectors.filterSortFormComponent,\n    )\n    this.pagination = this.querySelector(this.selectors.pagination)\n\n    this.initFilterDrawerTriggers()\n\n    this.filterDrawerViewResults?.addEventListener(\n      \"click\",\n      this.handleViewResultsClick.bind(this),\n      this.eventOptions,\n    )\n\n    this.addEventListener(\n      FILTER_SORT_CHANGED,\n      this.handleFilterSortFormChange.bind(this),\n      this.eventOptions,\n    )\n\n    this.initSortDropdowns()\n\n    if (\n      this.dataset.filterEnabled === \"true\" ||\n      this.dataset.sortEnabled === \"true\"\n    ) {\n      this.initStickyFilterSortButton()\n    }\n\n    this.sortDrawerTrigger.addEventListener(\n      \"click\",\n      this.openSortDrawer.bind(this),\n      this.eventOptions,\n    )\n\n    // Show the sticky filter/sort button when the mobile sort drawer is closed\n    window.addEventListener(\n      MODAL_POPUP_CLOSED(this.ids.mobileSortDrawer),\n      this.showStickyFilterSort.bind(this),\n      this.eventOptions,\n    )\n  }\n\n  initFilterDrawerTriggers() {\n    this.filterDrawerTriggers.forEach((trigger) => {\n      trigger.addEventListener(\n        \"click\",\n        this.handleFilterDrawerOpen.bind(this),\n        this.eventOptions,\n      )\n    })\n\n    // Check whether we should show the sticky filter/sort button when the filter drawer is closed\n    window.addEventListener(\n      MODAL_POPUP_CLOSED(this.ids.filterDrawer),\n      this.handleFilterDrawerClose.bind(this),\n      this.eventOptions,\n    )\n  }\n\n  initStickyFilterSortButton() {\n    this.siteFooter = document.querySelector(this.selectors.footer)\n    this.stickyFilterSort = this.querySelector(this.selectors.stickyFilterSort)\n    this.sortDrawerTrigger = this.querySelector(\n      this.selectors.sortDrawerTrigger,\n    ).parentNode\n\n    this.mobileFooterObserver = new IntersectionObserver(\n      ([{ isIntersecting: visible }]) => {\n        if (visible) {\n          this.mobileTopBarObserver.disconnect()\n          this.hideStickyFilterSort()\n        } else {\n          this.mobileTopBarObserver.observe(this.topBar)\n          this.showStickyFilterSort()\n        }\n      },\n      { threshold: 0.05 },\n    )\n\n    this.mobileTopBarObserver = new IntersectionObserver(\n      ([{ isIntersecting: visible, boundingClientRect }]) => {\n        if (visible) {\n          this.showStickyFilterSort()\n        } else {\n          if (boundingClientRect.top <= 0) {\n            this.showStickyFilterSort()\n          } else {\n            this.hideStickyFilterSort()\n          }\n        }\n      },\n    )\n\n    if (this.dataset.stickyFilterSortEnabled === \"true\") {\n      this.footerObserver = new IntersectionObserver(\n        ([{ isIntersecting: visible }]) => {\n          if (visible) {\n            this.topBarObserver.disconnect()\n            this.hideStickyFilterSort()\n          } else {\n            this.topBarObserver.observe(this.topBar)\n          }\n        },\n        { threshold: 0.1 },\n      )\n\n      this.topBarObserver = new IntersectionObserver(\n        ([{ isIntersecting: visible, boundingClientRect }]) => {\n          if (visible) {\n            this.topBar.classList.add(this.classes.visible)\n            this.hideStickyFilterSort()\n          } else {\n            this.topBar.classList.remove(this.classes.visible)\n\n            if (\n              boundingClientRect.top <=\n              this.headerHeight + this.announcementHeight\n            ) {\n              this.showStickyFilterSort()\n            } else {\n              this.hideStickyFilterSort()\n            }\n          }\n        },\n        {\n          rootMargin: `-${\n            this.headerHeight + this.announcementHeight\n          }px 0px 0px 0px`,\n        },\n      )\n    }\n\n    // Watch for small-desktop breakpoint to handle sticky/filter button visibility\n    atBreakpointChange(1024, this.handleWindowResize.bind(this))\n    this.handleWindowResize()\n  }\n\n  handleFilterDrawerOpen(event) {\n    this.hideStickyFilterSort()\n\n    // If the open was triggered by the sticky filter/sort button, we need to delay\n    //  to allow the button to animate out.\n    // Otherwise, just open\n    if (event.target.matches(this.selectors.stickyFilterDrawerTrigger)) {\n      setTimeout(() => {\n        window.dispatchEvent(this.events.openFilterDrawer)\n      }, 240)\n    } else {\n      window.dispatchEvent(this.events.openFilterDrawer)\n    }\n  }\n\n  handleFilterDrawerClose() {\n    if (\n      !this.topBar.classList.contains(this.classes.visible) &&\n      this.dataset.stickyFilterSortEnabled === \"true\"\n    ) {\n      this.showStickyFilterSort()\n    }\n  }\n\n  handleViewResultsClick() {\n    window.dispatchEvent(this.events.closeFilterDrawer)\n  }\n\n  handleFilterSortFormChange(event) {\n    const url = `${window.location.pathname}?section_id=${this.sectionId}&${event.detail.searchParams}`\n\n    const topBarScrollTop =\n      this.topBar.getBoundingClientRect().top +\n      window.scrollY -\n      this.sectionPaddingTop -\n      this.headerHeight -\n      this.announcementHeight\n\n    // Scroll to the top bar\n    window.scrollTo({ top: topBarScrollTop, behaviour: \"smooth\" })\n\n    this.updateURLHash(event.detail.searchParams)\n    this.classList.add(this.classes.loading)\n\n    fetch(url)\n      .then((res) => res.text())\n      .then((text) => {\n        const doc = new DOMParser().parseFromString(text, \"text/html\")\n\n        const newProductGrid = doc.querySelector(this.selectors.productGrid)\n        const newPagination = doc.querySelector(this.selectors.pagination)\n\n        if (this.dataset.filterEnabled === \"true\") {\n          const newFilterDrawerHeading = doc.querySelector(\n            this.selectors.filterDrawerHeading,\n          )\n          const newFilterDrawerViewResultsIdleLabel = doc.querySelector(\n            this.selectors.filterDrawerViewResultsIdleLabel,\n          )\n          const newActiveFilters = doc.querySelector(\n            this.selectors.activeFilters,\n          )\n          const newFilterDrawerTrigger = doc.querySelector(\n            this.selectors.filterDrawerTrigger,\n          )\n\n          this.filterDrawerHeading.innerHTML = newFilterDrawerHeading.innerHTML\n\n          this.filterDrawerViewResultsIdleLabels.forEach((label) => {\n            label.innerHTML = newFilterDrawerViewResultsIdleLabel.innerHTML\n          })\n\n          this.activeFilters.innerHTML = newActiveFilters.innerHTML\n\n          this.filterGroups.forEach((group) => {\n            const newGroup = doc.getElementById(group.id)\n            const groupParent = group.closest(this.selectors.filterGroupParent)\n\n            if (newGroup) {\n              groupParent.classList.remove(this.classes.hidden)\n              group.innerHTML = newGroup.innerHTML\n            } else {\n              groupParent.classList.add(this.classes.hidden)\n            }\n          })\n\n          this.filterDrawerTriggers.forEach((trigger) => {\n            trigger.innerHTML = newFilterDrawerTrigger.innerHTML\n          })\n        }\n\n        this.productGrid.innerHTML = newProductGrid.innerHTML\n        this.productGrid.classList = newProductGrid.classList\n        this.pagination.innerHTML = newPagination.innerHTML\n        this.updateSortDropdowns(event.detail.sortBy)\n        this.classList.remove(this.classes.loading)\n\n        const filterRepaintEvent = new CustomEvent(FILTER_REPAINT, {\n          detail: { newDocument: doc },\n        })\n\n        this.filterSortFormComponent.dispatchEvent(filterRepaintEvent)\n      })\n  }\n\n  updateURLHash(searchParams) {\n    history.pushState(\n      { searchParams },\n      \"\",\n      `${window.location.pathname}${searchParams && \"?\".concat(searchParams)}`,\n    )\n  }\n\n  initSortDropdowns() {\n    this.sortDropdowns.forEach((dropdown) => {\n      const inputs = dropdown.querySelectorAll(\"input\")\n\n      // Add a change listener to each input so that we can emit an event with the change\n      inputs.forEach((input) => {\n        input.addEventListener(\n          \"click\",\n          this.handleSortOptionClick.bind(this),\n          this.eventOptions,\n        )\n\n        input.addEventListener(\n          \"keydown\",\n          this.handleSortOptionKeydown.bind(this),\n          this.eventOptions,\n        )\n      })\n    })\n  }\n\n  updateSortDropdowns(sortBy) {\n    this.dataset.currentSort = sortBy\n\n    this.sortDropdowns.forEach((dropdown) => {\n      const newSelectedInput = dropdown.querySelector(\n        `input[value=\"${sortBy}\"]`,\n      )\n      newSelectedInput.checked = true\n    })\n  }\n\n  handleSortOptionKeydown(event) {\n    event.preventDefault()\n\n    const inputs = event.currentTarget\n      .closest(this.selectors.sortDropdowns)\n      .querySelectorAll(\"input\")\n    let currentInputIndex\n\n    for (let i = 0; i < inputs.length; i++) {\n      if (inputs[i] === event.target) {\n        currentInputIndex = i\n        break\n      }\n    }\n\n    switch (event.key) {\n      case \"ArrowUp\": {\n        let previousInputIndex = currentInputIndex - 1\n\n        // If the current input is the first, then the \"previous\" should be the last\n        if (previousInputIndex < 0) {\n          previousInputIndex = inputs.length - 1\n        }\n\n        inputs[previousInputIndex].checked = true\n        inputs[previousInputIndex].focus()\n        break\n      }\n\n      case \"ArrowDown\": {\n        let nextInputIndex = currentInputIndex + 1\n\n        // If the current input is the first, then the \"previous\" should be the last\n        if (nextInputIndex === inputs.length) {\n          nextInputIndex = 0\n        }\n\n        inputs[nextInputIndex].checked = true\n        inputs[nextInputIndex].focus()\n        break\n      }\n\n      case \" \": {\n        if (event.target.value === this.dataset.currentSort) {\n          this.closeSortDropdown(\n            event.target.closest(this.selectors.sortDropdowns),\n          )\n        } else {\n          this.applySortChange(\n            event.target.value,\n            event.target.dataset.label,\n            event.target.closest(this.selectors.sortDropdowns),\n          )\n        }\n      }\n    }\n  }\n\n  handleSortOptionClick(event) {\n    if (event.target.value !== this.dataset.currentSort) {\n      this.applySortChange(\n        event.target.value,\n        event.target.dataset.label,\n        event.target.closest(this.selectors.sortDropdowns),\n      )\n    }\n  }\n\n  applySortChange(sortBy, label, parentDropdown) {\n    const sortChangedEvent = new CustomEvent(SORT_CHANGED, {\n      detail: { sortBy },\n    })\n\n    this.filterSortFormComponent.dispatchEvent(sortChangedEvent)\n    this.sortTriggerValue.innerText = label\n    this.closeSortDropdown(parentDropdown)\n  }\n\n  closeSortDropdown(dropdown) {\n    const disclosureWrapper = dropdown.closest(this.selectors.disclosureWrapper)\n\n    if (disclosureWrapper) {\n      disclosureWrapper.removeAttribute(\"open\")\n    } else {\n      this.closeSortDrawer()\n    }\n  }\n\n  handleWindowResize() {\n    // If we're above small-desktop, connect an observer to show/hide the sticky\n    // filter/sort button when the top bar or footer are in view.\n    // Otherwise, connect a mobile-specific observer for when the footer or\n    // banner are in view.\n    if (window.matchMedia(this.breakpoints.smallDesktop).matches) {\n      this.hideStickyFilterSort()\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n\n      if (this.dataset.stickyFilterSortEnabled === \"true\") {\n        this.footerObserver.observe(this.siteFooter)\n      }\n    } else {\n      this.hideStickyFilterSort()\n\n      if (this.dataset.stickyFilterSortEnabled === \"true\") {\n        this.footerObserver.disconnect()\n        this.topBarObserver.disconnect()\n      }\n\n      this.mobileFooterObserver.observe(this.siteFooter)\n    }\n  }\n\n  openSortDrawer() {\n    this.hideStickyFilterSort()\n\n    // Delay to allow sticky filter/sort button to animate out.\n    setTimeout(() => {\n      window.dispatchEvent(this.events.openSortDrawer)\n    }, 240)\n  }\n\n  closeSortDrawer() {\n    window.dispatchEvent(this.events.closeSortDrawer)\n  }\n\n  hideStickyFilterSort() {\n    this.stickyFilterSort?.classList.remove(this.classes.active)\n  }\n\n  showStickyFilterSort() {\n    this.stickyFilterSort?.classList.add(this.classes.active)\n  }\n\n  getHeaderAnnouncementHeight() {\n    if (this.header.dataset.enableStickyHeader === \"true\") {\n      this.headerHeight = parseInt(\n        getComputedStyle(document.documentElement)\n          .getPropertyValue(\"--header-height\")\n          .replace(\"px\", \"\"),\n        10,\n      )\n    }\n\n    if (\n      this.announcementBar &&\n      this.announcementBar.hasAttribute(\"data-sticky\")\n    ) {\n      this.announcementHeight = parseInt(\n        getComputedStyle(document.documentElement)\n          .getPropertyValue(\"--announcement-height\")\n          .replace(\"px\", \"\"),\n        10,\n      )\n    }\n  }\n\n  handleHeaderHeightChange(event) {\n    if (this.header.dataset.enableStickyHeader === \"true\") {\n      this.headerHeight = event.detail.height\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n      this.footerObserver?.disconnect()\n      this.topBarObserver?.disconnect()\n      this.initStickyFilterSortButton()\n    }\n  }\n\n  handleAnnouncementHeightChange(event) {\n    if (\n      this.announcementBar &&\n      this.announcementBar.hasAttribute(\"data-sticky\")\n    ) {\n      this.announcementHeight = event.detail.height\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n      this.footerObserver?.disconnect()\n      this.topBarObserver?.disconnect()\n      this.initStickyFilterSortButton()\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n    this.documentObserver.disconnect()\n    this.mobileFooterObserver.disconnect()\n    this.mobileTopBarObserver.disconnect()\n    this.footerObserver?.disconnect()\n    this.topBarObserver?.disconnect()\n    atBreakpointChange.unload()\n  }\n}\n\nif (!customElements.get(\"collection-product-grid\")) {\n  customElements.define(\"collection-product-grid\", CollectionProductGrid)\n}\n","import { domMadeVideoPlayer } from \"./video-player.js\"\nimport {\n  pausePlayingVideos,\n  clearPlayerTrackingArr,\n} from \"./video-player-state.js\"\n\nconst { icons } = window.theme\n\nexport default function setupMediaLightbox(node) {\n  const lightboxMedia = node.querySelectorAll(\".lightbox-media\")\n\n  if (!lightboxMedia.length) return\n\n  let mediaLightbox\n\n  import(flu.chunks.photoswipe).then(({ PhotoSwipeLightbox, PhotoSwipe }) => {\n    mediaLightbox = new PhotoSwipeLightbox({\n      gallery: node,\n      children: \"a\",\n      showHideAnimationType: \"zoom\",\n      pswpModule: PhotoSwipe,\n      mainClass: \"pswp--product-lightbox\",\n      bgOpacity: 1,\n      arrowPrevSVG: icons.leftChevronWithStem,\n      arrowNextSVG: icons.rightChevronWithStem,\n      closeSVG: icons.close,\n      zoomSVG: icons.zoom,\n      preloadFirstSlide: true,\n    })\n\n    // Add ability to check for video present within lightbox\n    mediaLightbox.addFilter(\"itemData\", (itemData) => {\n      const videoUrl = itemData.element.dataset.videoUrl\n\n      if (videoUrl) {\n        itemData.videoUrl = videoUrl\n      }\n      return itemData\n    })\n\n    mediaLightbox.on(\"contentLoad\", (e) => {\n      const { content } = e\n\n      if (content.type === \"video\") {\n        e.preventDefault()\n\n        let {\n          externalVideoHost,\n          externalVideoId,\n          showPoster,\n          videoPoster,\n          videoAspectRatio,\n          isBackgroundVideo,\n        } = content.data.element.dataset\n\n        // Build photoswipe div in advance of iframeContainer being appended\n        content.element = document.createElement(\"div\")\n        content.element.className = \"pswp__video-container\"\n\n        // Build video container to append to photoswipe div\n        const videoContainer = document.createElement(\"div\")\n\n        if (videoAspectRatio < 1) {\n          // Additional class to account for portrait videos to override styling and prevent cropping.\n          videoContainer.className =\n            \"lightbox-video__container mismatched-aspect-video\"\n        } else {\n          videoContainer.className = \"lightbox-video__container\"\n        }\n\n        videoContainer.style.setProperty(\n          \"--video-aspect-ratio\",\n          videoAspectRatio,\n        )\n\n        let video\n\n        isBackgroundVideo = isBackgroundVideo === \"true\"\n        if (isBackgroundVideo) {\n          video = document.createElement(\"video\")\n          video.playsInline = true\n          video.controls = false\n          video.autoplay = true\n          video.muted = true\n          video.src = content.data.videoUrl\n        } else {\n          if (\n            externalVideoHost === \"vimeo\" ||\n            externalVideoHost === \"youtube\"\n          ) {\n            // Build iframe for external videos\n            video = document.createElement(\"iframe\")\n            video.setAttribute(\"allowfullscreen\", \"\")\n            video.id = `lightbox-video-${externalVideoId}`\n            videoContainer.setAttribute(\"data-video-type\", externalVideoHost)\n          } else {\n            // Build video element for Shopify videos\n            video = document.createElement(\"video\")\n            video.playsInline = true\n            video.controls = true\n          }\n\n          video.src = content.data.videoUrl\n        }\n\n        showPoster = showPoster === \"true\"\n        if (showPoster && !isBackgroundVideo) {\n          // Show poster and play button until clicked to play\n          videoContainer.setAttribute(\"data-show-poster\", true)\n\n          if (externalVideoHost) {\n            video.setAttribute(\"allow\", \"autoplay\")\n          }\n\n          const posterTemplate = node.querySelector(\n            \"[js-lightbox-video-poster-container]\",\n          )\n          const currentPoster = posterTemplate.content.cloneNode(true)\n          videoContainer.appendChild(currentPoster)\n\n          let posterImage\n\n          if (videoPoster) {\n            posterImage = videoContainer.querySelector(\n              \"[js-lightbox-video-poster]\",\n            )\n            posterImage.src = videoPoster\n          } else {\n            posterImage = videoContainer.querySelector(\".poster-placeholder\")\n          }\n          // Append videoContainer with poster\n          content.element.appendChild(videoContainer)\n        } else {\n          videoContainer.setAttribute(\"data-has-poster\", false)\n          content.element.appendChild(videoContainer)\n        }\n\n        domMadeVideoPlayer(videoContainer, video)\n      }\n    })\n\n    mediaLightbox.on(\"afterInit\", () => {\n      const initSlideVideo = mediaLightbox.pswp.currSlide.data.type === \"video\"\n\n      if (initSlideVideo) {\n        const initialVideoPlayButton =\n          mediaLightbox.pswp.currSlide.content.element.firstChild.childNodes[1]\n\n        // Removes poster to reveal video when opening lightbox\n        initialVideoPlayButton.click()\n      }\n    })\n\n    mediaLightbox.init()\n\n    if (window.Shopify?.designMode) {\n      node.addEventListener(\"shopify:section:load\", () => {\n        // Re-init lightbox after theme editor re-render to allow it to keep working\n        mediaLightbox.init()\n      })\n    }\n\n    // Hide nav ui elements if single image\n    mediaLightbox.on(\"firstUpdate\", () => {\n      const { pswp, options } = mediaLightbox\n      const mediaCount = options.dataSource.items.length\n\n      if (mediaCount === 1) {\n        pswp.element.classList.add(\"pswp--is-single-image\")\n      }\n    })\n\n    // Remove video to stop playing and reset to poster\n    mediaLightbox.on(\"contentDeactivate\", ({ content }) => {\n      if (content.type === \"video\") {\n        pausePlayingVideos()\n      }\n    })\n\n    mediaLightbox.on(\"close\", () => {\n      clearPlayerTrackingArr()\n    })\n  })\n}\n","function setupModelViewer(node) {\n  const modelEls = node.querySelectorAll(\"model-viewer\")\n\n  if (modelEls.length !== 0) {\n    initModels()\n  }\n\n  function initModels() {\n    window.Shopify.loadFeatures([\n      {\n        name: \"model-viewer-ui\",\n        version: \"1.0\",\n        onLoad: initModelViewers,\n      },\n    ])\n\n    window.Shopify.loadFeatures([\n      {\n        name: \"shopify-xr\",\n        version: \"1.0\",\n        onLoad: initShopifyXr,\n      },\n    ])\n  }\n\n  function initModelViewers(errors) {\n    if (errors) return\n\n    modelEls.forEach((model) => {\n      initCustomModelButtons(model)\n    })\n  }\n\n  function initShopifyXr() {\n    if (!window.ShopifyXR) {\n      document.addEventListener(\"shopify_xr_initialized\", () => {\n        initShopifyXr()\n      })\n    } else {\n      document.querySelectorAll(\"[id^='ModelJSON-']\").forEach((modelJSON) => {\n        window.ShopifyXR.addModels(JSON.parse(modelJSON.textContent))\n        modelJSON.remove()\n      })\n\n      window.ShopifyXR.setupXRElements()\n    }\n  }\n\n  function initCustomModelButtons(model) {\n    const viewer = new window.Shopify.ModelViewerUI(model)\n\n    const parentContainer = model.closest(\".product-media__item\")\n    const poster = parentContainer.querySelector(\".model-viewer__poster\")\n    const closeBtn = parentContainer.querySelector(\n      \".model-viewer__close-button\",\n    )\n\n    poster.addEventListener(\"click\", () => {\n      parentContainer.classList.add(\"model-viewer__active\")\n      viewer.play()\n    })\n\n    poster.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\") {\n        parentContainer.classList.add(\"model-viewer__active\")\n        viewer.play()\n      }\n    })\n\n    closeBtn.addEventListener(\"click\", () => {\n      parentContainer.classList.remove(\"model-viewer__active\")\n      viewer.pause()\n    })\n\n    closeBtn.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\") {\n        parentContainer.classList.remove(\"model-viewer__active\")\n        viewer.pause()\n      }\n    })\n  }\n}\n\nexport default setupModelViewer\n","import EVENTS from \"../lib/events.js\"\nimport srraf from \"srraf\"\nimport setupMediaLightbox from \"../lib/media-lightbox.js\"\nimport setupModelViewer from \"../lib/model-viewer.js\"\nimport { liquidMadeVideoPlayer } from \"../lib/video-player.js\"\nimport { pausePlayingVideos } from \"../lib/video-player-state.js\"\n\nclass ProductMedia extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      activeThumb: \".product-thumbnails__item-link.active\",\n      carouselTabIndex: \"[js-update-carousel-tabindex]\",\n      initialMediaContainer: \"[data-initial-slide]\",\n      iframe: \"iframe\",\n      image: \".image\",\n      mainMediaContainer: \".product-media__items\",\n      media: \".media\",\n      mediaItemWrapper: \"[js-media-item-wrapper]\",\n      mobileLoopButton: \".scroll-slider__mobile-loop-nav\",\n      thumb: \"[js-product-thumbnail]\",\n      thumbById: (id) => `[data-thumbnail-id='${id}']`,\n      mediaById: (id) => `[data-slide-index='${id}']`,\n      thumbContainer: \"[js-product-thumbnails]\",\n      thumbGradient: \".product-thumbnails__end-cap-gradient\",\n      video: \"video\",\n      videoPlayerContainer: \"[js-video-player-container]\",\n      videoPoster: \".video-poster-container\",\n      viewInYourSpace: \"[js-in-your-space]\",\n    }\n  }\n\n  connectedCallback() {\n    this.controller = new AbortController()\n\n    this.initActiveMedia()\n\n    // Listen for variant change, handle media depending on media grouping setting\n    this.addEventListener(\n      EVENTS.PRODUCT_VARIANT_CHANGED,\n      (event) => {\n        if (event.detail.hasMediaGrouping) {\n          this.handleRepaint(event)\n        } else {\n          this.updateActiveMainMediaToVariant(event)\n        }\n      },\n      { signal: this.controller.signal },\n    )\n\n    document.addEventListener(\n      EVENTS.SHOPIFY_SECTION_LOAD,\n      this.handleLeftThumbnailContainerHeight(),\n      {\n        signal: this.controller.signal,\n      },\n    )\n  }\n\n  initActiveMedia() {\n    this.media = this.querySelector(this.selectors.media)\n\n    if (this.media === null) return\n\n    this.activeMediaController = new AbortController()\n    this.hasSingleMedia = this.dataset.hasSingleMedia === \"true\"\n\n    this.mediaLayout = this.dataset.mediaLayout\n    this.mainMediaContainer = this.querySelector(\n      this.selectors.mainMediaContainer,\n    )\n    this.initialMediaContainer = this.querySelector(\n      this.selectors.initialMediaContainer,\n    )\n\n    // Setup media lightbox\n    if (this.dataset.hasProductLightbox === \"true\") {\n      setupMediaLightbox(this.mainMediaContainer)\n    }\n\n    // Setup model viewer\n    setupModelViewer(this.mainMediaContainer)\n\n    // Load video players\n    this.videoPlayerContainers = this.querySelectorAll(\n      this.selectors.videoPlayerContainer,\n    )\n    this.videoPlayerContainers.forEach((video) => liquidMadeVideoPlayer(video))\n\n    //\n    // Desktop carousel & all Mobile layouts\n    //\n    // Load thumbnail indicators\n    if (this.mediaLayout === \"thumbnails\" && this.dataset.thumbnailPosition) {\n      this.thumbnailPosition = this.dataset.thumbnailPosition\n    }\n\n    if (!this.hasSingleMedia) {\n      this.activeThumb = this.querySelector(this.selectors.activeThumb)\n      this.activeMediaId = this.activeThumb.dataset.thumbnailId\n      this.scrollerId = this.dataset.scrollerId\n\n      // Listen for carousel sliding\n      document.addEventListener(\n        EVENTS.SCROLL_SLIDER_CHANGED(this.scrollerId),\n        (event) => {\n          const currentMediaEl = event.detail.currentElement\n          const previousMediaEl = event.detail.previousElement\n          this.mobileLoopButton = this.querySelector(\n            this.selectors.mobileLoopButton,\n          )\n\n          if (currentMediaEl) {\n            if (currentMediaEl !== this.mobileLoopButton) {\n              this.updateActiveThumbnails(currentMediaEl.dataset.mediaItemId)\n            }\n\n            if (currentMediaEl.dataset.mediaType === \"model\") {\n              this.initViewInYourSpace(currentMediaEl.dataset.mediaItemId)\n            }\n          }\n\n          // Pause & Add poster back to any active iframes\n          if (this.mediaLayout === \"thumbnails\") {\n            if (currentMediaEl) {\n              this.updateCarouselA11yNav(currentMediaEl)\n            }\n\n            if (previousMediaEl) {\n              const prevMediaType = previousMediaEl.dataset.mediaType\n\n              if (\n                prevMediaType === \"external_video\" ||\n                prevMediaType === \"video\"\n              ) {\n                const injectedVideoIframe = previousMediaEl.querySelector(\n                  this.selectors.iframe,\n                )\n                const injectedVideoElement = previousMediaEl.querySelector(\n                  this.selectors.video,\n                )\n\n                if (injectedVideoIframe || injectedVideoElement) {\n                  pausePlayingVideos()\n                }\n              }\n            }\n          }\n        },\n        { signal: this.activeMediaController.signal },\n      )\n\n      //\n      // Desktop carousel layouts only\n      //\n      if (this.mediaLayout === \"thumbnails\") {\n        this.initThumbnailListeners()\n\n        // Set tabindex within carousels\n        this.querySelectorAll(this.selectors.carouselTabIndex).forEach((el) => {\n          el.setAttribute(\"tabindex\", \"-1\")\n        })\n      }\n    }\n  }\n\n  handleLeftThumbnailContainerHeight() {\n    if (!this.initialMediaContainer) return\n\n    this.videoPoster = this.querySelector(this.selectors.videoPoster)\n    const initialMedia = this.initialMediaContainer.querySelector(\n      this.selectors.media,\n    )\n    const mediaEl = this.videoPoster ? this.videoPoster : initialMedia\n\n    // Allow for slight delay to improve container height within T.E.\n    setTimeout(() => {\n      this.style.setProperty(\n        \"--left-thumbnail-container-height\",\n        `${mediaEl.offsetHeight}px`,\n      )\n    }, 0)\n  }\n\n  initThumbnailListeners() {\n    // Listen for page loaded to get left thumbnail column height\n    if (this.thumbnailPosition === \"left\") {\n      const initialImg = this.initialMediaContainer.querySelector(\n        this.selectors.image,\n      )\n\n      initialImg\n        .decode()\n        .then(() => {\n          this.handleLeftThumbnailContainerHeight()\n        })\n        .then(() => {\n          initialImg.classList.add(\"initial-image\")\n        })\n    }\n\n    const smallDesktop = 1023 // 1023 to make sure 1024 is properly styled\n    this.widthWatcher = srraf(({ vw, pvw }) => {\n      if (vw !== pvw && vw > smallDesktop) {\n        this.handleLeftThumbnailContainerHeight()\n      }\n    })\n\n    // Listen for thumbnail container scroll to apply gradients\n    this.thumbContainer = this.querySelector(this.selectors.thumbContainer)\n    this.thumbGradient = this.querySelector(this.selectors.thumbGradient)\n\n    this.thumbContainer.addEventListener(\n      \"scroll\",\n      () => {\n        this.updateThumbGradientOpacity()\n      },\n      {\n        signal: this.activeMediaController.signal,\n      },\n    )\n\n    // Listen for thumbnail clicks\n    this.thumbnailItems = this.querySelectorAll(this.selectors.thumb)\n    this.thumbnailItems.forEach((item) => {\n      item.addEventListener(\n        \"click\",\n        () => {\n          this.updateActiveMainMedia(parseInt(item.dataset.thumbnailIndex))\n          this.updateActiveThumbnails(item.dataset.thumbnailId)\n        },\n        { signal: this.activeMediaController.signal },\n      )\n    })\n  }\n\n  initViewInYourSpace(currentActiveMediaId) {\n    this.querySelector(this.selectors.viewInYourSpace).setAttribute(\n      \"data-shopify-model3d-id\",\n      currentActiveMediaId,\n    )\n  }\n\n  updateActiveMainMedia(currentThumbnailIndex) {\n    const isDesktopViewport =\n      (window.innerWidth || document.documentElement.clientWidth) > 1024\n\n    if (isDesktopViewport && this.mediaLayout === \"columns\") {\n      const featuredMediaEl = this.querySelector(\n        `${this.selectors.mediaById(currentThumbnailIndex)}`,\n      )\n\n      featuredMediaEl.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"center\",\n        inline: \"nearest\",\n      })\n    }\n\n    // Scroll slider event included for Column layouts for mobile carousel coverage\n    document.dispatchEvent(\n      new CustomEvent(EVENTS.SCROLL_SLIDER_GO_TO_SLIDE(this.scrollerId), {\n        detail: {\n          slideIndex: currentThumbnailIndex,\n          behavior: \"instant\",\n        },\n      }),\n    )\n  }\n\n  updateActiveMainMediaToVariant(event) {\n    const newMediaId = event.detail.newFeaturedMedia\n    this.mediaItemWrappers = this.querySelectorAll(\n      this.selectors.mediaItemWrapper,\n    )\n\n    let newMediaIndex\n    for (const media of this.mediaItemWrappers) {\n      if (media.dataset.mediaItemId === newMediaId) {\n        newMediaIndex = parseInt(media.dataset.slideIndex)\n        break\n      }\n    }\n\n    this.updateActiveMainMedia(newMediaIndex)\n  }\n\n  updateActiveThumbnails(currentActiveMediaId) {\n    const lastActiveThumbnail = this.querySelector(this.selectors.activeThumb)\n\n    let activeThumbnail = this.querySelector(\n      `${this.selectors.thumbById(currentActiveMediaId)}`,\n    )\n\n    // Media grouping may create null activeThumbnails\n    if (activeThumbnail === null) {\n      const firstMediaId = this.querySelector(this.selectors.media).dataset\n        .mediaId\n\n      activeThumbnail = this.querySelector(\n        `${this.selectors.thumbById(firstMediaId)}`,\n      )\n    }\n\n    if (activeThumbnail !== lastActiveThumbnail) {\n      // Add and remove active thumbnail indicator\n      activeThumbnail.classList.add(\"active\")\n      lastActiveThumbnail.classList.remove(\"active\")\n      this.activeMediaId = currentActiveMediaId\n\n      // Scroll active thumbnail into view\n      if (this.mediaLayout === \"thumbnails\") {\n        const scrollAttribute =\n          this.thumbnailPosition === \"left\" ? \"scrollTop\" : \"scrollLeft\"\n\n        const scrollDistance =\n          this.thumbnailPosition === \"left\"\n            ? activeThumbnail.offsetTop -\n              activeThumbnail.getBoundingClientRect().height * 2\n            : activeThumbnail.offsetLeft -\n              activeThumbnail.getBoundingClientRect().width * 2\n\n        this.thumbContainer[scrollAttribute] = scrollDistance\n      }\n    }\n  }\n\n  updateThumbGradientOpacity() {\n    let beforeOpacity = 0\n    let afterOpacity = 1\n\n    if (this.thumbnailPosition === \"left\") {\n      if (this.thumbContainer.scrollTop !== 0) {\n        beforeOpacity = 1\n      }\n\n      const thumbContainerScrollHeight =\n        this.thumbContainer.scrollHeight - this.thumbGradient.offsetHeight\n      const thumbContainerMaxScroll = this.thumbContainer.scrollTop + 1\n      if (thumbContainerMaxScroll >= thumbContainerScrollHeight) {\n        afterOpacity = 0\n      }\n    } else if (this.thumbnailPosition === \"below\") {\n      if (this.thumbContainer.scrollLeft !== 0) {\n        beforeOpacity = 1\n      }\n\n      const thumbContainerScrollWidth =\n        this.thumbContainer.scrollWidth - this.thumbGradient.offsetWidth\n      const thumbContainerMaxScroll = this.thumbContainer.scrollLeft + 1\n\n      if (thumbContainerMaxScroll >= thumbContainerScrollWidth) {\n        afterOpacity = 0\n      }\n    }\n\n    this.thumbGradient.style.setProperty(\n      \"--thumb-opacity-before\",\n      beforeOpacity,\n    )\n    this.thumbGradient.style.setProperty(\"--thumb-opacity-after\", afterOpacity)\n  }\n\n  updateCarouselA11yNav(currentActiveMediaEl) {\n    this.allTabIndexEls = this.querySelectorAll(this.selectors.carouselTabIndex)\n    this.currentTabIndexEls = currentActiveMediaEl.querySelectorAll(\n      this.selectors.carouselTabIndex,\n    )\n\n    this.allTabIndexEls.forEach((el) => {\n      el.setAttribute(\"tabindex\", \"-1\")\n    })\n\n    this.currentTabIndexEls.forEach((el) => {\n      el.removeAttribute(\"tabindex\")\n    })\n  }\n\n  handleRepaint(event) {\n    // In the case that Media Grouping image order creates conflicts, prevent repaint\n    if (event.detail.mediaSize > 0) {\n      this.activeMediaController.abort()\n      this.controller.abort()\n      this.connectedCallback()\n      this.initActiveMedia()\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n  }\n}\n\nif (!customElements.get(\"product-media\")) {\n  customElements.define(\"product-media\", ProductMedia)\n}\n","import \"../custom-elements/product-media\"\nimport EVENTS from \"../lib/events\"\nimport { dialog } from \"../lib/modals\"\n\nclass MainProductDefault extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      productInner: \".product-inner\",\n\n      // Set sticky container\n      detailsContainer: \".product__details\",\n      mediaContainer: \".product__media\",\n\n      // Variant change events\n      buyButtonBlock: \"product-block-buy-buttons\",\n      buyButtons: \"[js-buy-buttons]\",\n      buyButtonDialog: \".buy-button-dialog\",\n      inventoryStatusBlock: \"[js-product-block-inventory-status]\",\n      mediaBlock: \"product-media\",\n      mediaItem: \".media\",\n      popupModalDialog: \".product-block-variant-selector--popup-modal\",\n      priceBlock: \"[js-product-block-price]\",\n      productForm: \"[data-product-form]\",\n      productFormIdInput: \"input[name='id']\",\n      skuBlock: \"[js-product-block-sku]\",\n      stickyAddToCartContent: \"[js-sticky-atc-content]\",\n      stickyAddToCartDrawer: \"[data-fluco-dialog='sticky-add-to-cart-modal']\",\n      storeAvailabilityContainer: \"[js-store-availability-container]\",\n      variantBlock: \"product-block-variant-selector\",\n      variantMediaGrouping: \"[data-enable-media-grouping='true']\",\n      variantSelectedInputs: \"div input:checked\",\n      selectVariantById: (id) =>\n        `[js-variant-input][data-option-value-id=\"${id}\"]`,\n    }\n\n    this.classes = {\n      changePending: \"change-pending\",\n      hasError: \"has-error\",\n      modalWillOpen: \"modal--will-open\",\n      stickyDetailsContainer: \"sticky-details-container\",\n      stickyMediaContainer: \"sticky-media-container\",\n      preventAnimation: \"prevent-animation\",\n      quickViewProduct: \"quick-view-product\",\n    }\n  }\n\n  connectedCallback() {\n    this.controller = new AbortController()\n    this.sectionId = this.getAttribute(\"data-section-id\")\n    this.isFeatured =\n      this.getAttribute(\"data-section-type\") === \"featured-product\"\n    this.sectionType = this.getAttribute(\"data-section-type\")\n    this.productURL = this.getAttribute(\"data-product-url\")\n    this.productInner = this.querySelector(this.selectors.productInner)\n    this.mediaContainer = this.querySelector(this.selectors.mediaContainer)\n    this.detailsContainer = this.querySelector(this.selectors.detailsContainer)\n\n    // Sticky container\n    this.setStickyContainer()\n\n    // Variant change handling selectors\n    this.productForm = this.querySelector(this.selectors.productForm)\n    this.buyButtonBlock = this.querySelector(this.selectors.buyButtonBlock)\n    this.mediaBlock = this.querySelector(this.selectors.mediaBlock)\n    this.variantBlock = this.querySelector(this.selectors.variantBlock)\n    this.variantMediaGrouping = this.querySelector(\n      this.selectors.variantMediaGrouping,\n    )\n\n    // Listen for variant change\n    this.addEventListener(\n      EVENTS.PRODUCT_VARIANT_CHANGING,\n      (event) => {\n        const withinQuickView = event.detail.withinQuickView\n        // If a variant change happens within a Quick view modal, it should be separated from the PDP\n        // Splitting out all Quick view modals should be a good safety net.\n        if (!withinQuickView) {\n          this.handleNewVariant(event.detail)\n        }\n      },\n      { signal: this.controller.signal },\n    )\n\n    if (this.sectionType === this.classes.quickViewProduct) {\n      // This specifically targets the product within the Quick view to prevent conflicts with the full PDP\n      this.addEventListener(EVENTS.PRODUCT_VARIANT_CHANGING, (event) => {\n        this.handleNewVariant(event.detail)\n      })\n\n      // When a product is added to cart from quick view, close quick view\n      this.addEventListener(\n        EVENTS.PRODUCT_ADD_SUCCESS,\n        () => {\n          window.dispatchEvent(\n            new CustomEvent(\n              EVENTS.MODAL_POPUP_CLOSE(\n                `quick-view-${this.getAttribute(\"data-product-id\")}`,\n              ),\n            ),\n          )\n        },\n        { signal: this.controller.signal },\n      )\n    }\n  }\n\n  //\n  // General setup functions\n  //\n  setStickyContainer() {\n    this.stickyContainer = this.productInner.getAttribute(\n      \"data-sticky-effect-container\",\n    )\n    this.galleryLayout = this.productInner.getAttribute(\"data-gallery-layout\")\n\n    if (\n      this.stickyContainer === \"gallery\" &&\n      (this.galleryLayout === \"thumbnails_below\" ||\n        this.galleryLayout === \"thumbnails_left\")\n    ) {\n      this.mediaContainer.classList.add(this.classes.stickyMediaContainer)\n      this.detailsContainer.classList.remove(\n        this.classes.stickyDetailsContainer,\n      )\n    }\n\n    if (this.stickyContainer === \"product_details\") {\n      this.detailsContainer.classList.add(this.classes.stickyDetailsContainer)\n      this.mediaContainer.classList.remove(this.classes.stickyMediaContainer)\n    }\n  }\n\n  //\n  // Variant on change functions\n  //\n  handleNewVariant(newElements) {\n    this.detailsContainer.classList.add(this.classes.changePending)\n\n    const newOptionInput = newElements.newOptionInput\n    const newVariantId = newOptionInput.getAttribute(\"data-variant-id\")\n\n    const params = new URLSearchParams({\n      section_id: this.sectionId,\n    })\n\n    // Set params with new variant for fetch\n    if (newVariantId) {\n      params.set(\"variant\", newVariantId)\n    } else {\n      // Build params from currently selected variants\n      const selectedOptionValues = Array.from(\n        this.querySelectorAll(this.selectors.variantSelectedInputs),\n      )\n\n        .map((element) => element.getAttribute(\"data-option-value-id\"))\n        .join(\",\")\n\n      params.set(\"option_values\", selectedOptionValues)\n    }\n\n    // URL only provided if connected to Shopify sibling products\n    const newProductUrl = newOptionInput.getAttribute(\"data-product-url\")\n\n    if (newProductUrl) this.productURL = newProductUrl\n\n    if (!newVariantId && !newProductUrl) {\n      this.setUnavailable()\n      return\n    }\n\n    // Fetch new html to repaint applicable blocks\n    fetch(`${this.productURL}?${params}`)\n      .then((response) => response.text())\n      .then((responseText) => {\n        const html = new DOMParser().parseFromString(responseText, \"text/html\")\n\n        // If we're on the product page, update the URL for history and deep linking\n        if (this.sectionType === \"product\") {\n          this.updateUrlWithVariant(newVariantId)\n        }\n\n        // Update html in product blocks\n        const blockContentToReplace = [\n          \"variantBlock\",\n          \"skuBlock\",\n          \"priceBlock\",\n          \"buyButtons\",\n          \"inventoryStatusBlock\",\n          \"storeAvailabilityContainer\",\n          \"stickyAddToCartContent\",\n        ]\n\n        // Deregister dialogs before updating HTML so they can be reset with new content\n        // The availability is removed in quick view, so it's possible that this doesn't exist\n        // This should be blocked when updating variants within the Quick view so it doesn't wipe the PDP dialogs\n        if (\n          this.buyButtonBlock &&\n          this.sectionType !== this.classes.quickViewProduct\n        ) {\n          const dialogKeysToDestroy = [\n            `store-availability-drawer-${this.sectionId}`,\n            \"sticky-add-to-cart-modal\",\n          ]\n\n          for (const key of dialogKeysToDestroy) {\n            if (window.flu.dialogs[key]) {\n              window.flu.dialogs[key][1].destroy({ deregister: true })\n            }\n          }\n        }\n\n        this.updateBlockHTML(blockContentToReplace, html)\n\n        // Update product form's variant\n        const htmlVariantId = html\n          .querySelector(this.selectors.productForm)\n          .getAttribute(\"data-current-product-id\")\n\n        // When we're in quick view, the product form is loaded after this component connects\n        // and assigns this, so we need to re-assign it\n        if (!this.productForm) {\n          this.productForm = this.querySelector(this.selectors.productForm)\n        }\n\n        this.productForm.setAttribute(\"data-current-product-id\", htmlVariantId)\n        this.productForm\n          .querySelector(this.selectors.productFormIdInput)\n          .setAttribute(\"value\", htmlVariantId)\n\n        //\n        // Interactive content requiring events for repainting listeners\n        //\n        if (this.buyButtonBlock) {\n          const newOptionId = newOptionInput.getAttribute(\n            \"data-option-value-id\",\n          )\n\n          this.updateBuyButtonBlockContent(\n            newElements.withinStickyModal,\n            newOptionId,\n          )\n        }\n\n        if (this.variantBlock) {\n          this.updateVariantSelectorBlockContent()\n        }\n\n        let hasMediaGrouping = false\n        let newContent = newOptionInput\n        if (this.variantMediaGrouping) {\n          hasMediaGrouping = true\n          newContent = html.querySelector(this.selectors.mediaBlock)\n        }\n\n        this.updateMediaBlockContent(newContent, hasMediaGrouping)\n        this.detailsContainer.classList.remove(this.classes.changePending)\n      })\n  }\n\n  getUrlWithVariant(url, id) {\n    const parsedURL = new URL(url)\n    const urlBase = parsedURL.origin + parsedURL.pathname\n    const params = parsedURL.searchParams\n\n    params.set(\"variant\", id)\n\n    return `${urlBase}?${params}`\n  }\n\n  setUnavailable() {\n    const unavailableSelectors = [\n      this.selectors.priceBlock,\n      this.selectors.skuBlock,\n    ]\n\n    this.querySelectorAll(unavailableSelectors).forEach(({ classList }) =>\n      classList.add(\"hidden\"),\n    )\n    this.disableSubmitButtons()\n    this.detailsContainer.classList.remove(this.classes.changePending)\n  }\n\n  disableSubmitButtons() {\n    const unavailableString = window.theme.strings.products.product.unavailable\n    const buyButtons = this.querySelector(this.selectors.buyButtons)\n    const submitButtons = buyButtons.querySelectorAll(\"button\")\n\n    submitButtons.forEach((button) => {\n      const submitButtonLabels = button.querySelectorAll(\".button__label\")\n\n      button.setAttribute(\"disabled\", \"disabled\")\n      submitButtonLabels.forEach((label) => {\n        label.textContent = unavailableString\n      })\n    })\n  }\n\n  updateUrlWithVariant(variantId) {\n    const url = this.getUrlWithVariant(window.location.href, variantId)\n    window.history.replaceState({ path: url }, \"\", url)\n  }\n\n  updateBlockHTML(contentToUpdateArray, html) {\n    // TODO: Reassess approach, particularly for SKU where additional element\n    // required so the innerHTML can be updated.\n    contentToUpdateArray.forEach((block) => {\n      this[block] = this.querySelector(this.selectors[block])\n      this.htmlBlock = html.querySelector(this.selectors[block])\n\n      if (this[block]) {\n        this[block].outerHTML = this.htmlBlock.outerHTML\n      }\n    })\n  }\n\n  //\n  // Send updated content via events for blocks to handle\n  //\n\n  updateBuyButtonBlockContent(withinStickyModal, lastOptionSelectedId) {\n    this.buyButtonBlock.classList.remove(this.classes.hasError)\n    this.buyButtonBlock = this.querySelector(this.selectors.buyButtonBlock)\n\n    // Register new dialog content for store availability and sticky atc\n    const buyButtonDialogs = this.buyButtonBlock.querySelectorAll(\n      this.selectors.buyButtonDialog,\n    )\n    buyButtonDialogs.forEach((dialogEl) => {\n      dialog(dialogEl)\n    })\n\n    // Control animations within open Sticky add to cart modal\n    this.stickyDialog = this.buyButtonBlock.querySelector(\n      this.selectors.stickyAddToCartDrawer,\n    )\n\n    if (withinStickyModal && this.stickyDialog) {\n      this.stickyDialog.classList.remove(this.classes.modalWillOpen)\n\n      // A race condition requires a time out here otherwise selector will return null\n      setTimeout(() => {\n        this.stickyDialog\n          .querySelector(this.selectors.selectVariantById(lastOptionSelectedId))\n          ?.focus()\n      }, 0)\n\n      window.dispatchEvent(\n        new CustomEvent(EVENTS.MODAL_POPUP_OPEN(\"sticky-add-to-cart-modal\")),\n      )\n    }\n\n    this.buyButtonBlock.dispatchEvent(\n      new CustomEvent(EVENTS.PRODUCT_VARIANT_CHANGED),\n    )\n  }\n\n  updateVariantSelectorBlockContent() {\n    // The Quick view approach within product-item-quick-shopping.js removes whitelisted dialogs and\n    // injects them after the Quick view dialog to allow for nesting that doesn't conflict\n    // (ex. Clicking the close button on a popup doesn't close Quick view). Variant change\n    // inserts the dialog back to their original placement and need to be removed again.\n    if (this.sectionType === this.classes.quickViewProduct) {\n      const defaultPopupModalDialog = this.querySelector(\n        this.selectors.popupModalDialog,\n      )\n\n      defaultPopupModalDialog?.remove()\n    }\n\n    this.variantBlock.dispatchEvent(\n      new CustomEvent(EVENTS.PRODUCT_VARIANT_CHANGED),\n    )\n  }\n\n  updateMediaBlockContent(newContent, hasMediaGrouping) {\n    // There's a split path depending on if Media grouping is enabled\n    // Media grouping needs to update indicators and repaint the block\n    if (hasMediaGrouping) {\n      const mediaSize = parseInt(\n        newContent.getAttribute(\"data-media-count\"),\n        10,\n      )\n\n      // TODO: Look into alternate approach in CSS to do the calcs with --mediaCount\n      const mobileThumbnailWidthPercentage = (\n        100 / parseInt(mediaSize, 10)\n      ).toFixed(2)\n\n      this.mediaBlock.style.setProperty(\n        \"--mobile-thumbnail-width-percentage\",\n        `${mobileThumbnailWidthPercentage}%`,\n      )\n\n      this.mediaBlock = this.querySelector(this.selectors.mediaBlock)\n      this.mediaBlock.outerHTML = newContent.outerHTML\n\n      // Reassign media block so it's pulling the most up to date one\n      this.mediaBlock = this.querySelector(this.selectors.mediaBlock)\n      this.mediaBlock.dispatchEvent(\n        new CustomEvent(EVENTS.PRODUCT_VARIANT_CHANGED, {\n          detail: {\n            hasMediaGrouping: true,\n            mediaSize,\n          },\n        }),\n      )\n    } else {\n      // Media without grouping needs set navigate to featured media, properly\n      // trigger slider events, styling and stay aware of other featured media\n      const newFeaturedMedia = newContent.getAttribute(\n        \"data-option-value-featured-media\",\n      )\n\n      if (newFeaturedMedia) {\n        const variantMediaChangedEvent = new CustomEvent(\n          EVENTS.PRODUCT_VARIANT_CHANGED,\n          {\n            bubbles: true,\n            detail: {\n              hasMediaGrouping: false,\n              newFeaturedMedia,\n            },\n          },\n        )\n\n        this.mediaItem = this.querySelector(this.selectors.mediaItem)\n        this.mediaItem.dispatchEvent(variantMediaChangedEvent)\n      }\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n  }\n}\n\nif (!customElements.get(\"main-product-default\")) {\n  customElements.define(\"main-product-default\", MainProductDefault)\n}\n","import atBreakpointChange from \"../lib/at-breakpoint-change.js\"\nimport EVENTS from \"../lib/events.js\"\nimport getMediaQuery from \"../lib/media-queries.js\"\n\nconst {\n  ANNOUNCEMENT_HEIGHT_UPDATED,\n  HEADER_HEIGHT_UPDATED,\n  FILTER_REPAINT,\n  FILTER_SORT_CHANGED,\n  MODAL_POPUP_CLOSE,\n  MODAL_POPUP_CLOSED,\n  MODAL_POPUP_OPEN,\n  SORT_CHANGED,\n} = EVENTS\n\nclass SearchResultGrid extends HTMLElement {\n  constructor() {\n    super()\n\n    this.selectors = {\n      activeFilters: \"[js-active-filters]\",\n      announcementBar: \"announcement-bar\",\n      disclosureWrapper: \".disclosure-wrapper\",\n      filterDrawerTrigger: \"[js-filter-drawer-trigger]\",\n      stickyFilterDrawerTrigger: \"[js-filter-drawer-trigger--sticky]\",\n      filterDrawerHeading: \"[js-filter-drawer-heading]\",\n      filterDrawerViewResults: \"[js-filter-view-results]\",\n      filterDrawerViewResultsIdleLabel: \"[js-filter-view-results-label]\",\n      filterGroup: \"[js-filter-group]\",\n      filterGroupParent: \"[js-filter-group-parent]\",\n      filterSortFormComponent: \"[js-filter-sort-form-component]\",\n      footer: \"footer\",\n      header: \"header-wrapper\",\n      pagination: \"[js-pagination]\",\n      resultGrid: \"[js-result-grid]\",\n      promotionTile: \"[js-promotion-tile]\",\n      promotionTilevideo: \"[js-promotion-tile] [js-background-video]\",\n      sortDrawerTrigger: \"[js-sort-drawer-trigger]\",\n      sortDropdowns:\n        \"[js-sort-top-bar], [js-sort-sticky-button], [js-sort-mobile-drawer]\",\n      sortTriggerValue: \"[js-sort-trigger-value]\",\n      stickyFilterSort: \"[js-sticky-filter-sort-button]\",\n      topBar: \"[js-result-grid-top-bar]\",\n    }\n\n    this.classes = {\n      active: \"active\",\n      hidden: \"hidden\",\n      loading: \"loading\",\n      visible: \"is-visible\",\n    }\n\n    this.ids = {\n      filterDrawer: \"filterDrawer\",\n      mobileSortDrawer: \"mobileSortDrawer\",\n    }\n\n    this.breakpoints = {\n      smallDesktop: getMediaQuery(\"small-desktop\"),\n    }\n\n    this.events = {\n      openFilterDrawer: new CustomEvent(\n        MODAL_POPUP_OPEN(this.ids.filterDrawer),\n      ),\n      closeFilterDrawer: new CustomEvent(\n        MODAL_POPUP_CLOSE(this.ids.filterDrawer),\n      ),\n      openSortDrawer: new CustomEvent(\n        MODAL_POPUP_OPEN(this.ids.mobileSortDrawer),\n      ),\n      closeSortDrawer: new CustomEvent(\n        MODAL_POPUP_CLOSE(this.ids.mobileSortDrawer),\n      ),\n    }\n  }\n\n  connectedCallback() {\n    this.controller = new AbortController()\n    this.sectionId = this.dataset.sectionId\n    this.sectionPaddingTop = parseInt(\n      getComputedStyle(this)\n        .getPropertyValue(\"--section-padding-top\")\n        .replace(\"px\", \"\"),\n      10,\n    )\n    this.eventOptions = { signal: this.controller.signal }\n\n    this.header = document.querySelector(this.selectors.header)\n    this.announcementBar = document.querySelector(\n      this.selectors.announcementBar,\n    )\n    this.headerHeight = 0\n    this.announcementHeight = 0\n    this.getHeaderAnnouncementHeight()\n    document.addEventListener(\n      HEADER_HEIGHT_UPDATED,\n      this.handleHeaderHeightChange.bind(this),\n      this.eventOptions,\n    )\n    document.addEventListener(\n      ANNOUNCEMENT_HEIGHT_UPDATED,\n      this.handleAnnouncementHeightChange.bind(this),\n      this.eventOptions,\n    )\n\n    this.filterDrawerTriggers = this.querySelectorAll(\n      `${this.selectors.filterDrawerTrigger}, ${this.selectors.stickyFilterDrawerTrigger}`,\n    )\n    this.filterDrawerHeading = this.querySelector(\n      this.selectors.filterDrawerHeading,\n    )\n    this.filterDrawerViewResults = this.querySelector(\n      this.selectors.filterDrawerViewResults,\n    )\n    this.filterDrawerViewResultsIdleLabels = this.querySelectorAll(\n      this.selectors.filterDrawerViewResultsIdleLabel,\n    )\n    this.activeFilters = this.querySelector(this.selectors.activeFilters)\n    this.filterGroups = this.querySelectorAll(this.selectors.filterGroup)\n    this.topBar = this.querySelector(this.selectors.topBar)\n    this.sortTriggerValue = this.querySelector(this.selectors.sortTriggerValue)\n    this.sortDropdowns = this.querySelectorAll(this.selectors.sortDropdowns)\n    this.resultGrid = this.querySelector(this.selectors.resultGrid)\n    this.promotionTiles = this.querySelectorAll(this.selectors.promotionTile)\n    this.filterSortFormComponent = this.querySelector(\n      this.selectors.filterSortFormComponent,\n    )\n    this.pagination = this.querySelector(this.selectors.pagination)\n\n    this.initFilterDrawerTriggers()\n\n    this.filterDrawerViewResults?.addEventListener(\n      \"click\",\n      this.handleViewResultsClick.bind(this),\n      this.eventOptions,\n    )\n\n    this.addEventListener(\n      FILTER_SORT_CHANGED,\n      this.handleFilterSortFormChange.bind(this),\n      this.eventOptions,\n    )\n\n    this.initSortDropdowns()\n\n    if (\n      this.dataset.filterEnabled === \"true\" ||\n      this.dataset.sortEnabled === \"true\"\n    ) {\n      this.initStickyFilterSortButton()\n    }\n\n    this.sortDrawerTrigger.addEventListener(\n      \"click\",\n      this.openSortDrawer.bind(this),\n      this.eventOptions,\n    )\n\n    // Show the sticky filter/sort button when the mobile sort drawer is closed\n    window.addEventListener(\n      MODAL_POPUP_CLOSED(this.ids.mobileSortDrawer),\n      this.showStickyFilterSort.bind(this),\n      this.eventOptions,\n    )\n  }\n\n  initFilterDrawerTriggers() {\n    this.filterDrawerTriggers.forEach((trigger) => {\n      trigger.addEventListener(\n        \"click\",\n        this.handleFilterDrawerOpen.bind(this),\n        this.eventOptions,\n      )\n    })\n\n    // Check whether we should show the sticky filter/sort button when the filter drawer is closed\n    window.addEventListener(\n      MODAL_POPUP_CLOSED(this.ids.filterDrawer),\n      this.handleFilterDrawerClose.bind(this),\n      this.eventOptions,\n    )\n  }\n\n  initStickyFilterSortButton() {\n    this.siteFooter = document.querySelector(this.selectors.footer)\n    this.stickyFilterSort = this.querySelector(this.selectors.stickyFilterSort)\n    this.sortDrawerTrigger = this.querySelector(\n      this.selectors.sortDrawerTrigger,\n    ).parentNode\n\n    this.mobileFooterObserver = new IntersectionObserver(\n      ([{ isIntersecting: visible }]) => {\n        if (visible) {\n          this.mobileTopBarObserver.disconnect()\n          this.hideStickyFilterSort()\n        } else {\n          this.mobileTopBarObserver.observe(this.topBar)\n          this.showStickyFilterSort()\n        }\n      },\n      { threshold: 0.05 },\n    )\n\n    this.mobileTopBarObserver = new IntersectionObserver(\n      ([{ isIntersecting: visible, boundingClientRect }]) => {\n        if (visible) {\n          this.showStickyFilterSort()\n        } else {\n          if (boundingClientRect.top <= 0) {\n            this.showStickyFilterSort()\n          } else {\n            this.hideStickyFilterSort()\n          }\n        }\n      },\n    )\n\n    if (this.dataset.stickyFilterSortEnabled === \"true\") {\n      this.footerObserver = new IntersectionObserver(\n        ([{ isIntersecting: visible }]) => {\n          if (visible) {\n            this.topBarObserver.disconnect()\n            this.hideStickyFilterSort()\n          } else {\n            this.topBarObserver.observe(this.topBar)\n          }\n        },\n        { threshold: 0.1 },\n      )\n\n      this.topBarObserver = new IntersectionObserver(\n        ([{ isIntersecting: visible, boundingClientRect }]) => {\n          if (visible) {\n            this.topBar.classList.add(this.classes.visible)\n            this.hideStickyFilterSort()\n          } else {\n            this.topBar.classList.remove(this.classes.visible)\n\n            if (\n              boundingClientRect.top <=\n              this.headerHeight + this.announcementHeight\n            ) {\n              this.showStickyFilterSort()\n            } else {\n              this.hideStickyFilterSort()\n            }\n          }\n        },\n        {\n          rootMargin: `-${\n            this.headerHeight + this.announcementHeight\n          }px 0px 0px 0px`,\n        },\n      )\n    }\n\n    // Watch for small-desktop breakpoint to handle sticky/filter button visibility\n    atBreakpointChange(1024, this.handleWindowResize.bind(this))\n    this.handleWindowResize()\n  }\n\n  handleFilterDrawerOpen(event) {\n    this.hideStickyFilterSort()\n\n    // If the open was triggered by the sticky filter/sort button, we need to delay\n    //  to allow the button to animate out.\n    // Otherwise, just open.\n    if (event.target.matches(this.selectors.stickyFilterDrawerTrigger)) {\n      setTimeout(() => {\n        window.dispatchEvent(this.events.openFilterDrawer)\n      }, 240)\n    } else {\n      window.dispatchEvent(this.events.openFilterDrawer)\n    }\n  }\n\n  handleFilterDrawerClose() {\n    if (\n      !this.topBar.classList.contains(this.classes.visible) &&\n      this.dataset.stickyFilterSortEnabled === \"true\"\n    ) {\n      this.showStickyFilterSort()\n    }\n  }\n\n  handleViewResultsClick() {\n    window.dispatchEvent(this.events.closeFilterDrawer)\n  }\n\n  handleFilterSortFormChange(event) {\n    const url = `${window.location.pathname}?section_id=${this.sectionId}&${event.detail.searchParams}`\n\n    const topBarScrollTop =\n      this.topBar.getBoundingClientRect().top +\n      window.scrollY -\n      this.sectionPaddingTop -\n      this.headerHeight -\n      this.announcementHeight\n\n    // Scroll to the top bar\n    window.scrollTo({ top: topBarScrollTop, behaviour: \"smooth\" })\n\n    this.updateURLHash(event.detail.searchParams)\n    this.classList.add(this.classes.loading)\n\n    fetch(url)\n      .then((res) => res.text())\n      .then((text) => {\n        const doc = new DOMParser().parseFromString(text, \"text/html\")\n\n        const newresultGrid = doc.querySelector(this.selectors.resultGrid)\n        const newPagination = doc.querySelector(this.selectors.pagination)\n\n        if (this.dataset.filterEnabled === \"true\") {\n          const newFilterDrawerHeading = doc.querySelector(\n            this.selectors.filterDrawerHeading,\n          )\n          const newFilterDrawerViewResultsIdleLabel = doc.querySelector(\n            this.selectors.filterDrawerViewResultsIdleLabel,\n          )\n          const newActiveFilters = doc.querySelector(\n            this.selectors.activeFilters,\n          )\n          const newFilterDrawerTrigger = doc.querySelector(\n            this.selectors.filterDrawerTrigger,\n          )\n\n          this.filterDrawerHeading.innerHTML = newFilterDrawerHeading.innerHTML\n\n          this.filterDrawerViewResultsIdleLabels.forEach((label) => {\n            label.innerHTML = newFilterDrawerViewResultsIdleLabel.innerHTML\n          })\n\n          this.activeFilters.innerHTML = newActiveFilters.innerHTML\n\n          this.filterGroups.forEach((group) => {\n            const newGroup = doc.getElementById(group.id)\n            const groupParent = group.closest(this.selectors.filterGroupParent)\n\n            if (newGroup) {\n              groupParent.classList.remove(this.classes.hidden)\n              group.innerHTML = newGroup.innerHTML\n            } else {\n              groupParent.classList.add(this.classes.hidden)\n            }\n          })\n\n          this.filterDrawerTriggers.forEach((trigger) => {\n            trigger.innerHTML = newFilterDrawerTrigger.innerHTML\n          })\n        }\n\n        this.resultGrid.innerHTML = newresultGrid.innerHTML\n        this.resultGrid.classList = newresultGrid.classList\n        this.pagination.innerHTML = newPagination.innerHTML\n        this.updateSortDropdowns(event.detail.sortBy)\n        this.classList.remove(this.classes.loading)\n\n        const filterRepaintEvent = new CustomEvent(FILTER_REPAINT, {\n          detail: { newDocument: doc },\n        })\n\n        this.filterSortFormComponent.dispatchEvent(filterRepaintEvent)\n      })\n  }\n\n  updateURLHash(searchParams) {\n    history.pushState(\n      { searchParams },\n      \"\",\n      `${window.location.pathname}${searchParams && \"?\".concat(searchParams)}`,\n    )\n  }\n\n  initSortDropdowns() {\n    this.sortDropdowns.forEach((dropdown) => {\n      const inputs = dropdown.querySelectorAll(\"input\")\n\n      // Add a change listener to each input so that we can emit an event with the change\n      inputs.forEach((input) => {\n        input.addEventListener(\n          \"click\",\n          this.handleSortOptionClick.bind(this),\n          this.eventOptions,\n        )\n\n        input.addEventListener(\n          \"keydown\",\n          this.handleSortOptionKeydown.bind(this),\n          this.eventOptions,\n        )\n      })\n    })\n  }\n\n  updateSortDropdowns(sortBy) {\n    this.dataset.currentSort = sortBy\n\n    this.sortDropdowns.forEach((dropdown) => {\n      const newSelectedInput = dropdown.querySelector(\n        `input[value=\"${sortBy}\"]`,\n      )\n      newSelectedInput.checked = true\n    })\n  }\n\n  handleSortOptionKeydown(event) {\n    event.preventDefault()\n\n    const inputs = event.currentTarget\n      .closest(this.selectors.sortDropdowns)\n      .querySelectorAll(\"input\")\n    let currentInputIndex\n\n    for (let i = 0; i < inputs.length; i++) {\n      if (inputs[i] === event.target) {\n        currentInputIndex = i\n        break\n      }\n    }\n\n    switch (event.key) {\n      case \"ArrowUp\": {\n        let previousInputIndex = currentInputIndex - 1\n\n        // If the current input is the first, then the \"previous\" should be the last\n        if (previousInputIndex < 0) {\n          previousInputIndex = inputs.length - 1\n        }\n\n        inputs[previousInputIndex].checked = true\n        inputs[previousInputIndex].focus()\n        break\n      }\n\n      case \"ArrowDown\": {\n        let nextInputIndex = currentInputIndex + 1\n\n        // If the current input is the first, then the \"previous\" should be the last\n        if (nextInputIndex === inputs.length) {\n          nextInputIndex = 0\n        }\n\n        inputs[nextInputIndex].checked = true\n        inputs[nextInputIndex].focus()\n        break\n      }\n\n      case \" \": {\n        if (event.target.value === this.dataset.currentSort) {\n          this.closeSortDropdown(\n            event.target.closest(this.selectors.sortDropdowns),\n          )\n        } else {\n          this.applySortChange(\n            event.target.value,\n            event.target.dataset.label,\n            event.target.closest(this.selectors.sortDropdowns),\n          )\n        }\n      }\n    }\n  }\n\n  handleSortOptionClick(event) {\n    if (event.target.value !== this.dataset.currentSort) {\n      this.applySortChange(\n        event.target.value,\n        event.target.dataset.label,\n        event.target.closest(this.selectors.sortDropdowns),\n      )\n    }\n  }\n\n  applySortChange(sortBy, label, parentDropdown) {\n    const sortChangedEvent = new CustomEvent(SORT_CHANGED, {\n      detail: { sortBy },\n    })\n\n    this.filterSortFormComponent.dispatchEvent(sortChangedEvent)\n    this.sortTriggerValue.innerText = label\n    this.closeSortDropdown(parentDropdown)\n  }\n\n  closeSortDropdown(dropdown) {\n    const disclosureWrapper = dropdown.closest(this.selectors.disclosureWrapper)\n\n    if (disclosureWrapper) {\n      disclosureWrapper.removeAttribute(\"open\")\n    } else {\n      this.closeSortDrawer()\n    }\n  }\n\n  handleWindowResize() {\n    // If we're above small-desktop, connect an observer to show/hide the sticky\n    // filter/sort button when the top bar or footer are in view.\n    // Otherwise, connect a mobile-specific observer for when the footer or\n    // banner are in view.\n    if (window.matchMedia(this.breakpoints.smallDesktop).matches) {\n      this.hideStickyFilterSort()\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n\n      if (this.dataset.stickyFilterSortEnabled === \"true\") {\n        this.footerObserver.observe(this.siteFooter)\n      }\n    } else {\n      this.hideStickyFilterSort()\n\n      if (this.dataset.stickyFilterSortEnabled === \"true\") {\n        this.footerObserver.disconnect()\n        this.topBarObserver.disconnect()\n      }\n\n      this.mobileFooterObserver.observe(this.siteFooter)\n    }\n  }\n\n  openSortDrawer() {\n    this.hideStickyFilterSort()\n\n    // Delay to allow sticky filter/sort button to animate out.\n    setTimeout(() => {\n      window.dispatchEvent(this.events.openSortDrawer)\n    }, 240)\n  }\n\n  closeSortDrawer() {\n    window.dispatchEvent(this.events.closeSortDrawer)\n  }\n\n  hideStickyFilterSort() {\n    this.stickyFilterSort?.classList.remove(this.classes.active)\n  }\n\n  showStickyFilterSort() {\n    this.stickyFilterSort?.classList.add(this.classes.active)\n  }\n\n  getHeaderAnnouncementHeight() {\n    if (this.header.dataset.enableStickyHeader === \"true\") {\n      this.headerHeight = parseInt(\n        getComputedStyle(document.documentElement)\n          .getPropertyValue(\"--header-height\")\n          .replace(\"px\", \"\"),\n        10,\n      )\n    }\n\n    if (\n      this.announcementBar &&\n      this.announcementBar.hasAttribute(\"data-sticky\")\n    ) {\n      this.announcementHeight = parseInt(\n        getComputedStyle(document.documentElement)\n          .getPropertyValue(\"--announcement-height\")\n          .replace(\"px\", \"\"),\n        10,\n      )\n    }\n  }\n\n  handleHeaderHeightChange(event) {\n    if (this.header.dataset.enableStickyHeader === \"true\") {\n      this.headerHeight = event.detail.height\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n      this.footerObserver?.disconnect()\n      this.topBarObserver?.disconnect()\n      this.initStickyFilterSortButton()\n    }\n  }\n\n  handleAnnouncementHeightChange(event) {\n    if (\n      this.announcementBar &&\n      this.announcementBar.hasAttribute(\"data-sticky\")\n    ) {\n      this.announcementHeight = event.detail.height\n      this.mobileFooterObserver.disconnect()\n      this.mobileTopBarObserver.disconnect()\n      this.footerObserver?.disconnect()\n      this.topBarObserver?.disconnect()\n      this.initStickyFilterSortButton()\n    }\n  }\n\n  disconnectedCallback() {\n    this.controller.abort()\n    this.documentObserver.disconnect()\n    this.mobileFooterObserver.disconnect()\n    this.mobileTopBarObserver.disconnect()\n    this.footerObserver?.disconnect()\n    this.topBarObserver?.disconnect()\n    atBreakpointChange.unload()\n  }\n}\n\nif (!customElements.get(\"search-result-grid\")) {\n  customElements.define(\"search-result-grid\", SearchResultGrid)\n}\n","export default () => {\n  const pageTransitionOverlay = document.querySelector(\n    \"#page-transition-overlay\",\n  )\n  const animationDuration = 200\n\n  if (pageTransitionOverlay) {\n    pageTransitionOverlay.classList.remove(\"skip-transition\")\n\n    setTimeout(function () {\n      pageTransitionOverlay.classList.remove(\"active\")\n    }, 0)\n\n    setTimeout(() => {\n      // Prevent the theme editor from seeing this\n      pageTransitionOverlay.classList.remove(\"active\")\n    }, animationDuration)\n\n    document.body.addEventListener(\"click\", (event) => {\n      const target = event.target\n\n      // Only want links...\n      if (\n        target.tagName !== \"A\" ||\n        !target.getAttribute(\"href\") ||\n        target.getAttribute(\"target\") === \"_blank\" ||\n        target.classList.contains(\"no-transition\")\n      ) {\n        return\n      }\n\n      const href = target.getAttribute(\"href\")\n\n      // That aren't anchors or mailto/tel links\n      if (\n        href[0] === \"#\" ||\n        href.indexOf(\"mailto:\") === 0 ||\n        href.indexOf(\"tel:\") === 0\n      ) {\n        return\n      }\n\n      onClickedToLeave(event, target)\n    })\n\n    window.onpageshow = function (e) {\n      if (e.persisted) {\n        pageTransitionOverlay.classList.remove(\"active\")\n      }\n    }\n  }\n\n  function onClickedToLeave(event, target) {\n    // avoid interupting open-in-new-tab click\n    if (event.ctrlKey || event.metaKey) return\n\n    event.preventDefault()\n\n    // Hint to browser to prerender destination\n    const linkHint = document.createElement(\"link\")\n    linkHint.setAttribute(\"rel\", \"prerender\")\n    linkHint.setAttribute(\"href\", target.href)\n\n    document.head.appendChild(linkHint)\n\n    setTimeout(() => {\n      window.location.href = target.href\n    }, animationDuration)\n\n    pageTransitionOverlay.classList.add(\"active\")\n  }\n}\n","import pageTransition from \"@/lib/page-transition\"\nimport { handleTab } from \"@/lib/a11y\"\nimport widthWatch from \"@/lib/width-watcher\"\nimport { dialog } from \"@/lib/modals.js\"\nimport \"@/lib/navigation\"\n\nimport * as cart from \"@/lib/cart.js\"\nimport EVENTS from \"@/lib/events.js\"\nimport \"./sections/header-group.js\"\n\n// Import sections\nimport \"@/sections\"\n\n// Page transitions\npageTransition()\n\n// a11y tab handler\nhandleTab()\n\n// widthWatch breakpoint emmiter\nwidthWatch()\n\n// Initialize modals\ndocument\n  .querySelectorAll(\"dialog[data-fluco-dialog]\")\n  .forEach((el) => dialog(el))\n\n// Maintain a local representation of the cart so it's accessible to JS\ncart.get().then((cartData) => {\n  window.theme.cartData = cartData\n})\n\ndocument.addEventListener(EVENTS.CART_CHANGED, (event) => {\n  window.theme.cartData = event.detail.cart\n})\n\ndocument.addEventListener(EVENTS.CART_ITEM_ADDED, () => {\n  if (window.flu.cartType === \"drawer\") {\n    window.dispatchEvent(new Event(EVENTS.CART_DRAWER_OPEN))\n  } else {\n    window.location = window.theme.routes.cart.base\n  }\n})\n\n// Make it easy to see exactly what theme version\n// this is by commit SHA\nwindow.SHA = \"__gitSHA\"\n\nif (\n  !sessionStorage.getItem(\"flu_stat_recorded\") &&\n  !window.Shopify?.designMode\n) {\n  // eslint-disable-next-line no-process-env\n  fetch(process.env.FLU_STATS_ENDPOINT, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      ...window.theme.coreData,\n      s: window.Shopify?.shop,\n      r: window.Shopify?.theme?.role,\n    }),\n  })\n\n  if (window.sessionStorage) {\n    sessionStorage.setItem(\"flu_stat_recorded\", \"true\")\n  }\n}\n","const handleTab = () => {\n  const formElments = [\"input\", \"textarea\", \"select\"]\n\n  // Determine if the user is a mouse or keyboard user\n  function handleFirstTab(event) {\n    if (\n      event.key === \"Tab\" &&\n      !formElments.includes(document.activeElement.tagName.toLowerCase())\n    ) {\n      document.body.classList.add(\"user-is-tabbing\")\n\n      window.addEventListener(\"mousedown\", handleMouseDownOnce)\n      window.removeEventListener(\"keydown\", handleFirstTab)\n    }\n  }\n\n  function handleMouseDownOnce() {\n    document.body.classList.remove(\"user-is-tabbing\")\n\n    window.addEventListener(\"keydown\", handleFirstTab)\n    window.removeEventListener(\"mousedown\", handleMouseDownOnce)\n  }\n\n  window.addEventListener(\"keydown\", handleFirstTab)\n}\n\nconst focusFormStatus = (node) => {\n  const formStatus = node.querySelector(\".form-status\")\n\n  if (!formStatus) return\n\n  const focusElement = formStatus.querySelector(\"[data-form-status]\")\n\n  if (!focusElement) return\n\n  focusElement.focus()\n}\n\nconst prefersReducedMotion = () => {\n  return window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\n}\n\nexport { handleTab, focusFormStatus, prefersReducedMotion }\n"],"names":["n","e","i","o","t","r","f","d","p","u","w","a","window","pageXOffset","pageYOffset","innerHeight","innerWidth","length","x","y","px","py","vh","pvh","vw","pvw","requestAnimationFrame","srraf","indexOf","push","performance","now","update","this","destroy","splice","EVENTS","QUANTITY_INPUT_CHANGE","QUICK_ADD_SUCCESS","QUICK_ADD_ERROR","PRODUCT_VARIANT_CHANGING","PRODUCT_VARIANT_CHANGED","PRODUCT_ADD_SUCCESS","PRODUCT_ADD_ERROR","CART_ITEM_ADDED","CART_ITEM_CHANGED","CART_ITEM_CHANGE_ERROR","CART_ITEM_REMOVED","CART_NOTE_CHANGED","CART_NOTE_CHANGED_ERROR","CART_CHANGED","CART_ERROR","CART_ITEM_CHANGE_PENDING","CART_DRAWER_OPENING","CART_DRAWER_OPEN","CART_DRAWER_CLOSE","CART_NOTE_OPENED","FILTER_REPAINT","FILTER_SORT_CHANGED","SORT_CHANGED","ANNOUNCEMENT_HEIGHT_UPDATED","HEADER_HEIGHT_UPDATED","SHOPIFY_BLOCK_SELECT","SHOPIFY_BLOCK_DESELECT","SHOPIFY_SECTION_DESELECT","SHOPIFY_SECTION_SELECT","SHOPIFY_SECTION_LOAD","SHOPIFY_SECTION_UNLOAD","ANNOUNCEMENT_BAR_STICKY_CHANGE","MODAL_PASSWORD_LOGIN_OPEN","MODAL_ADDRESS_NEW_OPEN","MODAL_ADDRESS_EDIT_OPEN","addressId","MODAL_POPUP_OPEN","id","MODAL_POPUP_OPENING","MODAL_POPUP_CLOSE","MODAL_POPUP_CLOSING","MODAL_POPUP_CLOSED","IMPACT_LOGO_LOADED","IMPACT_LOGO_NOT_VISIBLE","IMPACT_LOGO_PARTIALLY_VISIBLE","IMPACT_LOGO_VISIBLE","MODAL_MOBILE_CROSSBORDER_LANGUAGE_DRAWER_OPEN","MODAL_MOBILE_CROSSBORDER_COUNTRY_DRAWER_OPEN","SCROLL_SLIDER_CHANGED","scrollerId","SCROLL_SLIDER_INIT","SCROLL_SLIDER_INITIALIZED","SCROLL_SLIDER_GO_TO_SLIDE","BUTTON_STATE_STARTED","BUTTON_STATE_COMPLETED","BUTTON_STATE_INCOMPLETED","SEARCH_INPUT_CHANGED","PREDICTIVE_SEARCH_DRAWER_OPENING","PREDICTIVE_SEARCH_DRAWER_OPEN","PREDICTIVE_SEARCH_DRAWER_CLOSE","WINDOW_RESIZED","WINDOW_WIDTH_CHANGED","WINDOW_ABOVE_BREAKPOINT","breakpoint","WINDOW_BELOW_BREAKPOINT","breakpoints","reversedBreakpoints","reverse","Dialog","config","openMethod","reusable","dynamicContent","blurDismiss","constructor","element","flu","dialogs","dataset","flucoDialog","console","error","data","title","querySelector","description","content","registerDialog","eventController","AbortController","eventOptions","signal","addEventListener","open","close","event","preventDefault","target","closest","handleCloseButtonClick","value","textContent","setTitle","setDescription","innerHTML","setContent","setReusable","setBlurDismiss","modal","setModal","backdropDismiss","setBackdropDismiss","callbackOpen","callback","setCallbackOpen","callbackClose","setCallbackClose","detail","classList","remove","emit","setDynamicContent","add","closeAnimations","getAnimations","actuallyClose","clear","once","events","dom","deregister","abort","closeButton","removeEventListener","bind","deregisterDialog","setAttribute","key","eventName","dispatchEvent","Event","document","body","contains","newDialog","callbackFunction","dialog","Object","entries","debounce","timer","func","time","clearTimeout","setTimeout","getMediaQuery","querySize","getComputedStyle","documentElement","getPropertyValue","warn","Debounce","NavigationWrapper","HTMLElement","selectors","nav","submenu","submenuContainer","submenuList","submenuItem","stateClasses","submenuInner","drawerToggle","drawerToggleInput","drawerCloseLabel","secondaryDrawerToggle","secondaryDrawerToggleHeader","toggles","backdrop","primary","primaryInner","childAnimationTarget","secondaryDropdown","tertiaryDropdown","primaryDropdownItem","secondaryDropdownItem","megamenu","promoImage","themeEditorSelected","language","country","scrollSentinels","classes","drawer","drawerBreakpoint","dropdownBreakpoint","openDrawer","closeDrawer","openDrawerPanel","closeDrawerPanel","openDropdown","closeDropdown","dropdownOpensLeft","opening","closing","active","imageVisible","handleThemeEditorBlockEvent","evt","menu","blockId","closeOpenMenus","type","querySelectorAll","forEach","el","connectedCallback","sectionId","disconnectedCallback","Shopify","designMode","getAttribute","replace","promoVisibleTimingOffset","determineLayoutBreakpoint","setLayoutClasses","setEachSubmenuOpenHeight","setMegamenuPosition","setTertiaryDropdownOpeningDirection","widthWatcher","languageTrigger","CustomEvent","countryTrigger","handleDrawerToggleClick","handleDrawerCloseKeydown","handleDrawerToggleInputKeydown","toggle","handleSecondaryDrawerToggleClick","handleDropdownMouseEvent","handleDropdownTouchEvent","submenuInners","root","observer","IntersectionObserver","handleIntersectionChange","entry","observe","isIntersecting","hasAttribute","parentNode","scrollTop","drawerClosePrimary","drawerOpenPrimary","drawerCloseSecondary","drawerOpenSecondary","eventDirection","isDrawer","tagName","click","targetElements","pendingAnimationEnds","flatMap","subtree","map","animation","finished","Promise","all","then","focus","catch","submenuTarget","promos","parseFloat","match","setOpenHeightProp","inner","style","removeProperty","maxHeight","top","getBoundingClientRect","screenHeightLimit","menuHeight","offsetHeight","Math","min","setProperty","megamenus","removeAttribute","currentLeft","Number","newLeft","left","scrollX","abs","dropdowns","submenuWidth","parseInt","dropdown","tertiaryMenuTooFarRight","right","tertiary","parent","checked","customElements","get","define","routes","theme","cart","paths","base","change","HeaderGroup","previousImpactLogoVisibility","overscrollThreshold","announcementBar","header","impactLogo","init","ids","filter","Boolean","controller","watcher","includes","announcementBarBox","headerBox","impactLogoBox","announcementBarBoxBottom","scrollY","bottom","headerBoxBottom","impactLogoBoxBottom","instantSticky","stickyHeaderStyle","maxHeightToWatch","impactLogoBoxbottom","handleScroll","stuckHeaderHeight","height","revealLogo","breakpointRegex","AnnouncementBar","static","super","announcementSlider","parentElement","handleBlockSelected","handleBlockDeselected","setHeightVariable","stickIfNecessary","attributeChangedCallback","name","_oldValue","newValue","sliderComponent","stickyCondition","enableStickyAnnouncementBar","setSticky","bool","toggleAttribute","setSliderAutoplay","setSliderActiveBlock","autoplay","activeBlockId","toFixed","lastSetHeight","BlogPosts","sidebar","sidebarImageWrapper","sidebarLink","cursorWithin","wrapper","parentMetaEl","sidebarImage","hoverTrigger","clientX","HeaderWrapper","showCartDrawerButton","showPredictiveSearchDrawerButton","eventController2","_newValue","visibilityState","navigator","sendBeacon","shop","isSticky","enableStickyHeader","PopupsSection","visible","tab","handleSectionLoad","selectedTab","atBreakpointChange","breakpointToWatch","screenUnderBP","clientWidth","currentScreenWidthUnderBP","unload","intersectionWatcher","node","options","instantThreshold","threshold","margin","matchMedia","matches","disconnect","PauseableInterval","delay","pausedTimeLeft","timerIsPaused","timerHasPaused","triggerSetAt","Date","getTime","setInterval","reset","clearTimer","getTimeLeft","pause","resume","clearInterval","isPaused","SlideshowSection","cursor","loadingOverlay","pagination","paginationBullet","paginationNav","parentSection","slide","slideByBlockId","slideImageDesktop","slideImageMobile","slideContent","slideshow","slideshowPause","videoContainer","videoPlaceholderImage","videoPauseButton","videoSlide","currentSlide","loaded","nextSlide","prevCursor","nextCursor","slideTransitionOut","mobile","smallDesktop","strings","slides","slideList","Array","from","firstSlideIndex","lastSlideIndex","firstIndexOnLoad","paginationBullets","bullet","handlePaginationBulletClick","initLoadingOverlay","handleWindowResize","handleSlideSelect","handleSlideDeselect","firstSlideVideoContainer","children","hideLoadingOverlay","MutationObserver","mutations","mutation","childList","firstSlidePlaceholderImage","createClassMutationObserver","attributeFilter","firstSlideImage","firstSlideMobileImage","changeSlide","initAutoplay","currentTarget","mobileController","initCursor","cursorController","initSwipeNav","initPaginationNav","midpoint","offsetWidth","cursorEventOptions","showCursor","updateCursorPosition","hideCursor","slideContentElements","interactiveElementSelectors","interactiveElements","slideContentElement","handleSlideshowClick","pageY","offsetTop","pageX","offsetLeft","direction","irisOrigin","offsetX","offsetY","getNewSlideIndex","handleSwipeStart","handleSwipeEnd","swipeStartX","swipeStartY","swipeEndX","swipeEndY","paginationNavButtons","button","handlePaginationNavClick","timeBetweenSlides","handlePauseClick","accessibility","carouselPlay","carouselPause","newSlideIndex","currentSlideIndex","index","newSlide","find","video","play","selectedSlide","load","setAutoplay","state","loadVimeoAPI","Vimeo","resolve","tag","createElement","src","onload","appendChild","loadYouTubeAPI","YT","onYouTubeIframeAPIReady","youTubePlayerArr","vimeoPlayerArr","internalPlayerArr","addPlayerToTrackingArr","source","player","pausePlayingVideos","pauseVideo","clickPosterToPlayYouTube","unMute","playVideo","onYouTubePlayerStateChange","mute","clickPosterToPlayVimeo","getPaused","paused","setMuted","liquidMadeVideoPlayer","showPoster","hasPoster","playButton","videoInitialized","_initLiquidMadeVideoPlayer","hadPoster","poster","internalVideo","externalVideo","videoProvider","videoId","Player","playerVars","enablejsapi","cc_load_policy","controls","iv_load_policy","playsinline","rel","playlist","onReady","getIframe","tabIndex","onStateChange","initYouTubeVideo","initVimeoVideo","_initDomMadeVideoPlayer","videoType","iframe","muted","updateIframeVimeoVideo","VideoSection","currentVideoWrapper","mobileVideoTemplate","videoTemplate","videoPlayerContainer","requiresTemplate","selectActiveTemplate","initVideo","createVideo","template","videoContent","cloneNode","append","CollectionProductGrid","activeFilters","disclosureWrapper","filterDrawerTrigger","stickyFilterDrawerTrigger","filterDrawerHeading","filterDrawerViewResults","filterDrawerViewResultsIdleLabel","filterGroup","filterGroupParent","filterSortFormComponent","footer","productGrid","promotionTile","promotionTilevideo","sortDrawerTrigger","sortDropdowns","sortTriggerValue","stickyFilterSort","topBar","hidden","loading","filterDrawer","mobileSortDrawer","openFilterDrawer","closeFilterDrawer","openSortDrawer","closeSortDrawer","sectionPaddingTop","headerHeight","announcementHeight","getHeaderAnnouncementHeight","handleHeaderHeightChange","handleAnnouncementHeightChange","filterDrawerTriggers","filterDrawerViewResultsIdleLabels","filterGroups","promotionTiles","initFilterDrawerTriggers","handleViewResultsClick","handleFilterSortFormChange","initSortDropdowns","filterEnabled","sortEnabled","initStickyFilterSortButton","showStickyFilterSort","trigger","handleFilterDrawerOpen","handleFilterDrawerClose","siteFooter","mobileFooterObserver","mobileTopBarObserver","hideStickyFilterSort","boundingClientRect","stickyFilterSortEnabled","footerObserver","topBarObserver","rootMargin","url","location","pathname","searchParams","topBarScrollTop","scrollTo","behaviour","updateURLHash","fetch","res","text","doc","DOMParser","parseFromString","newProductGrid","newPagination","newFilterDrawerHeading","newFilterDrawerViewResultsIdleLabel","newActiveFilters","newFilterDrawerTrigger","label","group","newGroup","getElementById","groupParent","updateSortDropdowns","sortBy","filterRepaintEvent","newDocument","history","pushState","concat","input","handleSortOptionClick","handleSortOptionKeydown","currentSort","inputs","currentInputIndex","previousInputIndex","nextInputIndex","closeSortDropdown","applySortChange","parentDropdown","sortChangedEvent","innerText","documentObserver","icons","setupMediaLightbox","mediaLightbox","import","chunks","photoswipe","PhotoSwipeLightbox","PhotoSwipe","gallery","showHideAnimationType","pswpModule","mainClass","bgOpacity","arrowPrevSVG","leftChevronWithStem","arrowNextSVG","rightChevronWithStem","closeSVG","zoomSVG","zoom","preloadFirstSlide","addFilter","itemData","videoUrl","on","externalVideoHost","externalVideoId","videoPoster","videoAspectRatio","isBackgroundVideo","className","playsInline","currentPoster","posterImage","domMadeVideoPlayer","pswp","currSlide","firstChild","childNodes","dataSource","items","setupModelViewer","modelEls","initModelViewers","errors","model","viewer","ModelViewerUI","parentContainer","closeBtn","initCustomModelButtons","initShopifyXr","ShopifyXR","modelJSON","addModels","JSON","parse","setupXRElements","loadFeatures","version","onLoad","ProductMedia","activeThumb","carouselTabIndex","initialMediaContainer","image","mainMediaContainer","media","mediaItemWrapper","mobileLoopButton","thumb","thumbById","mediaById","thumbContainer","thumbGradient","viewInYourSpace","initActiveMedia","hasMediaGrouping","handleRepaint","updateActiveMainMediaToVariant","handleLeftThumbnailContainerHeight","activeMediaController","hasSingleMedia","mediaLayout","hasProductLightbox","videoPlayerContainers","thumbnailPosition","activeMediaId","thumbnailId","currentMediaEl","currentElement","previousMediaEl","previousElement","updateActiveThumbnails","mediaItemId","mediaType","initViewInYourSpace","updateCarouselA11yNav","prevMediaType","injectedVideoIframe","injectedVideoElement","initThumbnailListeners","initialMedia","mediaEl","initialImg","decode","updateThumbGradientOpacity","thumbnailItems","item","updateActiveMainMedia","thumbnailIndex","currentActiveMediaId","currentThumbnailIndex","scrollIntoView","behavior","block","inline","slideIndex","newMediaId","newFeaturedMedia","newMediaIndex","mediaItemWrappers","lastActiveThumbnail","activeThumbnail","firstMediaId","mediaId","scrollAttribute","scrollDistance","width","beforeOpacity","afterOpacity","thumbContainerScrollHeight","scrollHeight","scrollLeft","thumbContainerScrollWidth","scrollWidth","currentActiveMediaEl","allTabIndexEls","currentTabIndexEls","mediaSize","MainProductDefault","productInner","detailsContainer","mediaContainer","buyButtonBlock","buyButtons","buyButtonDialog","inventoryStatusBlock","mediaBlock","mediaItem","popupModalDialog","priceBlock","productForm","productFormIdInput","skuBlock","stickyAddToCartContent","stickyAddToCartDrawer","storeAvailabilityContainer","variantBlock","variantMediaGrouping","variantSelectedInputs","selectVariantById","changePending","hasError","modalWillOpen","stickyDetailsContainer","stickyMediaContainer","preventAnimation","quickViewProduct","isFeatured","sectionType","productURL","setStickyContainer","withinQuickView","handleNewVariant","stickyContainer","galleryLayout","newElements","newOptionInput","newVariantId","params","URLSearchParams","section_id","set","selectedOptionValues","join","newProductUrl","response","responseText","html","updateUrlWithVariant","dialogKeysToDestroy","updateBlockHTML","htmlVariantId","newOptionId","updateBuyButtonBlockContent","withinStickyModal","updateVariantSelectorBlockContent","newContent","updateMediaBlockContent","setUnavailable","getUrlWithVariant","parsedURL","URL","urlBase","origin","unavailableSelectors","disableSubmitButtons","unavailableString","products","product","unavailable","submitButtonLabels","variantId","href","replaceState","path","contentToUpdateArray","htmlBlock","outerHTML","lastOptionSelectedId","dialogEl","stickyDialog","defaultPopupModalDialog","mobileThumbnailWidthPercentage","variantMediaChangedEvent","bubbles","SearchResultGrid","resultGrid","newresultGrid","pageTransitionOverlay","ctrlKey","metaKey","linkHint","head","onClickedToLeave","onpageshow","persisted","pageTransition","formElments","handleFirstTab","activeElement","toLowerCase","handleMouseDownOnce","handleTab","lastSize","widthWatch","method","credentials","json","cartData","cartType","SHA","sessionStorage","getItem","headers","stringify","coreData","s","role","setItem"],"mappings":"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"}